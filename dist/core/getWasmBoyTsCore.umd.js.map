{"version":3,"file":"getWasmBoyTsCore.umd.js","sources":["core.esm.js","../../core/portable/getTsCore.js"],"sourcesContent":["// Banner placed by rollup to mock out some items on our esm build\n// This is useful for things like wasmmemory\n\nconst wasmboyMemorySize = 0x8b0000;\n\n// Simply initialized to the size we need\nconst wasmByteMemory = new Uint8ClampedArray(wasmboyMemorySize);\n\n// Memory mock\nexport const memory = {\n  size: () => {\n    return wasmboyMemorySize;\n  },\n  grow: () => {},\n  wasmByteMemory: wasmByteMemory\n};\n\nconst load = offset => {\n  return wasmByteMemory[offset];\n};\n\nconst store = (offset, value) => {\n  wasmByteMemory[offset] = value;\n};\n\nconst abs = value => {\n  return Math.abs(value);\n};\n\nconst ceil = value => {\n  return Math.ceil(value);\n};\n\n// Constants that will be shared by the wasm core of the emulator\n// And libraries built around the wasm (such as the official JS), or @CryZe wasmboy-rs\n// ----------------------------------\n// Wasmboy Memory Map\n// https://docs.google.com/spreadsheets/d/17xrEzJk5-sCB9J2mMJcVnzhbE-XH_NvczVSQH9OHvRk/edit?usp=sharing\n// ----------------------------------\n// AssemblyScript\nvar ASSEMBLYSCRIPT_MEMORY_LOCATION = 0x000000;\nvar ASSEMBLYSCRIPT_MEMORY_SIZE = 0x000400;\n// WasmBoy States\nvar WASMBOY_STATE_LOCATION = ASSEMBLYSCRIPT_MEMORY_LOCATION + ASSEMBLYSCRIPT_MEMORY_SIZE;\nvar WASMBOY_STATE_SIZE = 0x000400;\n// Gameboy Internal Memory\nvar VIDEO_RAM_LOCATION = WASMBOY_STATE_LOCATION + WASMBOY_STATE_SIZE;\nvar VIDEO_RAM_SIZE = 0x004000;\nvar WORK_RAM_LOCATION = VIDEO_RAM_LOCATION + VIDEO_RAM_SIZE;\nvar WORK_RAM_SIZE = 0x008000;\nvar OTHER_GAMEBOY_INTERNAL_MEMORY_LOCATION = WORK_RAM_LOCATION + WORK_RAM_SIZE;\nvar OTHER_GAMEBOY_INTERNAL_MEMORY_SIZE = 0x004000;\n// General Gameboy Internal Memory\nvar GAMEBOY_INTERNAL_MEMORY_LOCATION = VIDEO_RAM_LOCATION;\nvar GAMEBOY_INTERNAL_MEMORY_SIZE = OTHER_GAMEBOY_INTERNAL_MEMORY_LOCATION - VIDEO_RAM_LOCATION + OTHER_GAMEBOY_INTERNAL_MEMORY_SIZE;\n// Graphics Output\nvar GBC_PALETTE_LOCATION = OTHER_GAMEBOY_INTERNAL_MEMORY_LOCATION + OTHER_GAMEBOY_INTERNAL_MEMORY_SIZE;\nvar GBC_PALETTE_SIZE = 0x000080;\nvar BG_PRIORITY_MAP_LOCATION = GBC_PALETTE_LOCATION + GBC_PALETTE_SIZE;\nvar BG_PRIORITY_MAP_SIZE = 0x005c00;\nvar FRAME_LOCATION = BG_PRIORITY_MAP_LOCATION + BG_PRIORITY_MAP_SIZE;\nvar FRAME_SIZE = 0x016c00;\nvar BACKGROUND_MAP_LOCATION = FRAME_LOCATION + FRAME_SIZE;\nvar BACKGROUND_MAP_SIZE = 0x030000;\nvar TILE_DATA_LOCATION = BACKGROUND_MAP_LOCATION + BACKGROUND_MAP_SIZE;\nvar TILE_DATA_SIZE = 0x024000;\nvar OAM_TILES_LOCATION = TILE_DATA_LOCATION + TILE_DATA_SIZE;\nvar OAM_TILES_SIZE = 0x003c00;\n// General Graphics Output\nvar GRAPHICS_OUTPUT_LOCATION = GBC_PALETTE_LOCATION;\nvar GRAPHICS_OUTPUT_SIZE = OAM_TILES_LOCATION - GBC_PALETTE_LOCATION + OAM_TILES_SIZE;\n// Audio Output\nvar CHANNEL_1_BUFFER_LOCATION = OAM_TILES_LOCATION + OAM_TILES_SIZE;\nvar CHANNEL_1_BUFFER_SIZE = 0x020000;\nvar CHANNEL_2_BUFFER_LOCATION = CHANNEL_1_BUFFER_LOCATION + CHANNEL_1_BUFFER_SIZE;\nvar CHANNEL_2_BUFFER_SIZE = 0x020000;\nvar CHANNEL_3_BUFFER_LOCATION = CHANNEL_2_BUFFER_LOCATION + CHANNEL_2_BUFFER_SIZE;\nvar CHANNEL_3_BUFFER_SIZE = 0x020000;\nvar CHANNEL_4_BUFFER_LOCATION = CHANNEL_3_BUFFER_LOCATION + CHANNEL_3_BUFFER_SIZE;\nvar CHANNEL_4_BUFFER_SIZE = 0x020000;\nvar AUDIO_BUFFER_LOCATION = CHANNEL_4_BUFFER_LOCATION + CHANNEL_4_BUFFER_SIZE;\nvar AUDIO_BUFFER_SIZE = 0x020000;\n// Catridge Memory\nvar CARTRIDGE_RAM_LOCATION = AUDIO_BUFFER_LOCATION + AUDIO_BUFFER_SIZE;\nvar CARTRIDGE_RAM_SIZE = 0x020000;\nvar CARTRIDGE_ROM_LOCATION = CARTRIDGE_RAM_LOCATION + CARTRIDGE_RAM_SIZE;\nvar CARTRIDGE_ROM_SIZE = 0x7e0400;\n// Debug Memory\nvar DEBUG_GAMEBOY_MEMORY_LOCATION = CARTRIDGE_ROM_LOCATION + CARTRIDGE_ROM_SIZE;\nvar DEBUG_GAMEBOY_MEMORY_SIZE = 0xffff;\n// Final General Size\nvar WASMBOY_MEMORY_LOCATION = 0x000000;\nvar WASMBOY_MEMORY_SIZE = DEBUG_GAMEBOY_MEMORY_LOCATION + DEBUG_GAMEBOY_MEMORY_SIZE + 1;\nvar WASMBOY_WASM_PAGES = ceil(WASMBOY_MEMORY_SIZE / 1024 / 64) + 1;\n\nvar Config = /** @class */ (function () {\n    function Config() {\n    }\n    // Boot Rom\n    Config.enableBootRom = false;\n    // GBC Options\n    Config.useGbcWhenAvailable = true;\n    // Batch Processing\n    Config.audioBatchProcessing = false;\n    Config.graphicsBatchProcessing = false;\n    Config.timersBatchProcessing = false;\n    // Scanline Rendering\n    Config.graphicsDisableScanlineRendering = false;\n    // Acumulate Sound Samples\n    Config.audioAccumulateSamples = false;\n    // Tile Rednering\n    Config.tileRendering = false;\n    Config.tileCaching = false;\n    // Audio Debugging\n    Config.enableAudioDebugging = false;\n    return Config;\n}());\n\n// Portable Code for JS Wasm Benchmarking\n// https://github.com/AssemblyScript/assemblyscript/wiki/Writing-portable-code\n// https://github.com/AssemblyScript/assemblyscript/blob/master/std/portable/index.js\nfunction u8Portable(param) {\n    return param & 0xff;\n}\nfunction u16Portable(param) {\n    return param & 0xffff;\n}\nfunction i8Portable(param) {\n    return (param << 24) >> 24;\n}\nfunction i32Portable(param) {\n    return param | 0;\n}\n\n// Set flag bit on on register F. For instance set zero flag to zero -> (7, 0)\nfunction setFlagBit(flagBit, flagValue) {\n    var bitwiseOperand = u8Portable(1 << flagBit);\n    if (flagValue > 0) {\n        Cpu.registerF = Cpu.registerF | bitwiseOperand;\n    }\n    else {\n        // XOR out the two ones\n        bitwiseOperand = 0xff ^ bitwiseOperand;\n        Cpu.registerF = Cpu.registerF & bitwiseOperand;\n    }\n    return Cpu.registerF;\n}\n// Overload the set flag bit for ease of use\nfunction setZeroFlag$$1(value) {\n    setFlagBit(7, value);\n}\nfunction setSubtractFlag(value) {\n    setFlagBit(6, value);\n}\nfunction setHalfCarryFlag(value) {\n    setFlagBit(5, value);\n}\nfunction setCarryFlag(value) {\n    setFlagBit(4, value);\n}\n// Getters for flags\nfunction getZeroFlag$$1() {\n    return (Cpu.registerF >> 7) & 0x01;\n}\nfunction getSubtractFlag() {\n    return (Cpu.registerF >> 6) & 0x01;\n}\nfunction getHalfCarryFlag() {\n    return (Cpu.registerF >> 5) & 0x01;\n}\nfunction getCarryFlag$$1() {\n    return (Cpu.registerF >> 4) & 0x01;\n}\n// Must be run before the register actually performs the add\n// amountToAdd i16, since max number can be an u8\nfunction checkAndSetEightBitHalfCarryFlag(value, amountToAdd) {\n    if (amountToAdd >= 0) {\n        // https://robdor.com/2016/08/10/gameboy-emulator-half-carry-flag/\n        var result = u8Portable((value & 0x0f) + (amountToAdd & 0x0f)) & 0x10;\n        setHalfCarryFlag((result !== 0x00));\n    }\n    else {\n        // From: https://github.com/djhworld/gomeboycolor/blob/master/src/cpu/index.go\n        // CTRL+F \"subBytes(a, b byte)\"\n        setHalfCarryFlag(((abs(amountToAdd) & 0x0f) > (value & 0x0f)));\n    }\n}\nfunction checkAndSetEightBitCarryFlag(value, amountToAdd) {\n    if (amountToAdd >= 0) {\n        var result = u8Portable(value + amountToAdd);\n        setCarryFlag((value > result));\n    }\n    else {\n        setCarryFlag((abs(amountToAdd) > value));\n    }\n}\n// Function to handle 16 bit addition overflow, and set the carry flags accordingly\n// i32 on valueTwo to support passing signed immedaite values\nfunction checkAndSetSixteenBitFlagsAddOverflow(valueOne, valueTwo, useStackPointerBits) {\n    // need to differentiate between HL and SP\n    // HL carries are at 11 and 15, SP carries are at 3 and 7 :p\n    if (useStackPointerBits) {\n        // Logic from : https://github.com/nakardo/node-gameboy/blob/master/lib/cpu/opcodes.js\n        // CTRL+F add_sp_n\n        // using the stack pointer bits means we can safely assume the value is signed\n        var signedValueOne = valueOne;\n        var result = signedValueOne + valueTwo;\n        var flagXor = signedValueOne ^ valueTwo ^ result;\n        setHalfCarryFlag(((flagXor & 0x10) !== 0));\n        setCarryFlag(((flagXor & 0x100) !== 0));\n    }\n    else {\n        // Logic from: https://github.com/djhworld/gomeboycolor/blob/master/src/cpu/index.go\n        // CTRL+F addWords\n        // Value two is not signed\n        var result = u16Portable(valueOne + valueTwo);\n        // Check the carry flag by allowing the overflow\n        setCarryFlag((result < valueOne));\n        // To check for half carry flag (bit 15), by XOR'ing valyes, and and'ing the bit in question\n        var halfCarryXor = valueOne ^ valueTwo ^ result;\n        var halfCarryAnd = u16Portable(halfCarryXor & 0x1000);\n        setHalfCarryFlag((halfCarryAnd !== 0x00));\n    }\n}\n\n// File for all of the colors for different GB Palletes\n// https://i.imgur.com/HupBY.png\n// https://www.libretro.com/index.php/gambatte-progress-report/\n// https://tcrf.net/Notes:Game_Boy_Color_Bootstrap_ROM\n// Our default wasmboy gb colors\nvar WasmBoyGBColors = /** @class */ (function () {\n    function WasmBoyGBColors() {\n    }\n    //Bg\n    WasmBoyGBColors.bgWhite = 0xf2f2f2;\n    WasmBoyGBColors.bgLightGrey = 0xa0a0a0;\n    WasmBoyGBColors.bgDarkGrey = 0x585858;\n    WasmBoyGBColors.bgBlack = 0x080808;\n    // Obj 0\n    WasmBoyGBColors.obj0White = 0xf2f2f2;\n    WasmBoyGBColors.obj0LightGrey = 0xa0a0a0;\n    WasmBoyGBColors.obj0DarkGrey = 0x585858;\n    WasmBoyGBColors.obj0Black = 0x080808;\n    // Obj1\n    WasmBoyGBColors.obj1White = 0xf2f2f2;\n    WasmBoyGBColors.obj1LightGrey = 0xa0a0a0;\n    WasmBoyGBColors.obj1DarkGrey = 0x585858;\n    WasmBoyGBColors.obj1Black = 0x080808;\n    return WasmBoyGBColors;\n}());\n// Action Button: Right\nvar GreenColors = /** @class */ (function () {\n    function GreenColors() {\n    }\n    //Bg\n    GreenColors.bgWhite = 0xffffff;\n    GreenColors.bgLightGrey = 0x52ff00;\n    GreenColors.bgDarkGrey = 0xff4200;\n    GreenColors.bgBlack = 0x000000;\n    // Obj 0\n    GreenColors.obj0White = 0xffffff;\n    GreenColors.obj0LightGrey = 0x52ff00;\n    GreenColors.obj0DarkGrey = 0xff4200;\n    GreenColors.obj0Black = 0x000000;\n    // Obj1\n    GreenColors.obj1White = 0xffffff;\n    GreenColors.obj1LightGrey = 0x52ff00;\n    GreenColors.obj1DarkGrey = 0xff4200;\n    GreenColors.obj1Black = 0x000000;\n    return GreenColors;\n}());\n// Action Button: A + Down\nvar OrangeColors = /** @class */ (function () {\n    function OrangeColors() {\n    }\n    //Bg\n    OrangeColors.bgWhite = 0xffffff;\n    OrangeColors.bgLightGrey = 0xffff00;\n    OrangeColors.bgDarkGrey = 0xff0000;\n    OrangeColors.bgBlack = 0x000000;\n    // Obj 0\n    OrangeColors.obj0White = 0xffffff;\n    OrangeColors.obj0LightGrey = 0xffff00;\n    OrangeColors.obj0DarkGrey = 0xff0000;\n    OrangeColors.obj0Black = 0x000000;\n    // Obj1\n    OrangeColors.obj1White = 0xffffff;\n    OrangeColors.obj1LightGrey = 0xffff00;\n    OrangeColors.obj1DarkGrey = 0xff0000;\n    OrangeColors.obj1Black = 0x000000;\n    return OrangeColors;\n}());\n// Action Button: Up\nvar BrownColors = /** @class */ (function () {\n    function BrownColors() {\n    }\n    //Bg\n    BrownColors.bgWhite = 0xffffff;\n    BrownColors.bgLightGrey = 0xffad63;\n    BrownColors.bgDarkGrey = 0x843100;\n    BrownColors.bgBlack = 0x000000;\n    // Obj 0\n    BrownColors.obj0White = 0xffffff;\n    BrownColors.obj0LightGrey = 0xffad63;\n    BrownColors.obj0DarkGrey = 0x843100;\n    BrownColors.obj0Black = 0x000000;\n    // Obj1\n    BrownColors.obj1White = 0xffffff;\n    BrownColors.obj1LightGrey = 0xffad63;\n    BrownColors.obj1DarkGrey = 0x843100;\n    BrownColors.obj1Black = 0x000000;\n    return BrownColors;\n}());\n// Action Button: B + Right\nvar InvertedColors = /** @class */ (function () {\n    function InvertedColors() {\n    }\n    //Bg\n    InvertedColors.bgWhite = 0x000000;\n    InvertedColors.bgLightGrey = 0x008484;\n    InvertedColors.bgDarkGrey = 0xffde00;\n    InvertedColors.bgBlack = 0xffffff;\n    // Obj 0\n    InvertedColors.obj0White = 0x000000;\n    InvertedColors.obj0LightGrey = 0x008484;\n    InvertedColors.obj0DarkGrey = 0xffde00;\n    InvertedColors.obj0Black = 0xffffff;\n    // Obj1\n    InvertedColors.obj1White = 0x000000;\n    InvertedColors.obj1LightGrey = 0x008484;\n    InvertedColors.obj1DarkGrey = 0xffde00;\n    InvertedColors.obj1Black = 0xffffff;\n    return InvertedColors;\n}());\n// Action Button: B + Left\nvar GrayscaleColors = /** @class */ (function () {\n    function GrayscaleColors() {\n    }\n    //Bg\n    GrayscaleColors.bgWhite = 0xffffff;\n    GrayscaleColors.bgLightGrey = 0xa5a5a5;\n    GrayscaleColors.bgDarkGrey = 0x525252;\n    GrayscaleColors.bgBlack = 0x000000;\n    // Obj 0\n    GrayscaleColors.obj0White = 0xffffff;\n    GrayscaleColors.obj0LightGrey = 0xa5a5a5;\n    GrayscaleColors.obj0DarkGrey = 0x525252;\n    GrayscaleColors.obj0Black = 0x000000;\n    // Obj1\n    GrayscaleColors.obj1White = 0xffffff;\n    GrayscaleColors.obj1LightGrey = 0xa5a5a5;\n    GrayscaleColors.obj1DarkGrey = 0x525252;\n    GrayscaleColors.obj1Black = 0x000000;\n    return GrayscaleColors;\n}());\n// Action Button: Down\nvar PastelMixColors = /** @class */ (function () {\n    function PastelMixColors() {\n    }\n    //Bg\n    PastelMixColors.bgWhite = 0xffffa5;\n    PastelMixColors.bgLightGrey = 0xff9494;\n    PastelMixColors.bgDarkGrey = 0x9494ff;\n    PastelMixColors.bgBlack = 0x000000;\n    // Obj 0\n    PastelMixColors.obj0White = 0xffffa5;\n    PastelMixColors.obj0LightGrey = 0xff9494;\n    PastelMixColors.obj0DarkGrey = 0x9494ff;\n    PastelMixColors.obj0Black = 0x000000;\n    // Obj1\n    PastelMixColors.obj1White = 0xffffa5;\n    PastelMixColors.obj1LightGrey = 0xff9494;\n    PastelMixColors.obj1DarkGrey = 0x9494ff;\n    PastelMixColors.obj1Black = 0x000000;\n    return PastelMixColors;\n}());\n// Action Button: B + Up\nvar DarkBrownColors = /** @class */ (function () {\n    function DarkBrownColors() {\n    }\n    //Bg\n    DarkBrownColors.bgWhite = 0xffe6c5;\n    DarkBrownColors.bgLightGrey = 0xce9c84;\n    DarkBrownColors.bgDarkGrey = 0x846b29;\n    DarkBrownColors.bgBlack = 0x5a3108;\n    // Obj 0\n    DarkBrownColors.obj0White = 0xffffff;\n    DarkBrownColors.obj0LightGrey = 0xffad63;\n    DarkBrownColors.obj0DarkGrey = 0x843100;\n    DarkBrownColors.obj0Black = 0x000000;\n    // Obj1\n    DarkBrownColors.obj1White = 0xffffff;\n    DarkBrownColors.obj1LightGrey = 0xffad63;\n    DarkBrownColors.obj1DarkGrey = 0x843100;\n    DarkBrownColors.obj1Black = 0x000000;\n    return DarkBrownColors;\n}());\n// Action Button: A + Right\nvar DarkGreenColors = /** @class */ (function () {\n    function DarkGreenColors() {\n    }\n    //Bg\n    DarkGreenColors.bgWhite = 0xffffff;\n    DarkGreenColors.bgLightGrey = 0x7bff31;\n    DarkGreenColors.bgDarkGrey = 0x0063c5;\n    DarkGreenColors.bgBlack = 0x000000;\n    // Obj 0\n    DarkGreenColors.obj0White = 0xffffff;\n    DarkGreenColors.obj0LightGrey = 0xff8484;\n    DarkGreenColors.obj0DarkGrey = 0x943a3a;\n    DarkGreenColors.obj0Black = 0x000000;\n    // Obj1\n    DarkGreenColors.obj1White = 0xffffff;\n    DarkGreenColors.obj1LightGrey = 0xff8484;\n    DarkGreenColors.obj1DarkGrey = 0x943a3a;\n    DarkGreenColors.obj1Black = 0x000000;\n    return DarkGreenColors;\n}());\n// Action Button: A + Left\nvar DarkBlueColors = /** @class */ (function () {\n    function DarkBlueColors() {\n    }\n    //Bg\n    DarkBlueColors.bgWhite = 0xffffff;\n    DarkBlueColors.bgLightGrey = 0x8c8cde;\n    DarkBlueColors.bgDarkGrey = 0x52528c;\n    DarkBlueColors.bgBlack = 0x000000;\n    // Obj 0\n    DarkBlueColors.obj0White = 0xffffff;\n    DarkBlueColors.obj0LightGrey = 0xff8484;\n    DarkBlueColors.obj0DarkGrey = 0x943a3a;\n    DarkBlueColors.obj0Black = 0x000000;\n    // Obj1\n    DarkBlueColors.obj1White = 0xffffff;\n    DarkBlueColors.obj1LightGrey = 0xffad63;\n    DarkBlueColors.obj1DarkGrey = 0x843100;\n    DarkBlueColors.obj1Black = 0x000000;\n    return DarkBlueColors;\n}());\n// Action Button: A + Up\nvar RedColors = /** @class */ (function () {\n    function RedColors() {\n    }\n    //Bg\n    RedColors.bgWhite = 0xffffff;\n    RedColors.bgLightGrey = 0xff8484;\n    RedColors.bgDarkGrey = 0x943a3a;\n    RedColors.bgBlack = 0x000000;\n    // Obj 0\n    RedColors.obj0White = 0xffffff;\n    RedColors.obj0LightGrey = 0x7bff31;\n    RedColors.obj0DarkGrey = 0x008400;\n    RedColors.obj0Black = 0x000000;\n    // Obj1\n    RedColors.obj1White = 0xffffff;\n    RedColors.obj1LightGrey = 0x63a5ff;\n    RedColors.obj1DarkGrey = 0x0000ff;\n    RedColors.obj1Black = 0x000000;\n    return RedColors;\n}());\n// Action Button: Left\nvar BlueColors = /** @class */ (function () {\n    function BlueColors() {\n    }\n    //Bg\n    BlueColors.bgWhite = 0xffffff;\n    BlueColors.bgLightGrey = 0x63a5ff;\n    BlueColors.bgDarkGrey = 0x0000ff;\n    BlueColors.bgBlack = 0x000000;\n    // Obj 0\n    BlueColors.obj0White = 0xffffff;\n    BlueColors.obj0LightGrey = 0xff8484;\n    BlueColors.obj0DarkGrey = 0x943a3a;\n    BlueColors.obj0Black = 0x000000;\n    // Obj1\n    BlueColors.obj1White = 0xffffff;\n    BlueColors.obj1LightGrey = 0x7bff31;\n    BlueColors.obj1DarkGrey = 0x008400;\n    BlueColors.obj1Black = 0x000000;\n    return BlueColors;\n}());\n// Action Button: B + Down\nvar YellowColors = /** @class */ (function () {\n    function YellowColors() {\n    }\n    //Bg\n    YellowColors.bgWhite = 0xffffff;\n    YellowColors.bgLightGrey = 0xffff00;\n    YellowColors.bgDarkGrey = 0x7b4a00;\n    YellowColors.bgBlack = 0x000000;\n    // Obj 0\n    YellowColors.obj0White = 0xffffff;\n    YellowColors.obj0LightGrey = 0x63a5ff;\n    YellowColors.obj0DarkGrey = 0x0000ff;\n    YellowColors.obj0Black = 0x000000;\n    // Obj1\n    YellowColors.obj1White = 0xffffff;\n    YellowColors.obj1LightGrey = 0x7bff31;\n    YellowColors.obj1DarkGrey = 0x008400;\n    YellowColors.obj1Black = 0x000000;\n    return YellowColors;\n}());\n// Assigned Color Palettes\n// Alleyway\nvar Table00Entry08Colors = /** @class */ (function () {\n    function Table00Entry08Colors() {\n    }\n    //Bg\n    Table00Entry08Colors.bgWhite = 0xa59cff;\n    Table00Entry08Colors.bgLightGrey = 0xffff00;\n    Table00Entry08Colors.bgDarkGrey = 0x006300;\n    Table00Entry08Colors.bgBlack = 0x000000;\n    // Obj 0\n    Table00Entry08Colors.obj0White = 0xa59cff;\n    Table00Entry08Colors.obj0LightGrey = 0xffff00;\n    Table00Entry08Colors.obj0DarkGrey = 0x006300;\n    Table00Entry08Colors.obj0Black = 0x000000;\n    // Obj1\n    Table00Entry08Colors.obj1White = 0xa59cff;\n    Table00Entry08Colors.obj1LightGrey = 0xffff00;\n    Table00Entry08Colors.obj1DarkGrey = 0x006300;\n    Table00Entry08Colors.obj1Black = 0x000000;\n    return Table00Entry08Colors;\n}());\n// Pokemon Blue\nvar Table01Entry0BColors = /** @class */ (function () {\n    function Table01Entry0BColors() {\n    }\n    //Bg\n    Table01Entry0BColors.bgWhite = 0xffffff;\n    Table01Entry0BColors.bgLightGrey = 0x63a5ff;\n    Table01Entry0BColors.bgDarkGrey = 0x0000ff;\n    Table01Entry0BColors.bgBlack = 0x000000;\n    // Obj 0\n    Table01Entry0BColors.obj0White = 0xffffff;\n    Table01Entry0BColors.obj0LightGrey = 0xff8484;\n    Table01Entry0BColors.obj0DarkGrey = 0x943a3a;\n    Table01Entry0BColors.obj0Black = 0x000000;\n    // Obj1\n    Table01Entry0BColors.obj1White = 0xffffff;\n    Table01Entry0BColors.obj1LightGrey = 0x63a5ff;\n    Table01Entry0BColors.obj1DarkGrey = 0x0000ff;\n    Table01Entry0BColors.obj1Black = 0x000000;\n    return Table01Entry0BColors;\n}());\n// Pokemon Red\nvar Table01Entry10Colors = /** @class */ (function () {\n    function Table01Entry10Colors() {\n    }\n    //Bg\n    Table01Entry10Colors.bgWhite = 0xffffff;\n    Table01Entry10Colors.bgLightGrey = 0xff8484;\n    Table01Entry10Colors.bgDarkGrey = 0x943a3a;\n    Table01Entry10Colors.bgBlack = 0x000000;\n    // Obj 0\n    Table01Entry10Colors.obj0White = 0xffffff;\n    Table01Entry10Colors.obj0LightGrey = 0x7bff31;\n    Table01Entry10Colors.obj0DarkGrey = 0x008400;\n    Table01Entry10Colors.obj0Black = 0x000000;\n    // Obj1\n    Table01Entry10Colors.obj1White = 0xffffff;\n    Table01Entry10Colors.obj1LightGrey = 0xff8484;\n    Table01Entry10Colors.obj1DarkGrey = 0x943a3a;\n    Table01Entry10Colors.obj1Black = 0x000000;\n    return Table01Entry10Colors;\n}());\n// Super Mario Land\nvar Table03Entry0AColors = /** @class */ (function () {\n    function Table03Entry0AColors() {\n    }\n    //Bg\n    Table03Entry0AColors.bgWhite = 0xb5b5ff;\n    Table03Entry0AColors.bgLightGrey = 0xffff94;\n    Table03Entry0AColors.bgDarkGrey = 0xad5a42;\n    Table03Entry0AColors.bgBlack = 0x000000;\n    // Obj 0\n    Table03Entry0AColors.obj0White = 0x000000;\n    Table03Entry0AColors.obj0LightGrey = 0xffffff;\n    Table03Entry0AColors.obj0DarkGrey = 0xff8484;\n    Table03Entry0AColors.obj0Black = 0x943a3a;\n    // Obj1\n    Table03Entry0AColors.obj1White = 0x000000;\n    Table03Entry0AColors.obj1LightGrey = 0xffffff;\n    Table03Entry0AColors.obj1DarkGrey = 0xff8484;\n    Table03Entry0AColors.obj1Black = 0x943a3a;\n    return Table03Entry0AColors;\n}());\n// Super Mario Land 3 - WarioLand\nvar Table05Entry00Colors = /** @class */ (function () {\n    function Table05Entry00Colors() {\n    }\n    //Bg\n    Table05Entry00Colors.bgWhite = 0xffffff;\n    Table05Entry00Colors.bgLightGrey = 0xadad84;\n    Table05Entry00Colors.bgDarkGrey = 0x42737b;\n    Table05Entry00Colors.bgBlack = 0x000000;\n    // Obj 0\n    Table05Entry00Colors.obj0White = 0xffffff;\n    Table05Entry00Colors.obj0LightGrey = 0xff7300;\n    Table05Entry00Colors.obj0DarkGrey = 0x944200;\n    Table05Entry00Colors.obj0Black = 0x000000;\n    // Obj1\n    Table05Entry00Colors.obj1White = 0xffffff;\n    Table05Entry00Colors.obj1LightGrey = 0x5abdff;\n    Table05Entry00Colors.obj1DarkGrey = 0xff0000;\n    Table05Entry00Colors.obj1Black = 0x0000ff;\n    return Table05Entry00Colors;\n}());\n// Donkey Kong\nvar Table05Entry01Colors = /** @class */ (function () {\n    function Table05Entry01Colors() {\n    }\n    //Bg\n    Table05Entry01Colors.bgWhite = 0xffff9c;\n    Table05Entry01Colors.bgLightGrey = 0x94b5ff;\n    Table05Entry01Colors.bgDarkGrey = 0x639473;\n    Table05Entry01Colors.bgBlack = 0x003a3a;\n    // Obj 0\n    Table05Entry01Colors.obj0White = 0xffc542;\n    Table05Entry01Colors.obj0LightGrey = 0xffd600;\n    Table05Entry01Colors.obj0DarkGrey = 0x943a00;\n    Table05Entry01Colors.obj0Black = 0x4a0000;\n    // Obj1\n    Table05Entry01Colors.obj1White = 0xffffff;\n    Table05Entry01Colors.obj1LightGrey = 0xff8484;\n    Table05Entry01Colors.obj1DarkGrey = 0x943a3a;\n    Table05Entry01Colors.obj1Black = 0x000000;\n    return Table05Entry01Colors;\n}());\n// Tennis\nvar Table05Entry02Colors = /** @class */ (function () {\n    function Table05Entry02Colors() {\n    }\n    //Bg\n    Table05Entry02Colors.bgWhite = 0x6bff00;\n    Table05Entry02Colors.bgLightGrey = 0xffffff;\n    Table05Entry02Colors.bgDarkGrey = 0xff524a;\n    Table05Entry02Colors.bgBlack = 0x000000;\n    // Obj 0\n    Table05Entry02Colors.obj0White = 0xffffff;\n    Table05Entry02Colors.obj0LightGrey = 0xffffff;\n    Table05Entry02Colors.obj0DarkGrey = 0x63a5ff;\n    Table05Entry02Colors.obj0Black = 0x0000ff;\n    // Obj1\n    Table05Entry02Colors.obj1White = 0xffffff;\n    Table05Entry02Colors.obj1LightGrey = 0xffad63;\n    Table05Entry02Colors.obj1DarkGrey = 0x843100;\n    Table05Entry02Colors.obj1Black = 0x000000;\n    return Table05Entry02Colors;\n}());\n// Kirby's Dream Land\nvar Table05Entry08Colors = /** @class */ (function () {\n    function Table05Entry08Colors() {\n    }\n    //Bg\n    Table05Entry08Colors.bgWhite = 0xa59cff;\n    Table05Entry08Colors.bgLightGrey = 0xffff00;\n    Table05Entry08Colors.bgDarkGrey = 0x006300;\n    Table05Entry08Colors.bgBlack = 0x000000;\n    // Obj 0\n    Table05Entry08Colors.obj0White = 0xff6352;\n    Table05Entry08Colors.obj0LightGrey = 0xd60000;\n    Table05Entry08Colors.obj0DarkGrey = 0x630000;\n    Table05Entry08Colors.obj0Black = 0x000000;\n    // Obj1\n    Table05Entry08Colors.obj1White = 0x0000ff;\n    Table05Entry08Colors.obj1LightGrey = 0xffffff;\n    Table05Entry08Colors.obj1DarkGrey = 0xffff7b;\n    Table05Entry08Colors.obj1Black = 0x0084ff;\n    return Table05Entry08Colors;\n}());\n// Super Mario Land 2 BAYYYBEEE\nvar Table05Entry09Colors = /** @class */ (function () {\n    function Table05Entry09Colors() {\n    }\n    //Bg\n    Table05Entry09Colors.bgWhite = 0xffffce;\n    Table05Entry09Colors.bgLightGrey = 0x63efef;\n    Table05Entry09Colors.bgDarkGrey = 0x9c8431;\n    Table05Entry09Colors.bgBlack = 0x5a5a5a;\n    // Obj 0\n    Table05Entry09Colors.obj0White = 0xffffff;\n    Table05Entry09Colors.obj0LightGrey = 0xff7300;\n    Table05Entry09Colors.obj0DarkGrey = 0x944200;\n    Table05Entry09Colors.obj0Black = 0x000000;\n    // Obj1\n    Table05Entry09Colors.obj1White = 0xffffff;\n    Table05Entry09Colors.obj1LightGrey = 0x63a5ff;\n    Table05Entry09Colors.obj1DarkGrey = 0x0000ff;\n    Table05Entry09Colors.obj1Black = 0x000000;\n    return Table05Entry09Colors;\n}());\n// Link's Awakening\nvar Table05Entry11Colors = /** @class */ (function () {\n    function Table05Entry11Colors() {\n    }\n    // Bg\n    Table05Entry11Colors.bgWhite = 0xffffff;\n    Table05Entry11Colors.bgLightGrey = 0xff8484;\n    Table05Entry11Colors.bgDarkGrey = 0x943a3a;\n    Table05Entry11Colors.bgBlack = 0x000000;\n    // Obj 0\n    Table05Entry11Colors.obj0White = 0xffffff;\n    Table05Entry11Colors.obj0LightGrey = 0x00ff00;\n    Table05Entry11Colors.obj0DarkGrey = 0x318400;\n    Table05Entry11Colors.obj0Black = 0x004a00;\n    // Obj1\n    Table05Entry11Colors.obj1White = 0xffffff;\n    Table05Entry11Colors.obj1LightGrey = 0x63a5ff;\n    Table05Entry11Colors.obj1DarkGrey = 0x0000ff;\n    Table05Entry11Colors.obj1Black = 0x000000;\n    return Table05Entry11Colors;\n}());\n// Metroid 2\nvar Table05Entry14Colors = /** @class */ (function () {\n    function Table05Entry14Colors() {\n    }\n    //Bg\n    Table05Entry14Colors.bgWhite = 0xffffff;\n    Table05Entry14Colors.bgLightGrey = 0x63a5ff;\n    Table05Entry14Colors.bgDarkGrey = 0x0000ff;\n    Table05Entry14Colors.bgBlack = 0x000000;\n    // Obj 0\n    Table05Entry14Colors.obj0White = 0xffff00;\n    Table05Entry14Colors.obj0LightGrey = 0xff0000;\n    Table05Entry14Colors.obj0DarkGrey = 0x630000;\n    Table05Entry14Colors.obj0Black = 0x000000;\n    // Obj1\n    Table05Entry14Colors.obj1White = 0xffffff;\n    Table05Entry14Colors.obj1LightGrey = 0x7bff31;\n    Table05Entry14Colors.obj1DarkGrey = 0x008400;\n    Table05Entry14Colors.obj1Black = 0x000000;\n    return Table05Entry14Colors;\n}());\n// WarioLand 2\nvar Table05Entry15Colors = /** @class */ (function () {\n    function Table05Entry15Colors() {\n    }\n    //Bg\n    Table05Entry15Colors.bgWhite = 0xffffff;\n    Table05Entry15Colors.bgLightGrey = 0xadad84;\n    Table05Entry15Colors.bgDarkGrey = 0x42737b;\n    Table05Entry15Colors.bgBlack = 0x000000;\n    // Obj 0\n    Table05Entry15Colors.obj0White = 0xffffff;\n    Table05Entry15Colors.obj0LightGrey = 0xffad63;\n    Table05Entry15Colors.obj0DarkGrey = 0xffad63;\n    Table05Entry15Colors.obj0Black = 0x000000;\n    // Obj1\n    Table05Entry15Colors.obj1White = 0xffffff;\n    Table05Entry15Colors.obj1LightGrey = 0x63a5ff;\n    Table05Entry15Colors.obj1DarkGrey = 0x0000ff;\n    Table05Entry15Colors.obj1Black = 0x000000;\n    return Table05Entry15Colors;\n}());\n\n// File for all of the logic of setting gameboy color plaettes\n// Current / exported color\nvar Colors = /** @class */ (function () {\n    function Colors() {\n    }\n    //Bg\n    Colors.bgWhite = WasmBoyGBColors.bgWhite;\n    Colors.bgLightGrey = WasmBoyGBColors.bgLightGrey;\n    Colors.bgDarkGrey = WasmBoyGBColors.bgDarkGrey;\n    Colors.bgBlack = WasmBoyGBColors.bgBlack;\n    // Obj 0\n    Colors.obj0White = WasmBoyGBColors.obj0White;\n    Colors.obj0LightGrey = WasmBoyGBColors.obj0LightGrey;\n    Colors.obj0DarkGrey = WasmBoyGBColors.obj0DarkGrey;\n    Colors.obj0Black = WasmBoyGBColors.obj0Black;\n    // Obj1\n    Colors.obj1White = WasmBoyGBColors.obj1White;\n    Colors.obj1LightGrey = WasmBoyGBColors.obj1LightGrey;\n    Colors.obj1DarkGrey = WasmBoyGBColors.obj1DarkGrey;\n    Colors.obj1Black = WasmBoyGBColors.obj1Black;\n    return Colors;\n}());\n// Inlined because closure compiler inlines\nfunction initializeColors() {\n    setManualColorizationPalette(0);\n    // Do some automatic color palette swapping if we have a loaded ROM\n    var titleChecksum = 0x00;\n    for (var i = 0x0134; i <= 0x0143; i++) {\n        titleChecksum += eightBitLoadFromGBMemory(i);\n    }\n    // Set the colorization for the game automatically if assigned\n    // https://tcrf.net/Notes:Game_Boy_Color_Bootstrap_ROM\n    var hash = titleChecksum & 0xff;\n    setHashColorizationPalette(hash);\n}\nfunction getRedFromHexColor(color) {\n    return (color & 0xff0000) >> 16;\n}\nfunction getGreenFromHexColor(color) {\n    return (color & 0x00ff00) >> 8;\n}\nfunction getBlueFromHexColor(color) {\n    return color & 0x0000ff;\n}\n// Function to set the colorization\n// By manually pressing buttons\nfunction setManualColorizationPalette(colorizationId) {\n    // Set the colorizationId clockwise according to:\n    // https://en.wikipedia.org/wiki/Game_Boy_Color\n    switch (colorizationId) {\n        case 0:\n            Colors.bgWhite = WasmBoyGBColors.bgWhite;\n            Colors.bgLightGrey = WasmBoyGBColors.bgLightGrey;\n            Colors.bgDarkGrey = WasmBoyGBColors.bgDarkGrey;\n            Colors.bgBlack = WasmBoyGBColors.bgBlack;\n            Colors.obj0White = WasmBoyGBColors.obj0White;\n            Colors.obj0LightGrey = WasmBoyGBColors.obj0LightGrey;\n            Colors.obj0DarkGrey = WasmBoyGBColors.obj0DarkGrey;\n            Colors.obj0Black = WasmBoyGBColors.obj0Black;\n            Colors.obj1White = WasmBoyGBColors.obj1White;\n            Colors.obj1LightGrey = WasmBoyGBColors.obj1LightGrey;\n            Colors.obj1DarkGrey = WasmBoyGBColors.obj1DarkGrey;\n            Colors.obj1Black = WasmBoyGBColors.obj1Black;\n            break;\n        case 1:\n            // Up, Brown\n            Colors.bgWhite = BrownColors.bgWhite;\n            Colors.bgLightGrey = BrownColors.bgLightGrey;\n            Colors.bgDarkGrey = BrownColors.bgDarkGrey;\n            Colors.bgBlack = BrownColors.bgBlack;\n            Colors.obj0White = BrownColors.obj0White;\n            Colors.obj0LightGrey = BrownColors.obj0LightGrey;\n            Colors.obj0DarkGrey = BrownColors.obj0DarkGrey;\n            Colors.obj0Black = BrownColors.obj0Black;\n            Colors.obj1White = BrownColors.obj1White;\n            Colors.obj1LightGrey = BrownColors.obj1LightGrey;\n            Colors.obj1DarkGrey = BrownColors.obj1DarkGrey;\n            Colors.obj1Black = BrownColors.obj1Black;\n            break;\n        case 2:\n            // Up + A, Red\n            Colors.bgWhite = RedColors.bgWhite;\n            Colors.bgLightGrey = RedColors.bgLightGrey;\n            Colors.bgDarkGrey = RedColors.bgDarkGrey;\n            Colors.bgBlack = RedColors.bgBlack;\n            Colors.obj0White = RedColors.obj0White;\n            Colors.obj0LightGrey = RedColors.obj0LightGrey;\n            Colors.obj0DarkGrey = RedColors.obj0DarkGrey;\n            Colors.obj0Black = RedColors.obj0Black;\n            Colors.obj1White = RedColors.obj1White;\n            Colors.obj1LightGrey = RedColors.obj1LightGrey;\n            Colors.obj1DarkGrey = RedColors.obj1DarkGrey;\n            Colors.obj1Black = RedColors.obj1Black;\n            break;\n        case 3:\n            // Up + B, DarkBrown\n            Colors.bgWhite = DarkBrownColors.bgWhite;\n            Colors.bgLightGrey = DarkBrownColors.bgLightGrey;\n            Colors.bgDarkGrey = DarkBrownColors.bgDarkGrey;\n            Colors.bgBlack = DarkBrownColors.bgBlack;\n            Colors.obj0White = DarkBrownColors.obj0White;\n            Colors.obj0LightGrey = DarkBrownColors.obj0LightGrey;\n            Colors.obj0DarkGrey = DarkBrownColors.obj0DarkGrey;\n            Colors.obj0Black = DarkBrownColors.obj0Black;\n            Colors.obj1White = DarkBrownColors.obj1White;\n            Colors.obj1LightGrey = DarkBrownColors.obj1LightGrey;\n            Colors.obj1DarkGrey = DarkBrownColors.obj1DarkGrey;\n            Colors.obj1Black = DarkBrownColors.obj1Black;\n            break;\n        case 4:\n            // Right, Green\n            Colors.bgWhite = GreenColors.bgWhite;\n            Colors.bgLightGrey = GreenColors.bgLightGrey;\n            Colors.bgDarkGrey = GreenColors.bgDarkGrey;\n            Colors.bgBlack = GreenColors.bgBlack;\n            Colors.obj0White = GreenColors.obj0White;\n            Colors.obj0LightGrey = GreenColors.obj0LightGrey;\n            Colors.obj0DarkGrey = GreenColors.obj0DarkGrey;\n            Colors.obj0Black = GreenColors.obj0Black;\n            Colors.obj1White = GreenColors.obj1White;\n            Colors.obj1LightGrey = GreenColors.obj1LightGrey;\n            Colors.obj1DarkGrey = GreenColors.obj1DarkGrey;\n            Colors.obj1Black = GreenColors.obj1Black;\n            break;\n        case 5:\n            // Right + A, DarkGreenColors\n            Colors.bgWhite = DarkGreenColors.bgWhite;\n            Colors.bgLightGrey = DarkGreenColors.bgLightGrey;\n            Colors.bgDarkGrey = DarkGreenColors.bgDarkGrey;\n            Colors.bgBlack = DarkGreenColors.bgBlack;\n            Colors.obj0White = DarkGreenColors.obj0White;\n            Colors.obj0LightGrey = DarkGreenColors.obj0LightGrey;\n            Colors.obj0DarkGrey = DarkGreenColors.obj0DarkGrey;\n            Colors.obj0Black = DarkGreenColors.obj0Black;\n            Colors.obj1White = DarkGreenColors.obj1White;\n            Colors.obj1LightGrey = DarkGreenColors.obj1LightGrey;\n            Colors.obj1DarkGrey = DarkGreenColors.obj1DarkGrey;\n            Colors.obj1Black = DarkGreenColors.obj1Black;\n            break;\n        case 6:\n            // Right + B, InvertedColors\n            Colors.bgWhite = InvertedColors.bgWhite;\n            Colors.bgLightGrey = InvertedColors.bgLightGrey;\n            Colors.bgDarkGrey = InvertedColors.bgDarkGrey;\n            Colors.bgBlack = InvertedColors.bgBlack;\n            Colors.obj0White = InvertedColors.obj0White;\n            Colors.obj0LightGrey = InvertedColors.obj0LightGrey;\n            Colors.obj0DarkGrey = InvertedColors.obj0DarkGrey;\n            Colors.obj0Black = InvertedColors.obj0Black;\n            Colors.obj1White = InvertedColors.obj1White;\n            Colors.obj1LightGrey = InvertedColors.obj1LightGrey;\n            Colors.obj1DarkGrey = InvertedColors.obj1DarkGrey;\n            Colors.obj1Black = InvertedColors.obj1Black;\n            break;\n        case 7:\n            // Down, PastelMixColors\n            Colors.bgWhite = PastelMixColors.bgWhite;\n            Colors.bgLightGrey = PastelMixColors.bgLightGrey;\n            Colors.bgDarkGrey = PastelMixColors.bgDarkGrey;\n            Colors.bgBlack = PastelMixColors.bgBlack;\n            Colors.obj0White = PastelMixColors.obj0White;\n            Colors.obj0LightGrey = PastelMixColors.obj0LightGrey;\n            Colors.obj0DarkGrey = PastelMixColors.obj0DarkGrey;\n            Colors.obj0Black = PastelMixColors.obj0Black;\n            Colors.obj1White = PastelMixColors.obj1White;\n            Colors.obj1LightGrey = PastelMixColors.obj1LightGrey;\n            Colors.obj1DarkGrey = PastelMixColors.obj1DarkGrey;\n            Colors.obj1Black = PastelMixColors.obj1Black;\n            break;\n        case 8:\n            // Down + A, Orange\n            Colors.bgWhite = OrangeColors.bgWhite;\n            Colors.bgLightGrey = OrangeColors.bgLightGrey;\n            Colors.bgDarkGrey = OrangeColors.bgDarkGrey;\n            Colors.bgBlack = OrangeColors.bgBlack;\n            Colors.obj0White = OrangeColors.obj0White;\n            Colors.obj0LightGrey = OrangeColors.obj0LightGrey;\n            Colors.obj0DarkGrey = OrangeColors.obj0DarkGrey;\n            Colors.obj0Black = OrangeColors.obj0Black;\n            Colors.obj1White = OrangeColors.obj1White;\n            Colors.obj1LightGrey = OrangeColors.obj1LightGrey;\n            Colors.obj1DarkGrey = OrangeColors.obj1DarkGrey;\n            Colors.obj1Black = OrangeColors.obj1Black;\n            break;\n        case 9:\n            // Down + B, Yellow\n            Colors.bgWhite = YellowColors.bgWhite;\n            Colors.bgLightGrey = YellowColors.bgLightGrey;\n            Colors.bgDarkGrey = YellowColors.bgDarkGrey;\n            Colors.bgBlack = YellowColors.bgBlack;\n            Colors.obj0White = YellowColors.obj0White;\n            Colors.obj0LightGrey = YellowColors.obj0LightGrey;\n            Colors.obj0DarkGrey = YellowColors.obj0DarkGrey;\n            Colors.obj0Black = YellowColors.obj0Black;\n            Colors.obj1White = YellowColors.obj1White;\n            Colors.obj1LightGrey = YellowColors.obj1LightGrey;\n            Colors.obj1DarkGrey = YellowColors.obj1DarkGrey;\n            Colors.obj1Black = YellowColors.obj1Black;\n            break;\n        case 10:\n            // Left, Blue\n            Colors.bgWhite = BlueColors.bgWhite;\n            Colors.bgLightGrey = BlueColors.bgLightGrey;\n            Colors.bgDarkGrey = BlueColors.bgDarkGrey;\n            Colors.bgBlack = BlueColors.bgBlack;\n            Colors.obj0White = BlueColors.obj0White;\n            Colors.obj0LightGrey = BlueColors.obj0LightGrey;\n            Colors.obj0DarkGrey = BlueColors.obj0DarkGrey;\n            Colors.obj0Black = BlueColors.obj0Black;\n            Colors.obj1White = BlueColors.obj1White;\n            Colors.obj1LightGrey = BlueColors.obj1LightGrey;\n            Colors.obj1DarkGrey = BlueColors.obj1DarkGrey;\n            Colors.obj1Black = BlueColors.obj1Black;\n            break;\n        case 11:\n            // Left + A, Dark Blue\n            Colors.bgWhite = DarkBlueColors.bgWhite;\n            Colors.bgLightGrey = DarkBlueColors.bgLightGrey;\n            Colors.bgDarkGrey = DarkBlueColors.bgDarkGrey;\n            Colors.bgBlack = DarkBlueColors.bgBlack;\n            Colors.obj0White = DarkBlueColors.obj0White;\n            Colors.obj0LightGrey = DarkBlueColors.obj0LightGrey;\n            Colors.obj0DarkGrey = DarkBlueColors.obj0DarkGrey;\n            Colors.obj0Black = DarkBlueColors.obj0Black;\n            Colors.obj1White = DarkBlueColors.obj1White;\n            Colors.obj1LightGrey = DarkBlueColors.obj1LightGrey;\n            Colors.obj1DarkGrey = DarkBlueColors.obj1DarkGrey;\n            Colors.obj1Black = DarkBlueColors.obj1Black;\n            break;\n        case 12:\n            // Left + B, GrayScale\n            Colors.bgWhite = GrayscaleColors.bgWhite;\n            Colors.bgLightGrey = GrayscaleColors.bgLightGrey;\n            Colors.bgDarkGrey = GrayscaleColors.bgDarkGrey;\n            Colors.bgBlack = GrayscaleColors.bgBlack;\n            Colors.obj0White = GrayscaleColors.obj0White;\n            Colors.obj0LightGrey = GrayscaleColors.obj0LightGrey;\n            Colors.obj0DarkGrey = GrayscaleColors.obj0DarkGrey;\n            Colors.obj0Black = GrayscaleColors.obj0Black;\n            Colors.obj1White = GrayscaleColors.obj1White;\n            Colors.obj1LightGrey = GrayscaleColors.obj1LightGrey;\n            Colors.obj1DarkGrey = GrayscaleColors.obj1DarkGrey;\n            Colors.obj1Black = GrayscaleColors.obj1Black;\n            break;\n    }\n}\n// Function to set the colorization\n// By checksum of the title\n// https://forums.nesdev.com/viewtopic.php?f=20&t=10226\n// TODO: torch2424 need to find how to get the \"disambiguation\"\n// Inlined because closure compiler inlines\nfunction setHashColorizationPalette(hash) {\n    switch (hash) {\n        case 0x88:\n            Colors.bgWhite = Table00Entry08Colors.bgWhite;\n            Colors.bgLightGrey = Table00Entry08Colors.bgLightGrey;\n            Colors.bgDarkGrey = Table00Entry08Colors.bgDarkGrey;\n            Colors.bgBlack = Table00Entry08Colors.bgBlack;\n            Colors.obj0White = Table00Entry08Colors.obj0White;\n            Colors.obj0LightGrey = Table00Entry08Colors.obj0LightGrey;\n            Colors.obj0DarkGrey = Table00Entry08Colors.obj0DarkGrey;\n            Colors.obj0Black = Table00Entry08Colors.obj0Black;\n            Colors.obj1White = Table00Entry08Colors.obj1White;\n            Colors.obj1LightGrey = Table00Entry08Colors.obj1LightGrey;\n            Colors.obj1DarkGrey = Table00Entry08Colors.obj1DarkGrey;\n            Colors.obj1Black = Table00Entry08Colors.obj1Black;\n            break;\n        case 0x61:\n            Colors.bgWhite = Table01Entry0BColors.bgWhite;\n            Colors.bgLightGrey = Table01Entry0BColors.bgLightGrey;\n            Colors.bgDarkGrey = Table01Entry0BColors.bgDarkGrey;\n            Colors.bgBlack = Table01Entry0BColors.bgBlack;\n            Colors.obj0White = Table01Entry0BColors.obj0White;\n            Colors.obj0LightGrey = Table01Entry0BColors.obj0LightGrey;\n            Colors.obj0DarkGrey = Table01Entry0BColors.obj0DarkGrey;\n            Colors.obj0Black = Table01Entry0BColors.obj0Black;\n            Colors.obj1White = Table01Entry0BColors.obj1White;\n            Colors.obj1LightGrey = Table01Entry0BColors.obj1LightGrey;\n            Colors.obj1DarkGrey = Table01Entry0BColors.obj1DarkGrey;\n            Colors.obj1Black = Table01Entry0BColors.obj1Black;\n            break;\n        case 0x14:\n            Colors.bgWhite = Table01Entry10Colors.bgWhite;\n            Colors.bgLightGrey = Table01Entry10Colors.bgLightGrey;\n            Colors.bgDarkGrey = Table01Entry10Colors.bgDarkGrey;\n            Colors.bgBlack = Table01Entry10Colors.bgBlack;\n            Colors.obj0White = Table01Entry10Colors.obj0White;\n            Colors.obj0LightGrey = Table01Entry10Colors.obj0LightGrey;\n            Colors.obj0DarkGrey = Table01Entry10Colors.obj0DarkGrey;\n            Colors.obj0Black = Table01Entry10Colors.obj0Black;\n            Colors.obj1White = Table01Entry10Colors.obj1White;\n            Colors.obj1LightGrey = Table01Entry10Colors.obj1LightGrey;\n            Colors.obj1DarkGrey = Table01Entry10Colors.obj1DarkGrey;\n            Colors.obj1Black = Table01Entry10Colors.obj1Black;\n            break;\n        case 0x46:\n            Colors.bgWhite = Table03Entry0AColors.bgWhite;\n            Colors.bgLightGrey = Table03Entry0AColors.bgLightGrey;\n            Colors.bgDarkGrey = Table03Entry0AColors.bgDarkGrey;\n            Colors.bgBlack = Table03Entry0AColors.bgBlack;\n            Colors.obj0White = Table03Entry0AColors.obj0White;\n            Colors.obj0LightGrey = Table03Entry0AColors.obj0LightGrey;\n            Colors.obj0DarkGrey = Table03Entry0AColors.obj0DarkGrey;\n            Colors.obj0Black = Table03Entry0AColors.obj0Black;\n            Colors.obj1White = Table03Entry0AColors.obj1White;\n            Colors.obj1LightGrey = Table03Entry0AColors.obj1LightGrey;\n            Colors.obj1DarkGrey = Table03Entry0AColors.obj1DarkGrey;\n            Colors.obj1Black = Table03Entry0AColors.obj1Black;\n            break;\n        case 0x59:\n        case 0xc6:\n            Colors.bgWhite = Table05Entry00Colors.bgWhite;\n            Colors.bgLightGrey = Table05Entry00Colors.bgLightGrey;\n            Colors.bgDarkGrey = Table05Entry00Colors.bgDarkGrey;\n            Colors.bgBlack = Table05Entry00Colors.bgBlack;\n            Colors.obj0White = Table05Entry00Colors.obj0White;\n            Colors.obj0LightGrey = Table05Entry00Colors.obj0LightGrey;\n            Colors.obj0DarkGrey = Table05Entry00Colors.obj0DarkGrey;\n            Colors.obj0Black = Table05Entry00Colors.obj0Black;\n            Colors.obj1White = Table05Entry00Colors.obj1White;\n            Colors.obj1LightGrey = Table05Entry00Colors.obj1LightGrey;\n            Colors.obj1DarkGrey = Table05Entry00Colors.obj1DarkGrey;\n            Colors.obj1Black = Table05Entry00Colors.obj1Black;\n            break;\n        case 0x86:\n        case 0xa8:\n            Colors.bgWhite = Table05Entry01Colors.bgWhite;\n            Colors.bgLightGrey = Table05Entry01Colors.bgLightGrey;\n            Colors.bgDarkGrey = Table05Entry01Colors.bgDarkGrey;\n            Colors.bgBlack = Table05Entry01Colors.bgBlack;\n            Colors.obj0White = Table05Entry01Colors.obj0White;\n            Colors.obj0LightGrey = Table05Entry01Colors.obj0LightGrey;\n            Colors.obj0DarkGrey = Table05Entry01Colors.obj0DarkGrey;\n            Colors.obj0Black = Table05Entry01Colors.obj0Black;\n            Colors.obj1White = Table05Entry01Colors.obj1White;\n            Colors.obj1LightGrey = Table05Entry01Colors.obj1LightGrey;\n            Colors.obj1DarkGrey = Table05Entry01Colors.obj1DarkGrey;\n            Colors.obj1Black = Table05Entry01Colors.obj1Black;\n            break;\n        case 0xbf:\n        case 0xce:\n        case 0xd1:\n        case 0xf0:\n            Colors.bgWhite = Table05Entry02Colors.bgWhite;\n            Colors.bgLightGrey = Table05Entry02Colors.bgLightGrey;\n            Colors.bgDarkGrey = Table05Entry02Colors.bgDarkGrey;\n            Colors.bgBlack = Table05Entry02Colors.bgBlack;\n            Colors.obj0White = Table05Entry02Colors.obj0White;\n            Colors.obj0LightGrey = Table05Entry02Colors.obj0LightGrey;\n            Colors.obj0DarkGrey = Table05Entry02Colors.obj0DarkGrey;\n            Colors.obj0Black = Table05Entry02Colors.obj0Black;\n            Colors.obj1White = Table05Entry02Colors.obj1White;\n            Colors.obj1LightGrey = Table05Entry02Colors.obj1LightGrey;\n            Colors.obj1DarkGrey = Table05Entry02Colors.obj1DarkGrey;\n            Colors.obj1Black = Table05Entry02Colors.obj1Black;\n            break;\n        case 0x27:\n        case 0x49:\n        case 0x5c:\n        case 0xb3:\n            Colors.bgWhite = Table05Entry08Colors.bgWhite;\n            Colors.bgLightGrey = Table05Entry08Colors.bgLightGrey;\n            Colors.bgDarkGrey = Table05Entry08Colors.bgDarkGrey;\n            Colors.bgBlack = Table05Entry08Colors.bgBlack;\n            Colors.obj0White = Table05Entry08Colors.obj0White;\n            Colors.obj0LightGrey = Table05Entry08Colors.obj0LightGrey;\n            Colors.obj0DarkGrey = Table05Entry08Colors.obj0DarkGrey;\n            Colors.obj0Black = Table05Entry08Colors.obj0Black;\n            Colors.obj1White = Table05Entry08Colors.obj1White;\n            Colors.obj1LightGrey = Table05Entry08Colors.obj1LightGrey;\n            Colors.obj1DarkGrey = Table05Entry08Colors.obj1DarkGrey;\n            Colors.obj1Black = Table05Entry08Colors.obj1Black;\n            break;\n        case 0xc9:\n            Colors.bgWhite = Table05Entry09Colors.bgWhite;\n            Colors.bgLightGrey = Table05Entry09Colors.bgLightGrey;\n            Colors.bgDarkGrey = Table05Entry09Colors.bgDarkGrey;\n            Colors.bgBlack = Table05Entry09Colors.bgBlack;\n            Colors.obj0White = Table05Entry09Colors.obj0White;\n            Colors.obj0LightGrey = Table05Entry09Colors.obj0LightGrey;\n            Colors.obj0DarkGrey = Table05Entry09Colors.obj0DarkGrey;\n            Colors.obj0Black = Table05Entry09Colors.obj0Black;\n            Colors.obj1White = Table05Entry09Colors.obj1White;\n            Colors.obj1LightGrey = Table05Entry09Colors.obj1LightGrey;\n            Colors.obj1DarkGrey = Table05Entry09Colors.obj1DarkGrey;\n            Colors.obj1Black = Table05Entry09Colors.obj1Black;\n            break;\n        case 0x70:\n            Colors.bgWhite = Table05Entry11Colors.bgWhite;\n            Colors.bgLightGrey = Table05Entry11Colors.bgLightGrey;\n            Colors.bgDarkGrey = Table05Entry11Colors.bgDarkGrey;\n            Colors.bgBlack = Table05Entry11Colors.bgBlack;\n            Colors.obj0White = Table05Entry11Colors.obj0White;\n            Colors.obj0LightGrey = Table05Entry11Colors.obj0LightGrey;\n            Colors.obj0DarkGrey = Table05Entry11Colors.obj0DarkGrey;\n            Colors.obj0Black = Table05Entry11Colors.obj0Black;\n            Colors.obj1White = Table05Entry11Colors.obj1White;\n            Colors.obj1LightGrey = Table05Entry11Colors.obj1LightGrey;\n            Colors.obj1DarkGrey = Table05Entry11Colors.obj1DarkGrey;\n            Colors.obj1Black = Table05Entry11Colors.obj1Black;\n            break;\n        case 0x46:\n            Colors.bgWhite = Table05Entry14Colors.bgWhite;\n            Colors.bgLightGrey = Table05Entry14Colors.bgLightGrey;\n            Colors.bgDarkGrey = Table05Entry14Colors.bgDarkGrey;\n            Colors.bgBlack = Table05Entry14Colors.bgBlack;\n            Colors.obj0White = Table05Entry14Colors.obj0White;\n            Colors.obj0LightGrey = Table05Entry14Colors.obj0LightGrey;\n            Colors.obj0DarkGrey = Table05Entry14Colors.obj0DarkGrey;\n            Colors.obj0Black = Table05Entry14Colors.obj0Black;\n            Colors.obj1White = Table05Entry14Colors.obj1White;\n            Colors.obj1LightGrey = Table05Entry14Colors.obj1LightGrey;\n            Colors.obj1DarkGrey = Table05Entry14Colors.obj1DarkGrey;\n            Colors.obj1Black = Table05Entry14Colors.obj1Black;\n            break;\n        case 0xd3:\n            Colors.bgWhite = Table05Entry15Colors.bgWhite;\n            Colors.bgLightGrey = Table05Entry15Colors.bgLightGrey;\n            Colors.bgDarkGrey = Table05Entry15Colors.bgDarkGrey;\n            Colors.bgBlack = Table05Entry15Colors.bgBlack;\n            Colors.obj0White = Table05Entry15Colors.obj0White;\n            Colors.obj0LightGrey = Table05Entry15Colors.obj0LightGrey;\n            Colors.obj0DarkGrey = Table05Entry15Colors.obj0DarkGrey;\n            Colors.obj0Black = Table05Entry15Colors.obj0Black;\n            Colors.obj1White = Table05Entry15Colors.obj1White;\n            Colors.obj1LightGrey = Table05Entry15Colors.obj1LightGrey;\n            Colors.obj1DarkGrey = Table05Entry15Colors.obj1DarkGrey;\n            Colors.obj1Black = Table05Entry15Colors.obj1Black;\n            break;\n    }\n}\n\n// Grouped registers\n// possible overload these later to performace actions\n// AF, BC, DE, HL\nfunction concatenateBytes(highByte, lowByte) {\n    //https://stackoverflow.com/questions/38298412/convert-two-bytes-into-signed-16-bit-integer-in-javascript\n    return ((highByte & 0xff) << 8) | (lowByte & 0xff);\n}\nfunction splitHighByte(groupedByte) {\n    return (groupedByte & 0xff00) >> 8;\n}\nfunction splitLowByte(groupedByte) {\n    return groupedByte & 0x00ff;\n}\nfunction rotateByteLeft(value) {\n    // Rotate left\n    // https://stackoverflow.com/questions/19204750/how-do-i-perform-a-circular-rotation-of-a-byte\n    // 4-bit example:\n    // 1010 -> 0100 | 0001\n    return u8Portable((value << 1) | (value >> 7));\n}\nfunction rotateByteLeftThroughCarry(value) {\n    // Example: https://github.com/nakardo/node-gameboy/blob/master/lib/cpu/opcodes.js\n    // Through carry meaning, instead of raotating the bit that gets dropped off, but the carry there instead\n    return u8Portable((value << 1) | getCarryFlag$$1());\n}\nfunction rotateByteRight(value) {\n    // Rotate right\n    // 4-bit example:\n    // 1010 -> 0101 | 0000\n    return u8Portable((value >> 1) | (value << 7));\n}\nfunction rotateByteRightThroughCarry(value) {\n    // Example: https://github.com/nakardo/node-gameboy/blob/master/lib/cpu/opcodes.js\n    // Through carry meaning, instead of raotating the bit that gets dropped off, put the carry there instead\n    return u8Portable((value >> 1) | (getCarryFlag$$1() << 7));\n}\nfunction setBitOnByte(bitPosition, byte) {\n    return byte | (0x01 << bitPosition);\n}\nfunction resetBitOnByte(bitPosition, byte) {\n    return byte & ~(0x01 << bitPosition);\n}\nfunction checkBitOnByte(bitPosition, byte) {\n    // Perforamnce improvements\n    // https://github.com/AssemblyScript/assemblyscript/issues/40\n    return (byte & (1 << bitPosition)) != 0;\n}\n\n// Class for GBC Color palletes\n// http://gbdev.gg8.se/wiki/articles/Video_Display#FF68_-_BCPS.2FBGPI_-_CGB_Mode_Only_-_Background_Palette_Index\nvar Palette = /** @class */ (function () {\n    function Palette() {\n    }\n    Palette.memoryLocationBackgroundPaletteIndex = 0xff68;\n    Palette.memoryLocationBackgroundPaletteData = 0xff69;\n    Palette.memoryLocationSpritePaletteIndex = 0xff6a;\n    Palette.memoryLocationSpritePaletteData = 0xff6b;\n    // Palettes\n    Palette.memoryLocationBackgroundPalette = 0xff47;\n    Palette.memoryLocationSpritePaletteOne = 0xff48;\n    Palette.memoryLocationSpritePaletteTwo = 0xff49;\n    return Palette;\n}());\n// Inlined because closure compiler inlines\nfunction initializePalette() {\n    if (Cpu.GBCEnabled) {\n        // GBC Palettes\n        eightBitStoreIntoGBMemory(0xff68, 0xc0);\n        eightBitStoreIntoGBMemory(0xff69, 0xff);\n        eightBitStoreIntoGBMemory(0xff6a, 0xc1);\n        eightBitStoreIntoGBMemory(0xff6b, 0x0d);\n    }\n    else {\n        // GBC Palettes\n        eightBitStoreIntoGBMemory(0xff68, 0xff);\n        eightBitStoreIntoGBMemory(0xff69, 0xff);\n        eightBitStoreIntoGBMemory(0xff6a, 0xff);\n        eightBitStoreIntoGBMemory(0xff6b, 0xff);\n    }\n}\n// Simple get pallete color or monochrome GB\n// shouldRepresentColorByColorId is good for debugging tile data for GBC games that don't have\n// monochromePalettes\n// Inlined because closure compiler inlines\nfunction getMonochromeColorFromPalette(colorId, paletteMemoryLocation, shouldRepresentColorByColorId) {\n    if (shouldRepresentColorByColorId === void 0) { shouldRepresentColorByColorId = false; }\n    // Shift our paletteByte, 2 times for each color ID\n    // And off any extra bytes\n    // Return our Color (00 - white, 01 - light grey, 10 Dark grey, or 11 - Black)\n    var color = colorId;\n    if (!shouldRepresentColorByColorId) {\n        color = (eightBitLoadFromGBMemory(paletteMemoryLocation) >> (colorId << 1)) & 0x03;\n    }\n    // Since our max is 254, and max is 3.\n    // monochrome color palette is modified from bgb\n    // TODO: Make these colors into a constant\n    var rgbColor = 242;\n    switch (color) {\n        case 0:\n            break;\n        case 1:\n            rgbColor = 160;\n            break;\n        case 2:\n            rgbColor = 88;\n            break;\n        case 3:\n            rgbColor = 8;\n            break;\n    }\n    return rgbColor;\n}\n// Function to returns the Colorized color for a GB games\nfunction getColorizedGbHexColorFromPalette(colorId, paletteMemoryLocation) {\n    // Shift our paletteByte, 2 times for each color ID\n    // And off any extra bytes\n    // Return our Color (00 - white, 01 - light grey, 10 Dark grey, or 11 - Black)\n    var color = (eightBitLoadFromGBMemory(paletteMemoryLocation) >> (colorId * 2)) & 0x03;\n    // Check which palette we got, to apply the right color layer\n    var hexColor = 0;\n    if (paletteMemoryLocation === Palette.memoryLocationSpritePaletteOne) {\n        hexColor = Colors.obj0White;\n        switch (color) {\n            case 0:\n                break;\n            case 1:\n                hexColor = Colors.obj0LightGrey;\n                break;\n            case 2:\n                hexColor = Colors.obj0DarkGrey;\n                break;\n            case 3:\n                hexColor = Colors.obj0Black;\n                break;\n        }\n    }\n    else if (paletteMemoryLocation === Palette.memoryLocationSpritePaletteTwo) {\n        hexColor = Colors.obj1White;\n        switch (color) {\n            case 0:\n                break;\n            case 1:\n                hexColor = Colors.obj1LightGrey;\n                break;\n            case 2:\n                hexColor = Colors.obj1DarkGrey;\n                break;\n            case 3:\n                hexColor = Colors.obj1Black;\n                break;\n        }\n    }\n    else {\n        hexColor = Colors.bgWhite;\n        switch (color) {\n            case 0:\n                break;\n            case 1:\n                hexColor = Colors.bgLightGrey;\n                break;\n            case 2:\n                hexColor = Colors.bgDarkGrey;\n                break;\n            case 3:\n                hexColor = Colors.bgBlack;\n                break;\n        }\n    }\n    return hexColor;\n}\n// Inlined because closure compiler inlines\nfunction writeColorPaletteToMemory(offset, value) {\n    // FF68\n    //  Bit 0-5   Index (00-3F)\n    var memoryLocationSpritePaletteData = Palette.memoryLocationSpritePaletteData;\n    if (offset === Palette.memoryLocationBackgroundPaletteData || offset === memoryLocationSpritePaletteData) {\n        // Get the palette index\n        var paletteIndex = eightBitLoadFromGBMemory(offset - 1);\n        // Clear the 6th bit, as it does nothing\n        paletteIndex = resetBitOnByte(6, paletteIndex);\n        // Check if we are changing the sprite pallete data\n        var isSprite = offset === memoryLocationSpritePaletteData;\n        storePaletteByteInWasmMemory(paletteIndex, value, isSprite);\n        incrementPaletteIndexIfSet(paletteIndex, offset - 1);\n    }\n}\n// Functions to Handle Write to pallete data registers\n// http://gbdev.gg8.se/wiki/articles/Video_Display#FF68_-_BCPS.2FBGPI_-_CGB_Mode_Only_-_Background_Palette_Index\n// Function to handle incrementing the pallete index if required\n// Inlined because closure compiler inlines\nfunction incrementPaletteIndexIfSet(paletteIndex, offset) {\n    // Check ther auto increment box\n    if (checkBitOnByte(7, paletteIndex)) {\n        // Increment the index, and return the value before the increment\n        // Ensure we don't ouverflow our auto increment bit\n        paletteIndex += 1;\n        paletteIndex = setBitOnByte(7, paletteIndex);\n        eightBitStoreIntoGBMemory(offset, paletteIndex);\n    }\n}\n// FF68\n// Bit 0-5   Index (00-3F)\n// Bit 7     Auto Increment  (0=Disabled, 1=Increment after Writing)\n// Index is 00-0x3F because the means 0 - 63 (64),\n// and apparently there are 8 bytes per pallete to describe Color 0-3 (4 colors),\n// and 0-7 (8 palltetes). Therefore, 64!\nfunction getRgbColorFromPalette(paletteId, colorId, isSprite) {\n    // Each Pallete takes 8 bytes, so multiply by 8 to get the pallete\n    // And Each color takes 2 bytes, therefore, multiple by 2 for the correct color bytes in the palette\n    var paletteIndex = paletteId * 8 + colorId * 2;\n    // Load the Color that is seperated into two bytes\n    var paletteHighByte = loadPaletteByteFromWasmMemory(paletteIndex + 1, isSprite);\n    var paletteLowByte = loadPaletteByteFromWasmMemory(paletteIndex, isSprite);\n    // Return the concatenated color byte\n    return concatenateBytes(paletteHighByte, paletteLowByte);\n}\n// Function to return the color from a passed 16 bit color pallette\nfunction getColorComponentFromRgb(colorId, colorRgb) {\n    // Get our bitmask for the color ID\n    // bit mask tested good :)\n    colorId *= 5;\n    var bitMask = 0x1f << colorId;\n    var colorValue = (colorRgb & bitMask) >> colorId;\n    // Goal is to reach 254 for each color, so 255 / 31 (0x1F) ~8 TODO: Make exact\n    // Want 5 bits for each\n    return colorValue * 8;\n}\n// Function to load a byte from our Gbc Palette memory\nfunction loadPaletteByteFromWasmMemory(paletteIndexByte, isSprite) {\n    // Clear the top two bits to just get the bottom palette Index\n    var paletteIndex = paletteIndexByte & 0x3f;\n    // Move over the palette index to not overlap the background has 0x3F, so Zero for Sprites is 0x40)\n    if (isSprite) {\n        paletteIndex += 0x40;\n    }\n    return load(GBC_PALETTE_LOCATION + paletteIndex);\n}\n// Function to store a byte to our Gbc Palette memory\n// Inlined because closure compiler inlines\nfunction storePaletteByteInWasmMemory(paletteIndexByte, value, isSprite) {\n    // Clear the top two bits to just get the bottom palette Index\n    var paletteIndex = paletteIndexByte & 0x3f;\n    // Move over the palette index to not overlap the background (has 0x3F, so Zero for Sprites is 0x40)\n    if (isSprite) {\n        paletteIndex += 0x40;\n    }\n    store(GBC_PALETTE_LOCATION + paletteIndex, value);\n}\n\n// https://github.com/torch2424/wasmBoy/issues/51\nfunction addPriorityforPixel(x, y, colorId, hasGbcBgPriority) {\n    if (colorId === void 0) { colorId = 0; }\n    if (hasGbcBgPriority === void 0) { hasGbcBgPriority = false; }\n    var bgPriorityByte = colorId & 0x03;\n    if (hasGbcBgPriority) {\n        bgPriorityByte = setBitOnByte(2, bgPriorityByte);\n    }\n    store(BG_PRIORITY_MAP_LOCATION + getPixelStart(x, y), bgPriorityByte);\n}\n// Inlined because closure compiler inlines\nfunction getPriorityforPixel(x, y) {\n    return load(BG_PRIORITY_MAP_LOCATION + getPixelStart(x, y));\n}\n// Inlined because closure compiler inlines\nfunction clearPriorityMap() {\n    for (var y = 0; y < 144; ++y) {\n        for (var x = 0; x < 160; ++x) {\n            store(BG_PRIORITY_MAP_LOCATION + getPixelStart(x, y), 0);\n        }\n    }\n}\n// Inlined because closure compiler inlines\nfunction getPixelStart(x, y) {\n    // Get the pixel number\n    return y * 160 + x;\n}\n\n// Functions for performance hacks, and debugging tiles\nvar TileCache = /** @class */ (function () {\n    function TileCache() {\n    }\n    TileCache.tileId = -1;\n    TileCache.horizontalFlip = false;\n    TileCache.nextXIndexToPerformCacheCheck = -1;\n    return TileCache;\n}());\n// Inlined because closure compiler inlines\nfunction resetTileCache() {\n    TileCache.tileId = -1;\n    TileCache.nextXIndexToPerformCacheCheck = -1;\n}\nfunction drawPixelsFromLineOfTile(tileId, tileDataMemoryLocation, vramBankId, tileLineXStart, tileLineXEnd, tileLineY, outputLineX, outputLineY, outputWidth, wasmMemoryStart, shouldRepresentMonochromeColorByColorId, paletteLocation, bgMapAttributes, spriteAttributes) {\n    // Get our number of pixels drawn\n    var pixelsDrawn = 0;\n    // Get our tile data address\n    var tileDataAddress = getTileDataAddress(tileDataMemoryLocation, tileId);\n    // Get the bytes for our tile\n    var byteOneForLineOfTilePixels = loadFromVramBank(tileDataAddress + tileLineY * 2, vramBankId);\n    var byteTwoForLineOfTilePixels = loadFromVramBank(tileDataAddress + tileLineY * 2 + 1, vramBankId);\n    // Loop through our X values to draw\n    for (var x = tileLineXStart; x <= tileLineXEnd; ++x) {\n        // First find where we are going to do our final output x\n        // And don't allow any width overflow\n        var iteratedOutputX = outputLineX + (x - tileLineXStart);\n        if (iteratedOutputX < outputWidth) {\n            // However, We need to reverse our byte (if not horizontally flipped),\n            // As pixel 0 is on byte 7, and pixel 1 is on byte 6, etc...\n            // Therefore, is pixelX was 2, then really is need to be 5\n            // So 2 - 7 = -5, * 1 = 5\n            // Or to simplify, 7 - 2 = 5 haha!\n            var pixelXInTile = x;\n            if (bgMapAttributes < 0 || !checkBitOnByte(5, bgMapAttributes)) {\n                pixelXInTile = 7 - pixelXInTile;\n            }\n            // Get our pallete colors for the tile\n            var paletteColorId = 0;\n            if (checkBitOnByte(pixelXInTile, byteTwoForLineOfTilePixels)) {\n                // Byte one represents the second bit in our color id, so bit shift\n                paletteColorId += 1;\n                paletteColorId = paletteColorId << 1;\n            }\n            if (checkBitOnByte(pixelXInTile, byteOneForLineOfTilePixels)) {\n                paletteColorId += 1;\n            }\n            // Get the pallete\n            var red = 0;\n            var green = 0;\n            var blue = 0;\n            // Check if we should draw color or not\n            if (Cpu.GBCEnabled && (bgMapAttributes >= 0 || spriteAttributes >= 0)) {\n                // Draw C O L O R\n                var isSprite = spriteAttributes >= 0;\n                // Call the helper function to grab the correct color from the palette\n                // Get the palette index byte\n                var bgPalette = bgMapAttributes & 0x07;\n                if (isSprite) {\n                    bgPalette = spriteAttributes & 0x07;\n                }\n                var rgbColorPalette = getRgbColorFromPalette(bgPalette, paletteColorId, isSprite);\n                // Split off into red green and blue\n                red = getColorComponentFromRgb(0, rgbColorPalette);\n                green = getColorComponentFromRgb(1, rgbColorPalette);\n                blue = getColorComponentFromRgb(2, rgbColorPalette);\n            }\n            else {\n                // Draw Monochrome\n                // Get the default palette if none\n                if (paletteLocation <= 0) {\n                    paletteLocation = Graphics.memoryLocationBackgroundPalette;\n                }\n                if (shouldRepresentMonochromeColorByColorId) {\n                    var monochromeColor = getMonochromeColorFromPalette(paletteColorId, paletteLocation, shouldRepresentMonochromeColorByColorId);\n                    red = monochromeColor;\n                    green = monochromeColor;\n                    blue = monochromeColor;\n                }\n                else {\n                    var hexColor = getColorizedGbHexColorFromPalette(paletteColorId, paletteLocation);\n                    red = getRedFromHexColor(hexColor);\n                    green = getGreenFromHexColor(hexColor);\n                    blue = getBlueFromHexColor(hexColor);\n                }\n            }\n            // Finally Lets place a pixel in memory\n            // Find where our tile line would start\n            var pixelStart = getTilePixelStart(iteratedOutputX, outputLineY, outputWidth);\n            wasmMemoryStart += pixelStart;\n            store(wasmMemoryStart + 0, red);\n            store(wasmMemoryStart + 1, green);\n            store(wasmMemoryStart + 2, blue);\n            var gbcBgPriority = false;\n            if (bgMapAttributes >= 0) {\n                gbcBgPriority = checkBitOnByte(7, bgMapAttributes);\n            }\n            // Lastly, add the pixel to our background priority map\n            // https://github.com/torch2424/wasmBoy/issues/51\n            // Bits 0 & 1 will represent the color Id drawn by the BG/Window\n            // Bit 2 will represent if the Bg/Window has GBC priority.\n            addPriorityforPixel(iteratedOutputX, outputLineY, paletteColorId, gbcBgPriority);\n            pixelsDrawn++;\n        }\n    }\n    return pixelsDrawn;\n}\n// Inlined because closure compiler inlines\nfunction getTilePixelStart(outputLineX, outputLineY, outputWidth) {\n    // Finally Lets place a pixel in memory\n    var pixelStart = outputLineY * outputWidth + outputLineX;\n    // Each pixel takes 3 slots, therefore, multiply by 3!\n    return pixelStart * 3;\n}\nfunction getTileDataAddress(tileDataMemoryLocation, tileIdFromTileMap) {\n    // Watch this part of The ultimate gameboy talk: https://youtu.be/HyzD8pNlpwI?t=30m50s\n    // A line of 8 pixels on a single tile, is represented by 2 bytes.\n    // since a single tile is 8x8 pixels, 8 * 2 = 16 bytes\n    // Get the tile ID's tile addess from tile data.\n    // For instance, let's say our first line of tile data represents tiles for letters:\n    // a b c d e f g\n    // And we have tileId 0x02. That means we want the tile for the 'c' character\n    // Since each tile is 16 bytes, it would be the starting tileDataAddress + (tileId * tileSize), to skip over tiles we dont want\n    // The whole signed thing is weird, and has something to do how the second set of tile data is stored :p\n    if (tileDataMemoryLocation === Graphics.memoryLocationTileDataSelectZeroStart) {\n        // Treat the tile Id as a signed int, subtract an offset of 128\n        // if the tileId was 0 then the tile would be in memory region 0x9000-0x900F\n        if (checkBitOnByte(7, tileIdFromTileMap)) {\n            tileIdFromTileMap -= 128;\n        }\n        else {\n            tileIdFromTileMap += 128;\n        }\n    }\n    // if the background layout gave us the tileId 0, then the tile data would be between 0x8000-0x800F.\n    return tileDataMemoryLocation + tileIdFromTileMap * 16;\n}\n\n// Functions to help with Handling Duty on Square Channels\n// Since there are no 2d arrays, we will use a byte to represent duty cycles (wave form from percentages)\nfunction isDutyCycleClockPositiveOrNegativeForWaveform(channelDuty, waveFormPositionOnDuty) {\n    // Get our Wave Form According to the Duty\n    // Default to a duty of 1\n    // http://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware#Square_Wave\n    switch (channelDuty) {\n        case 0x01:\n            // 1000 0001\n            return checkBitOnByte(waveFormPositionOnDuty, 0x81);\n        case 0x02:\n            // 1000 0111\n            return checkBitOnByte(waveFormPositionOnDuty, 0x87);\n        case 0x03:\n            // 0111 1110\n            return checkBitOnByte(waveFormPositionOnDuty, 0x7e);\n        default:\n            // 0000 0001\n            return checkBitOnByte(waveFormPositionOnDuty, 0x01);\n    }\n}\n\n// NOTE: Tons of Copy-pasta btween channels, because Classes cannot be instantiated yet in assemblyscript\nvar Channel1 = /** @class */ (function () {\n    function Channel1() {\n    }\n    Channel1.updateNRx0 = function (value) {\n        Channel1.NRx0SweepPeriod = (value & 0x70) >> 4;\n        Channel1.NRx0Negate = checkBitOnByte(3, value);\n        Channel1.NRx0SweepShift = value & 0x07;\n    };\n    Channel1.updateNRx1 = function (value) {\n        Channel1.NRx1Duty = (value >> 6) & 0x03;\n        Channel1.NRx1LengthLoad = value & 0x3f;\n        // Also need to set our length counter. Taken from the old, setChannelLengthCounter\n        // Channel length is determined by 64 (or 256 if channel 3), - the length load\n        // http://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware#Registers\n        // Note, this will be different for channel 3\n        Channel1.lengthCounter = 64 - Channel1.NRx1LengthLoad;\n    };\n    Channel1.updateNRx2 = function (value) {\n        Channel1.NRx2StartingVolume = (value >> 4) & 0x0f;\n        Channel1.NRx2EnvelopeAddMode = checkBitOnByte(3, value);\n        Channel1.NRx2EnvelopePeriod = value & 0x07;\n        // Also, get our channel is dac enabled\n        Channel1.isDacEnabled = (value & 0xf8) > 0;\n    };\n    Channel1.updateNRx3 = function (value) {\n        Channel1.NRx3FrequencyLSB = value;\n        // Update Channel Frequency\n        Channel1.frequency = (Channel1.NRx4FrequencyMSB << 8) | value;\n    };\n    Channel1.updateNRx4 = function (value) {\n        Channel1.NRx4LengthEnabled = checkBitOnByte(6, value);\n        value &= 0x07;\n        Channel1.NRx4FrequencyMSB = value;\n        // Update Channel Frequency\n        Channel1.frequency = (value << 8) | Channel1.NRx3FrequencyLSB;\n    };\n    // Function to save the state of the class\n    Channel1.saveState = function () {\n        storeBooleanDirectlyToWasmMemory(getSaveStateMemoryOffset(0x00, Channel1.saveStateSlot), Channel1.isEnabled);\n        store(getSaveStateMemoryOffset(0x01, Channel1.saveStateSlot), Channel1.frequencyTimer);\n        store(getSaveStateMemoryOffset(0x05, Channel1.saveStateSlot), Channel1.envelopeCounter);\n        store(getSaveStateMemoryOffset(0x09, Channel1.saveStateSlot), Channel1.lengthCounter);\n        store(getSaveStateMemoryOffset(0x0e, Channel1.saveStateSlot), Channel1.volume);\n        store(getSaveStateMemoryOffset(0x13, Channel1.saveStateSlot), Channel1.dutyCycle);\n        store(getSaveStateMemoryOffset(0x14, Channel1.saveStateSlot), Channel1.waveFormPositionOnDuty);\n        storeBooleanDirectlyToWasmMemory(getSaveStateMemoryOffset(0x19, Channel1.saveStateSlot), Channel1.isSweepEnabled);\n        store(getSaveStateMemoryOffset(0x1a, Channel1.saveStateSlot), Channel1.sweepCounter);\n        store(getSaveStateMemoryOffset(0x1f, Channel1.saveStateSlot), Channel1.sweepShadowFrequency);\n    };\n    // Function to load the save state from memory\n    Channel1.loadState = function () {\n        Channel1.isEnabled = loadBooleanDirectlyFromWasmMemory(getSaveStateMemoryOffset(0x00, Channel1.saveStateSlot));\n        Channel1.frequencyTimer = load(getSaveStateMemoryOffset(0x01, Channel1.saveStateSlot));\n        Channel1.envelopeCounter = load(getSaveStateMemoryOffset(0x05, Channel1.saveStateSlot));\n        Channel1.lengthCounter = load(getSaveStateMemoryOffset(0x09, Channel1.saveStateSlot));\n        Channel1.volume = load(getSaveStateMemoryOffset(0x0e, Channel1.saveStateSlot));\n        Channel1.dutyCycle = load(getSaveStateMemoryOffset(0x13, Channel1.saveStateSlot));\n        Channel1.waveFormPositionOnDuty = load(getSaveStateMemoryOffset(0x14, Channel1.saveStateSlot));\n        Channel1.isSweepEnabled = loadBooleanDirectlyFromWasmMemory(getSaveStateMemoryOffset(0x19, Channel1.saveStateSlot));\n        Channel1.sweepCounter = load(getSaveStateMemoryOffset(0x1a, Channel1.saveStateSlot));\n        Channel1.sweepShadowFrequency = load(getSaveStateMemoryOffset(0x1f, Channel1.saveStateSlot));\n    };\n    Channel1.initialize = function () {\n        eightBitStoreIntoGBMemory(Channel1.memoryLocationNRx0, 0x80);\n        eightBitStoreIntoGBMemory(Channel1.memoryLocationNRx1, 0xbf);\n        eightBitStoreIntoGBMemory(Channel1.memoryLocationNRx2, 0xf3);\n        eightBitStoreIntoGBMemory(Channel1.memoryLocationNRx3, 0xc1);\n        eightBitStoreIntoGBMemory(Channel1.memoryLocationNRx4, 0xbf);\n    };\n    // Function to get a sample using the cycle counter on the channel\n    Channel1.getSampleFromCycleCounter = function () {\n        var accumulatedCycles = Channel1.cycleCounter;\n        Channel1.cycleCounter = 0;\n        return Channel1.getSample(accumulatedCycles);\n    };\n    // Function to reset our timer, useful for GBC double speed mode\n    Channel1.resetTimer = function () {\n        var frequencyTimer = (2048 - Channel1.frequency) << 2;\n        // TODO: Ensure this is correct for GBC Double Speed Mode\n        if (Cpu.GBCDoubleSpeed) {\n            frequencyTimer = frequencyTimer << 2;\n        }\n        Channel1.frequencyTimer = frequencyTimer;\n    };\n    Channel1.getSample = function (numberOfCycles) {\n        // Decrement our channel timer\n        var frequencyTimer = Channel1.frequencyTimer - numberOfCycles;\n        if (frequencyTimer <= 0) {\n            // Get the amount that overflowed so we don't drop cycles\n            var overflowAmount = abs(frequencyTimer);\n            Channel1.frequencyTimer = frequencyTimer;\n            // Reset our timer\n            // A square channel's frequency timer period is set to (2048-frequency)*4.\n            // Four duty cycles are available, each waveform taking 8 frequency timer clocks to cycle through:\n            Channel1.resetTimer();\n            Channel1.frequencyTimer -= overflowAmount;\n            // Also increment our duty cycle\n            // What is duty? https://en.wikipedia.org/wiki/Duty_cycle\n            // Duty cycle for square wave: http://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware#Square_Wave\n            Channel1.waveFormPositionOnDuty = (Channel1.waveFormPositionOnDuty + 1) & 7;\n        }\n        else {\n            Channel1.frequencyTimer = frequencyTimer;\n        }\n        // Get our ourput volume\n        var outputVolume = 0;\n        // Finally to set our output volume, the channel must be enabled,\n        // Our channel DAC must be enabled, and we must be in an active state\n        // Of our duty cycle\n        if (Channel1.isEnabled && Channel1.isDacEnabled) {\n            outputVolume = Channel1.volume;\n        }\n        else {\n            // Return silence\n            // Since range from -15 - 15, or 0 to 30 for our unsigned\n            return 15;\n        }\n        // Get the current sampleValue\n        var sample = 1;\n        if (!isDutyCycleClockPositiveOrNegativeForWaveform(Channel1.NRx1Duty, Channel1.waveFormPositionOnDuty)) {\n            sample = -sample;\n        }\n        sample *= outputVolume;\n        // Square Waves Can range from -15 - 15. Therefore simply add 15\n        sample += 15;\n        return sample;\n    };\n    //http://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware#Trigger_Event\n    Channel1.trigger = function () {\n        Channel1.isEnabled = true;\n        if (Channel1.lengthCounter === 0) {\n            Channel1.lengthCounter = 64;\n        }\n        // Reset our timer\n        // A square channel's frequency timer period is set to (2048-frequency)*4.\n        // Four duty cycles are available, each waveform taking 8 frequency timer clocks to cycle through:\n        Channel1.resetTimer();\n        Channel1.envelopeCounter = Channel1.NRx2EnvelopePeriod;\n        Channel1.volume = Channel1.NRx2StartingVolume;\n        // Handle Channel Sweep\n        // http://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware\n        Channel1.sweepShadowFrequency = Channel1.frequency;\n        // Reset back to the sweep period\n        Channel1.sweepCounter = Channel1.NRx0SweepPeriod;\n        // The internal enabled flag is set if either the sweep period or shift are non-zero, cleared otherwise.\n        Channel1.isSweepEnabled = Channel1.NRx0SweepPeriod > 0 && Channel1.NRx0SweepShift > 0;\n        // If the sweep shift is non-zero, frequency calculation and the overflow check are performed immediately.\n        if (Channel1.NRx0SweepShift > 0) {\n            calculateSweepAndCheckOverflow();\n        }\n        // Finally if DAC is off, channel is still disabled\n        if (!Channel1.isDacEnabled) {\n            Channel1.isEnabled = false;\n        }\n    };\n    // Function to determine if the current channel would update when getting the sample\n    // This is used to accumulate samples\n    Channel1.willChannelUpdate = function (numberOfCycles) {\n        //Increment our cycle counter\n        var cycleCounter = Channel1.cycleCounter + numberOfCycles;\n        Channel1.cycleCounter = cycleCounter;\n        // Dac enabled status cached by accumulator\n        return !(Channel1.frequencyTimer - cycleCounter > 0);\n    };\n    Channel1.updateSweep = function () {\n        // Obscure behavior\n        // TODO: The volume envelope and sweep timers treat a period of 0 as 8.\n        // Decrement the sweep counter\n        var sweepCounter = Channel1.sweepCounter - 1;\n        if (sweepCounter <= 0) {\n            // Reset back to the sweep period\n            Channel1.sweepCounter = Channel1.NRx0SweepPeriod;\n            // Calculate our sweep\n            // When it generates a clock and the sweep's internal enabled flag is set and the sweep period is not zero,\n            // a new frequency is calculated and the overflow check is performed.\n            if (Channel1.isSweepEnabled && Channel1.NRx0SweepPeriod > 0) {\n                calculateSweepAndCheckOverflow();\n            }\n        }\n        else {\n            Channel1.sweepCounter = sweepCounter;\n        }\n    };\n    Channel1.updateLength = function () {\n        var lengthCounter = Channel1.lengthCounter;\n        if (lengthCounter > 0 && Channel1.NRx4LengthEnabled) {\n            lengthCounter -= 1;\n        }\n        if (lengthCounter === 0) {\n            Channel1.isEnabled = false;\n        }\n        Channel1.lengthCounter = lengthCounter;\n    };\n    Channel1.updateEnvelope = function () {\n        // Obscure behavior\n        // TODO: The volume envelope and sweep timers treat a period of 0 as 8.\n        var envelopeCounter = Channel1.envelopeCounter - 1;\n        if (envelopeCounter <= 0) {\n            Channel1.envelopeCounter = Channel1.NRx2EnvelopePeriod;\n            // When the timer generates a clock and the envelope period is NOT zero, a new volume is calculated\n            // NOTE: There is some weiirrdd obscure behavior where zero can equal 8, so watch out for that\n            // If notes are sustained for too long, this is probably why\n            if (envelopeCounter !== 0) {\n                var volume = Channel1.volume;\n                if (Channel1.NRx2EnvelopeAddMode && volume < 15) {\n                    volume += 1;\n                }\n                else if (!Channel1.NRx2EnvelopeAddMode && volume > 0) {\n                    volume -= 1;\n                }\n                Channel1.volume = volume;\n            }\n        }\n        else {\n            Channel1.envelopeCounter = envelopeCounter;\n        }\n    };\n    Channel1.setFrequency = function (frequency) {\n        // Get the high and low bits\n        var passedFrequencyHighBits = frequency >> 8;\n        var passedFrequencyLowBits = frequency & 0xff;\n        // Get the new register 4\n        var register4 = eightBitLoadFromGBMemory(Channel1.memoryLocationNRx4);\n        // Knock off lower 3 bits, and Or on our high bits\n        var newRegister4 = register4 & 0xf8;\n        newRegister4 = newRegister4 | passedFrequencyHighBits;\n        // Set the registers\n        eightBitStoreIntoGBMemory(Channel1.memoryLocationNRx3, passedFrequencyLowBits);\n        eightBitStoreIntoGBMemory(Channel1.memoryLocationNRx4, newRegister4);\n        // Save the frequency for ourselves without triggering memory traps\n        Channel1.NRx3FrequencyLSB = passedFrequencyLowBits;\n        Channel1.NRx4FrequencyMSB = passedFrequencyHighBits;\n        Channel1.frequency = (Channel1.NRx4FrequencyMSB << 8) | Channel1.NRx3FrequencyLSB;\n    };\n    // Cycle Counter for our sound accumulator\n    Channel1.cycleCounter = 0;\n    // Squarewave channel with volume envelope and frequency sweep functions.\n    // NR10 -> Sweep Register R/W\n    Channel1.memoryLocationNRx0 = 0xff10;\n    // -PPP NSSS Sweep period, negate, shift\n    Channel1.NRx0SweepPeriod = 0;\n    Channel1.NRx0Negate = false;\n    Channel1.NRx0SweepShift = 0;\n    // NR11 -> Sound length/Wave pattern duty (R/W)\n    Channel1.memoryLocationNRx1 = 0xff11;\n    // DDLL LLLL Duty, Length load (64-L)\n    Channel1.NRx1Duty = 0;\n    Channel1.NRx1LengthLoad = 0;\n    // NR12 -> Volume Envelope (R/W)\n    Channel1.memoryLocationNRx2 = 0xff12;\n    // VVVV APPP Starting volume, Envelope add mode, period\n    Channel1.NRx2StartingVolume = 0;\n    Channel1.NRx2EnvelopeAddMode = false;\n    Channel1.NRx2EnvelopePeriod = 0;\n    // NR13 -> Frequency lo (W)\n    Channel1.memoryLocationNRx3 = 0xff13;\n    // FFFF FFFF Frequency LSB\n    Channel1.NRx3FrequencyLSB = 0;\n    // NR14 -> Frequency hi (R/W)\n    Channel1.memoryLocationNRx4 = 0xff14;\n    // TL-- -FFF Trigger, Length enable, Frequency MSB\n    Channel1.NRx4LengthEnabled = false;\n    Channel1.NRx4FrequencyMSB = 0;\n    // Channel Properties\n    Channel1.channelNumber = 1;\n    Channel1.isEnabled = false;\n    Channel1.isDacEnabled = false;\n    Channel1.frequency = 0;\n    Channel1.frequencyTimer = 0x00;\n    Channel1.envelopeCounter = 0x00;\n    Channel1.lengthCounter = 0x00;\n    Channel1.volume = 0x00;\n    // Square Wave properties\n    Channel1.dutyCycle = 0x00;\n    Channel1.waveFormPositionOnDuty = 0x00;\n    // Channel 1 Sweep\n    Channel1.isSweepEnabled = false;\n    Channel1.sweepCounter = 0x00;\n    Channel1.sweepShadowFrequency = 0x00;\n    // Save States\n    Channel1.saveStateSlot = 7;\n    return Channel1;\n}());\n// Sweep Specific functions\nfunction calculateSweepAndCheckOverflow() {\n    var newFrequency = getNewFrequencyFromSweep();\n    // 7FF is the highest value of the frequency: 111 1111 1111\n    if (newFrequency <= 0x7ff && Channel1.NRx0SweepShift > 0) {\n        // http://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware\n        // If the new frequency is 2047 or less and the sweep shift is not zero,\n        // this new frequency is written back to the shadow frequency and square 1's frequency in NR13 and NR14,\n        // then frequency calculation and overflow check are run AGAIN immediately using this new value,\n        // but this second new frequency is not written back.\n        Channel1.sweepShadowFrequency = newFrequency;\n        Channel1.setFrequency(newFrequency);\n        // Re calculate the new frequency\n        newFrequency = getNewFrequencyFromSweep();\n    }\n    // Next check if the new Frequency is above 0x7FF\n    // if So, disable our sweep\n    if (newFrequency > 0x7ff) {\n        Channel1.isEnabled = false;\n    }\n}\n// Function to determing a new sweep in the current context\nfunction getNewFrequencyFromSweep() {\n    // Start our new frequency, by making it equal to the \"shadow frequency\"\n    var oldFrequency = Channel1.sweepShadowFrequency;\n    var newFrequency = oldFrequency;\n    newFrequency = newFrequency >> Channel1.NRx0SweepShift;\n    // Check for sweep negation\n    if (Channel1.NRx0Negate) {\n        newFrequency = oldFrequency - newFrequency;\n    }\n    else {\n        newFrequency = oldFrequency + newFrequency;\n    }\n    return newFrequency;\n}\n\n// NOTE: Tons of Copy-pasta btween channels, because Classes cannot be instantiated yet in assemblyscript\nvar Channel2 = /** @class */ (function () {\n    function Channel2() {\n    }\n    Channel2.updateNRx1 = function (value) {\n        Channel2.NRx1Duty = (value >> 6) & 0x03;\n        Channel2.NRx1LengthLoad = value & 0x3f;\n        // Also need to set our length counter. Taken from the old, setChannelLengthCounter\n        // Channel length is determined by 64 (or 256 if channel 3), - the length load\n        // http://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware#Registers\n        // Note, this will be different for channel 3\n        Channel2.lengthCounter = 64 - Channel2.NRx1LengthLoad;\n    };\n    Channel2.updateNRx2 = function (value) {\n        Channel2.NRx2StartingVolume = (value >> 4) & 0x0f;\n        Channel2.NRx2EnvelopeAddMode = checkBitOnByte(3, value);\n        Channel2.NRx2EnvelopePeriod = value & 0x07;\n        // Also, get our channel is dac enabled\n        Channel2.isDacEnabled = (value & 0xf8) > 0;\n    };\n    Channel2.updateNRx3 = function (value) {\n        Channel2.NRx3FrequencyLSB = value;\n        // Update Channel Frequency\n        Channel2.frequency = (Channel2.NRx4FrequencyMSB << 8) | value;\n    };\n    Channel2.updateNRx4 = function (value) {\n        Channel2.NRx4LengthEnabled = checkBitOnByte(6, value);\n        value &= 0x07;\n        Channel2.NRx4FrequencyMSB = value;\n        // Update Channel Frequency\n        Channel2.frequency = (value << 8) | Channel2.NRx3FrequencyLSB;\n    };\n    // Function to save the state of the class\n    Channel2.saveState = function () {\n        storeBooleanDirectlyToWasmMemory(getSaveStateMemoryOffset(0x00, Channel2.saveStateSlot), Channel2.isEnabled);\n        store(getSaveStateMemoryOffset(0x01, Channel2.saveStateSlot), Channel2.frequencyTimer);\n        store(getSaveStateMemoryOffset(0x05, Channel2.saveStateSlot), Channel2.envelopeCounter);\n        store(getSaveStateMemoryOffset(0x09, Channel2.saveStateSlot), Channel2.lengthCounter);\n        store(getSaveStateMemoryOffset(0x0e, Channel2.saveStateSlot), Channel2.volume);\n        store(getSaveStateMemoryOffset(0x13, Channel2.saveStateSlot), Channel2.dutyCycle);\n        store(getSaveStateMemoryOffset(0x14, Channel2.saveStateSlot), Channel2.waveFormPositionOnDuty);\n    };\n    // Function to load the save state from memory\n    Channel2.loadState = function () {\n        Channel2.isEnabled = loadBooleanDirectlyFromWasmMemory(getSaveStateMemoryOffset(0x00, Channel2.saveStateSlot));\n        Channel2.frequencyTimer = load(getSaveStateMemoryOffset(0x01, Channel2.saveStateSlot));\n        Channel2.envelopeCounter = load(getSaveStateMemoryOffset(0x05, Channel2.saveStateSlot));\n        Channel2.lengthCounter = load(getSaveStateMemoryOffset(0x09, Channel2.saveStateSlot));\n        Channel2.volume = load(getSaveStateMemoryOffset(0x0e, Channel2.saveStateSlot));\n        Channel2.dutyCycle = load(getSaveStateMemoryOffset(0x13, Channel2.saveStateSlot));\n        Channel2.waveFormPositionOnDuty = load(getSaveStateMemoryOffset(0x14, Channel2.saveStateSlot));\n    };\n    Channel2.initialize = function () {\n        eightBitStoreIntoGBMemory(Channel2.memoryLocationNRx1 - 1, 0xff);\n        eightBitStoreIntoGBMemory(Channel2.memoryLocationNRx1, 0x3f);\n        eightBitStoreIntoGBMemory(Channel2.memoryLocationNRx2, 0x00);\n        eightBitStoreIntoGBMemory(Channel2.memoryLocationNRx3, 0x00);\n        eightBitStoreIntoGBMemory(Channel2.memoryLocationNRx4, 0xb8);\n    };\n    // Function to get a sample using the cycle counter on the channel\n    Channel2.getSampleFromCycleCounter = function () {\n        var accumulatedCycles = Channel2.cycleCounter;\n        Channel2.cycleCounter = 0;\n        return Channel2.getSample(accumulatedCycles);\n    };\n    // Function to reset our timer, useful for GBC double speed mode\n    Channel2.resetTimer = function () {\n        var frequencyTimer = (2048 - Channel2.frequency) << 2;\n        // TODO: Ensure this is correct for GBC Double Speed Mode\n        Channel2.frequencyTimer = frequencyTimer << Cpu.GBCDoubleSpeed;\n    };\n    Channel2.getSample = function (numberOfCycles) {\n        // Decrement our channel timer\n        var frequencyTimer = Channel2.frequencyTimer - numberOfCycles;\n        Channel2.frequencyTimer = frequencyTimer;\n        if (frequencyTimer <= 0) {\n            // Get the amount that overflowed so we don't drop cycles\n            var overflowAmount = abs(frequencyTimer);\n            // Reset our timer\n            // A square channel's frequency timer period is set to (2048-frequency)*4.\n            // Four duty cycles are available, each waveform taking 8 frequency timer clocks to cycle through:\n            Channel2.resetTimer();\n            Channel2.frequencyTimer -= overflowAmount;\n            // Also increment our duty cycle\n            // What is duty? https://en.wikipedia.org/wiki/Duty_cycle\n            // Duty cycle for square wave: http://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware#Square_Wave\n            Channel2.waveFormPositionOnDuty = (Channel2.waveFormPositionOnDuty + 1) & 7;\n        }\n        // Get our ourput volume\n        var outputVolume = 0;\n        // Finally to set our output volume, the channel must be enabled,\n        // Our channel DAC must be enabled, and we must be in an active state\n        // Of our duty cycle\n        if (Channel2.isEnabled && Channel2.isDacEnabled) {\n            outputVolume = Channel2.volume;\n        }\n        else {\n            // Return silence\n            // Since range from -15 - 15, or 0 to 30 for our unsigned\n            return 15;\n        }\n        // Get the current sampleValue\n        var sample = 1;\n        if (!isDutyCycleClockPositiveOrNegativeForWaveform(Channel2.NRx1Duty, Channel2.waveFormPositionOnDuty)) {\n            sample = -sample;\n        }\n        sample = sample * outputVolume;\n        // Square Waves Can range from -15 - 15. Therefore simply add 15\n        sample += 15;\n        return sample;\n    };\n    //http://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware#Trigger_Event\n    Channel2.trigger = function () {\n        Channel2.isEnabled = true;\n        if (Channel2.lengthCounter === 0) {\n            Channel2.lengthCounter = 64;\n        }\n        // Reset our timer\n        // A square channel's frequency timer period is set to (2048-frequency)*4.\n        // Four duty cycles are available, each waveform taking 8 frequency timer clocks to cycle through:\n        Channel2.resetTimer();\n        Channel2.envelopeCounter = Channel2.NRx2EnvelopePeriod;\n        Channel2.volume = Channel2.NRx2StartingVolume;\n        // Finally if DAC is off, channel is still disabled\n        if (!Channel2.isDacEnabled) {\n            Channel2.isEnabled = false;\n        }\n    };\n    // Function to determine if the current channel would update when getting the sample\n    // This is used to accumulate samples\n    Channel2.willChannelUpdate = function (numberOfCycles) {\n        //Increment our cycle counter\n        var cycleCounter = Channel2.cycleCounter + numberOfCycles;\n        Channel2.cycleCounter = cycleCounter;\n        // Dac enabled status cached by accumulator\n        return !(Channel2.frequencyTimer - cycleCounter > 0);\n    };\n    Channel2.updateLength = function () {\n        var lengthCounter = Channel2.lengthCounter;\n        if (lengthCounter > 0 && Channel2.NRx4LengthEnabled) {\n            lengthCounter -= 1;\n        }\n        if (lengthCounter === 0) {\n            Channel2.isEnabled = false;\n        }\n        Channel2.lengthCounter = lengthCounter;\n    };\n    Channel2.updateEnvelope = function () {\n        // Obscure behavior\n        // TODO: The volume envelope and sweep timers treat a period of 0 as 8.\n        var envelopeCounter = Channel2.envelopeCounter - 1;\n        if (envelopeCounter <= 0) {\n            envelopeCounter = Channel2.NRx2EnvelopePeriod;\n            // When the timer generates a clock and the envelope period is NOT zero, a new volume is calculated\n            // NOTE: There is some weiirrdd obscure behavior where zero can equal 8, so watch out for that\n            if (envelopeCounter !== 0) {\n                var volume = Channel2.volume;\n                if (Channel2.NRx2EnvelopeAddMode && volume < 15) {\n                    volume += 1;\n                }\n                else if (!Channel2.NRx2EnvelopeAddMode && volume > 0) {\n                    volume -= 1;\n                }\n                Channel2.volume = volume;\n            }\n        }\n        Channel2.envelopeCounter = envelopeCounter;\n    };\n    Channel2.setFrequency = function (frequency) {\n        // Get the high and low bits\n        var passedFrequencyHighBits = frequency >> 8;\n        var passedFrequencyLowBits = frequency & 0xff;\n        // Get the new register 4\n        var register4 = eightBitLoadFromGBMemory(Channel2.memoryLocationNRx4);\n        // Knock off lower 3 bits, and Or on our high bits\n        var newRegister4 = register4 & 0xf8;\n        newRegister4 = newRegister4 | passedFrequencyHighBits;\n        // Set the registers\n        eightBitStoreIntoGBMemory(Channel2.memoryLocationNRx3, passedFrequencyLowBits);\n        eightBitStoreIntoGBMemory(Channel2.memoryLocationNRx4, newRegister4);\n        // Save the frequency for ourselves without triggering memory traps\n        Channel2.NRx3FrequencyLSB = passedFrequencyLowBits;\n        Channel2.NRx4FrequencyMSB = passedFrequencyHighBits;\n        Channel2.frequency = (passedFrequencyHighBits << 8) | passedFrequencyLowBits;\n    };\n    // Cycle Counter for our sound accumulator\n    Channel2.cycleCounter = 0;\n    // Squarewave channel with volume envelope functions only.\n    // NR21 -> Sound length/Wave pattern duty (R/W)\n    Channel2.memoryLocationNRx1 = 0xff16;\n    // DDLL LLLL Duty, Length load (64-L)\n    Channel2.NRx1Duty = 0;\n    Channel2.NRx1LengthLoad = 0;\n    // NR22 -> Volume Envelope (R/W)\n    Channel2.memoryLocationNRx2 = 0xff17;\n    // VVVV APPP Starting volume, Envelope add mode, period\n    Channel2.NRx2StartingVolume = 0;\n    Channel2.NRx2EnvelopeAddMode = false;\n    Channel2.NRx2EnvelopePeriod = 0;\n    // NR23 -> Frequency lo (W)\n    Channel2.memoryLocationNRx3 = 0xff18;\n    // FFFF FFFF Frequency LSB\n    Channel2.NRx3FrequencyLSB = 0;\n    // NR24 -> Frequency hi (R/W)\n    Channel2.memoryLocationNRx4 = 0xff19;\n    // TL-- -FFF Trigger, Length enable, Frequency MSB\n    Channel2.NRx4LengthEnabled = false;\n    Channel2.NRx4FrequencyMSB = 0;\n    // Channel Properties\n    Channel2.channelNumber = 2;\n    Channel2.isEnabled = false;\n    Channel2.isDacEnabled = false;\n    Channel2.frequency = 0;\n    Channel2.frequencyTimer = 0x00;\n    Channel2.envelopeCounter = 0x00;\n    Channel2.lengthCounter = 0x00;\n    Channel2.volume = 0x00;\n    // Square Wave properties\n    Channel2.dutyCycle = 0x00;\n    Channel2.waveFormPositionOnDuty = 0x00;\n    // Save States\n    Channel2.saveStateSlot = 8;\n    return Channel2;\n}());\n\n// NOTE: Tons of Copy-pasta btween channels, because Classes cannot be instantiated yet in assemblyscript\nvar Channel3 = /** @class */ (function () {\n    function Channel3() {\n    }\n    // E--- ---- DAC power\n    Channel3.updateNRx0 = function (value) {\n        Channel3.isDacEnabled = checkBitOnByte(7, value);\n    };\n    Channel3.updateNRx1 = function (value) {\n        Channel3.NRx1LengthLoad = value;\n        // Also need to set our length counter. Taken from the old, setChannelLengthCounter\n        // Channel length is determined by 64 (or 256 if channel 3), - the length load\n        // http://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware#Registers\n        // Note, this will be different for channel 3\n        // Supposed to be 256, so subtracting 255 and then adding 1 if that makes sense\n        Channel3.lengthCounter = 256 - Channel3.NRx1LengthLoad;\n    };\n    Channel3.updateNRx2 = function (value) {\n        Channel3.NRx2VolumeCode = (value >> 5) & 0x0f;\n    };\n    Channel3.updateNRx3 = function (value) {\n        Channel3.NRx3FrequencyLSB = value;\n        // Update Channel Frequency\n        Channel3.frequency = (Channel3.NRx4FrequencyMSB << 8) | value;\n    };\n    Channel3.updateNRx4 = function (value) {\n        Channel3.NRx4LengthEnabled = checkBitOnByte(6, value);\n        value &= 0x07;\n        Channel3.NRx4FrequencyMSB = value;\n        // Update Channel Frequency\n        Channel3.frequency = (value << 8) | Channel3.NRx3FrequencyLSB;\n    };\n    // Function to save the state of the class\n    Channel3.saveState = function () {\n        storeBooleanDirectlyToWasmMemory(getSaveStateMemoryOffset(0x00, Channel3.saveStateSlot), Channel3.isEnabled);\n        store(getSaveStateMemoryOffset(0x01, Channel3.saveStateSlot), Channel3.frequencyTimer);\n        store(getSaveStateMemoryOffset(0x05, Channel3.saveStateSlot), Channel3.lengthCounter);\n        store(getSaveStateMemoryOffset(0x09, Channel3.saveStateSlot), Channel3.waveTablePosition);\n    };\n    // Function to load the save state from memory\n    Channel3.loadState = function () {\n        Channel3.isEnabled = loadBooleanDirectlyFromWasmMemory(getSaveStateMemoryOffset(0x00, Channel3.saveStateSlot));\n        Channel3.frequencyTimer = load(getSaveStateMemoryOffset(0x01, Channel3.saveStateSlot));\n        Channel3.lengthCounter = load(getSaveStateMemoryOffset(0x05, Channel3.saveStateSlot));\n        Channel3.waveTablePosition = load(getSaveStateMemoryOffset(0x09, Channel3.saveStateSlot));\n    };\n    Channel3.initialize = function () {\n        eightBitStoreIntoGBMemory(Channel3.memoryLocationNRx0, 0x7f);\n        eightBitStoreIntoGBMemory(Channel3.memoryLocationNRx1, 0xff);\n        eightBitStoreIntoGBMemory(Channel3.memoryLocationNRx2, 0x9f);\n        eightBitStoreIntoGBMemory(Channel3.memoryLocationNRx3, 0x00);\n        eightBitStoreIntoGBMemory(Channel3.memoryLocationNRx4, 0xb8);\n        // The volume code changed\n        Channel3.volumeCodeChanged = true;\n    };\n    // Function to get a sample using the cycle counter on the channel\n    Channel3.getSampleFromCycleCounter = function () {\n        var accumulatedCycles = Channel3.cycleCounter;\n        Channel3.cycleCounter = 0;\n        return Channel3.getSample(accumulatedCycles);\n    };\n    // Function to reset our timer, useful for GBC double speed mode\n    Channel3.resetTimer = function () {\n        var frequencyTimer = (2048 - Channel3.frequency) << 1;\n        // TODO: Ensure this is correct for GBC Double Speed Mode\n        Channel3.frequencyTimer = frequencyTimer << Cpu.GBCDoubleSpeed;\n    };\n    Channel3.getSample = function (numberOfCycles) {\n        // Decrement our channel timer\n        var frequencyTimer = Channel3.frequencyTimer;\n        frequencyTimer -= numberOfCycles;\n        if (frequencyTimer <= 0) {\n            // Get the amount that overflowed so we don't drop cycles\n            var overflowAmount = abs(frequencyTimer);\n            Channel3.frequencyTimer = frequencyTimer;\n            // Reset our timer\n            // A wave channel's frequency timer period is set to (2048-frequency) * 2.\n            // http://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware#Wave_Channel\n            Channel3.resetTimer();\n            Channel3.frequencyTimer -= overflowAmount;\n            // Advance the wave table position, and loop back if needed\n            Channel3.waveTablePosition = (Channel3.waveTablePosition + 1) & 31;\n        }\n        else {\n            Channel3.frequencyTimer = frequencyTimer;\n        }\n        // Get our output volume\n        var volumeCode = Channel3.volumeCode;\n        // Finally to set our output volume, the channel must be enabled,\n        // Our channel DAC must be enabled, and we must be in an active state\n        // Of our duty cycle\n        if (Channel3.isEnabled && Channel3.isDacEnabled) {\n            // Get our volume code\n            if (Channel3.volumeCodeChanged) {\n                volumeCode = eightBitLoadFromGBMemory(Channel3.memoryLocationNRx2);\n                volumeCode = volumeCode >> 5;\n                volumeCode = volumeCode & 0x0f;\n                Channel3.volumeCode = volumeCode;\n                Channel3.volumeCodeChanged = false;\n            }\n        }\n        else {\n            // Return silence\n            // Since range from -15 - 15, or 0 to 30 for our unsigned\n            return 15;\n        }\n        // Get the current sample\n        var sample = 0;\n        // Will Find the position, and knock off any remainder\n        var waveTablePosition = Channel3.waveTablePosition;\n        var positionIndexToAdd = i32Portable(waveTablePosition >> 1);\n        var memoryLocationWaveSample = Channel3.memoryLocationWaveTable + positionIndexToAdd;\n        sample = eightBitLoadFromGBMemory(memoryLocationWaveSample);\n        // Need to grab the top or lower half for the correct sample\n        sample >>= ((waveTablePosition & 1) === 0) << 2;\n        sample &= 0x0f;\n        // Shift our sample and set our volume depending on the volume code\n        // Since we can't multiply by float, simply divide by 4, 2, 1\n        // http://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware#Wave_Channel\n        var outputVolume = 0;\n        switch (volumeCode) {\n            case 0:\n                sample >>= 4;\n                break;\n            case 1:\n                // Dont Shift sample\n                outputVolume = 1;\n                break;\n            case 2:\n                sample >>= 1;\n                outputVolume = 2;\n                break;\n            default:\n                sample >>= 2;\n                outputVolume = 4;\n                break;\n        }\n        // Spply out output volume\n        sample = outputVolume > 0 ? sample / outputVolume : 0;\n        // Square Waves Can range from -15 - 15. Therefore simply add 15\n        sample += 15;\n        return sample;\n    };\n    //http://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware#Trigger_Event\n    Channel3.trigger = function () {\n        Channel3.isEnabled = true;\n        if (Channel3.lengthCounter === 0) {\n            Channel3.lengthCounter = 256;\n        }\n        // Reset our timer\n        // A wave channel's frequency timer period is set to (2048-frequency)*2.\n        Channel3.resetTimer();\n        // Reset our wave table position\n        Channel3.waveTablePosition = 0;\n        // Finally if DAC is off, channel is still disabled\n        if (!Channel3.isDacEnabled) {\n            Channel3.isEnabled = false;\n        }\n    };\n    // Function to determine if the current channel would update when getting the sample\n    // This is used to accumulate samples\n    Channel3.willChannelUpdate = function (numberOfCycles) {\n        //Increment our cycle counter\n        Channel3.cycleCounter += numberOfCycles;\n        // Dac enabled status cached by accumulator\n        return !(!Channel3.volumeCodeChanged && Channel3.frequencyTimer - Channel3.cycleCounter > 0);\n    };\n    Channel3.updateLength = function () {\n        var lengthCounter = Channel3.lengthCounter;\n        if (lengthCounter > 0 && Channel3.NRx4LengthEnabled) {\n            lengthCounter -= 1;\n        }\n        if (lengthCounter === 0) {\n            Channel3.isEnabled = false;\n        }\n        Channel3.lengthCounter = lengthCounter;\n    };\n    // Cycle Counter for our sound accumulator\n    Channel3.cycleCounter = 0;\n    // Voluntary Wave channel with 32 4-bit programmable samples, played in sequence.\n    // NR30 -> Sound on/off (R/W)\n    Channel3.memoryLocationNRx0 = 0xff1a;\n    // NR31 -> Sound length (R/W)\n    Channel3.memoryLocationNRx1 = 0xff1b;\n    // LLLL LLLL Length load (256-L)\n    Channel3.NRx1LengthLoad = 0;\n    // NR32 -> Select ouput level (R/W)\n    Channel3.memoryLocationNRx2 = 0xff1c;\n    // -VV- ---- Volume code (00=0%, 01=100%, 10=50%, 11=25%)\n    Channel3.NRx2VolumeCode = 0;\n    // NR33 -> Frequency lower data (W)\n    Channel3.memoryLocationNRx3 = 0xff1d;\n    // FFFF FFFF Frequency LSB\n    Channel3.NRx3FrequencyLSB = 0;\n    // NR34 -> Frequency higher data (R/W)\n    Channel3.memoryLocationNRx4 = 0xff1e;\n    // TL-- -FFF Trigger, Length enable, Frequency MSB\n    Channel3.NRx4LengthEnabled = false;\n    Channel3.NRx4FrequencyMSB = 0;\n    // Our wave table location\n    Channel3.memoryLocationWaveTable = 0xff30;\n    // Channel Properties\n    Channel3.channelNumber = 3;\n    Channel3.isEnabled = false;\n    Channel3.isDacEnabled = false;\n    Channel3.frequency = 0;\n    Channel3.frequencyTimer = 0x00;\n    Channel3.lengthCounter = 0x00;\n    Channel3.waveTablePosition = 0x00;\n    Channel3.volumeCode = 0x00;\n    Channel3.volumeCodeChanged = false;\n    // Save States\n    Channel3.saveStateSlot = 9;\n    return Channel3;\n}());\n\n// NOTE: Tons of Copy-pasta btween channels, because Classes cannot be instantiated yet in assemblyscript\nvar Channel4 = /** @class */ (function () {\n    function Channel4() {\n    }\n    Channel4.updateNRx1 = function (value) {\n        Channel4.NRx1LengthLoad = value & 0x3f;\n        // Also need to set our length counter. Taken from the old, setChannelLengthCounter\n        // Channel length is determined by 64 (or 256 if channel 3), - the length load\n        // http://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware#Registers\n        // Note, this will be different for channel 3\n        Channel4.lengthCounter = 64 - Channel4.NRx1LengthLoad;\n    };\n    Channel4.updateNRx2 = function (value) {\n        Channel4.NRx2StartingVolume = (value >> 4) & 0x0f;\n        Channel4.NRx2EnvelopeAddMode = checkBitOnByte(3, value);\n        Channel4.NRx2EnvelopePeriod = value & 0x07;\n        // Also, get our channel is dac enabled\n        Channel4.isDacEnabled = (value & 0xf8) > 0;\n    };\n    Channel4.updateNRx3 = function (value) {\n        var divisorCode = value & 0x07;\n        Channel4.NRx3ClockShift = value >> 4;\n        Channel4.NRx3WidthMode = checkBitOnByte(3, value);\n        Channel4.NRx3DivisorCode = divisorCode;\n        // Also, get our divisor\n        divisorCode <<= 1;\n        if (divisorCode < 1)\n            divisorCode = 1;\n        Channel4.divisor = divisorCode << 3;\n    };\n    Channel4.updateNRx4 = function (value) {\n        Channel4.NRx4LengthEnabled = checkBitOnByte(6, value);\n    };\n    // Function to save the state of the class\n    Channel4.saveState = function () {\n        storeBooleanDirectlyToWasmMemory(getSaveStateMemoryOffset(0x00, Channel4.saveStateSlot), Channel4.isEnabled);\n        store(getSaveStateMemoryOffset(0x01, Channel4.saveStateSlot), Channel4.frequencyTimer);\n        store(getSaveStateMemoryOffset(0x05, Channel4.saveStateSlot), Channel4.envelopeCounter);\n        store(getSaveStateMemoryOffset(0x09, Channel4.saveStateSlot), Channel4.lengthCounter);\n        store(getSaveStateMemoryOffset(0x0e, Channel4.saveStateSlot), Channel4.volume);\n        store(getSaveStateMemoryOffset(0x13, Channel4.saveStateSlot), Channel4.linearFeedbackShiftRegister);\n    };\n    // Function to load the save state from memory\n    Channel4.loadState = function () {\n        Channel4.isEnabled = loadBooleanDirectlyFromWasmMemory(getSaveStateMemoryOffset(0x00, Channel4.saveStateSlot));\n        Channel4.frequencyTimer = load(getSaveStateMemoryOffset(0x01, Channel4.saveStateSlot));\n        Channel4.envelopeCounter = load(getSaveStateMemoryOffset(0x05, Channel4.saveStateSlot));\n        Channel4.lengthCounter = load(getSaveStateMemoryOffset(0x09, Channel4.saveStateSlot));\n        Channel4.volume = load(getSaveStateMemoryOffset(0x0e, Channel4.saveStateSlot));\n        Channel4.linearFeedbackShiftRegister = load(getSaveStateMemoryOffset(0x13, Channel4.saveStateSlot));\n    };\n    Channel4.initialize = function () {\n        eightBitStoreIntoGBMemory(Channel4.memoryLocationNRx1 - 1, 0xff);\n        eightBitStoreIntoGBMemory(Channel4.memoryLocationNRx1, 0xff);\n        eightBitStoreIntoGBMemory(Channel4.memoryLocationNRx2, 0x00);\n        eightBitStoreIntoGBMemory(Channel4.memoryLocationNRx3, 0x00);\n        eightBitStoreIntoGBMemory(Channel4.memoryLocationNRx4, 0xbf);\n    };\n    // Function to get a sample using the cycle counter on the channel\n    Channel4.getSampleFromCycleCounter = function () {\n        var accumulatedCycles = Channel4.cycleCounter;\n        Channel4.cycleCounter = 0;\n        return Channel4.getSample(accumulatedCycles);\n    };\n    Channel4.getSample = function (numberOfCycles) {\n        // Decrement our channel timer\n        var frequencyTimer = Channel4.frequencyTimer;\n        frequencyTimer -= numberOfCycles;\n        if (frequencyTimer <= 0) {\n            // Get the amount that overflowed so we don't drop cycles\n            var overflowAmount = abs(frequencyTimer);\n            // Reset our timer\n            frequencyTimer = Channel4.getNoiseChannelFrequencyPeriod();\n            frequencyTimer -= overflowAmount;\n            // Do some cool stuff with lfsr\n            // http://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware#Noise_Channel\n            // First XOR bit zero and one\n            var linearFeedbackShiftRegister = Channel4.linearFeedbackShiftRegister;\n            var lfsrBitZero = linearFeedbackShiftRegister & 0x01;\n            var lfsrBitOne = linearFeedbackShiftRegister >> 1;\n            lfsrBitOne = lfsrBitOne & 0x01;\n            var xorLfsrBitZeroOne = lfsrBitZero ^ lfsrBitOne;\n            // Shift all lsfr bits by one\n            linearFeedbackShiftRegister = linearFeedbackShiftRegister >> 1;\n            // Place the XOR result on bit 15\n            linearFeedbackShiftRegister = linearFeedbackShiftRegister | (xorLfsrBitZeroOne << 14);\n            // If the width mode is set, set xor on bit 6, and make lfsr 7 bit\n            if (Channel4.NRx3WidthMode) {\n                // Make 7 bit, by knocking off lower bits. Want to keeps bits 8 - 16, and then or on 7\n                linearFeedbackShiftRegister = linearFeedbackShiftRegister & ~0x40;\n                linearFeedbackShiftRegister = linearFeedbackShiftRegister | (xorLfsrBitZeroOne << 6);\n            }\n            Channel4.linearFeedbackShiftRegister = linearFeedbackShiftRegister;\n        }\n        Channel4.frequencyTimer = frequencyTimer;\n        // Get our ourput volume, set to zero for silence\n        var outputVolume = 0;\n        // Finally to set our output volume, the channel must be enabled,\n        // Our channel DAC must be enabled, and we must be in an active state\n        // Of our duty cycle\n        if (Channel4.isEnabled && Channel4.isDacEnabled) {\n            outputVolume = Channel4.volume;\n        }\n        else {\n            // Return silence\n            // Since range from -15 - 15, or 0 to 30 for our unsigned\n            return 15;\n        }\n        // Declare our sample\n        var sample = 0;\n        // Wave form output is bit zero of lfsr, INVERTED\n        sample = !checkBitOnByte(0, Channel4.linearFeedbackShiftRegister) ? 1 : -1;\n        sample = sample * outputVolume;\n        // Noise Can range from -15 - 15. Therefore simply add 15\n        sample = sample + 15;\n        return sample;\n    };\n    //http://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware#Trigger_Event\n    Channel4.trigger = function () {\n        Channel4.isEnabled = true;\n        if (Channel4.lengthCounter === 0) {\n            Channel4.lengthCounter = 64;\n        }\n        // Reset our timers\n        Channel4.frequencyTimer = Channel4.getNoiseChannelFrequencyPeriod();\n        Channel4.envelopeCounter = Channel4.NRx2EnvelopePeriod;\n        Channel4.volume = Channel4.NRx2StartingVolume;\n        // Noise channel's LFSR bits are all set to 1.\n        Channel4.linearFeedbackShiftRegister = 0x7fff;\n        // Finally if DAC is off, channel is still disabled\n        if (!Channel4.isDacEnabled) {\n            Channel4.isEnabled = false;\n        }\n    };\n    // Function to determine if the current channel would update when getting the sample\n    // This is used to accumulate samples\n    Channel4.willChannelUpdate = function (numberOfCycles) {\n        //Increment our cycle counter\n        Channel4.cycleCounter += numberOfCycles;\n        // Dac enabled status cached by accumulator\n        return !(Channel4.frequencyTimer - Channel4.cycleCounter > 0);\n    };\n    Channel4.getNoiseChannelFrequencyPeriod = function () {\n        // Get our divisor from the divisor code, and shift by the clock shift\n        var response = Channel4.divisor << Channel4.NRx3ClockShift;\n        return response << Cpu.GBCDoubleSpeed;\n    };\n    Channel4.updateLength = function () {\n        var lengthCounter = Channel4.lengthCounter;\n        if (lengthCounter > 0 && Channel4.NRx4LengthEnabled) {\n            lengthCounter -= 1;\n        }\n        if (lengthCounter === 0) {\n            Channel4.isEnabled = false;\n        }\n        Channel4.lengthCounter = lengthCounter;\n    };\n    Channel4.updateEnvelope = function () {\n        // Obscure behavior\n        // TODO: The volume envelope and sweep timers treat a period of 0 as 8.\n        var envelopeCounter = Channel4.envelopeCounter - 1;\n        if (envelopeCounter <= 0) {\n            envelopeCounter = Channel4.NRx2EnvelopePeriod;\n            // When the timer generates a clock and the envelope period is NOT zero, a new volume is calculated\n            // NOTE: There is some weiirrdd obscure behavior where zero can equal 8, so watch out for that\n            if (envelopeCounter !== 0) {\n                var volume = Channel4.volume;\n                if (Channel4.NRx2EnvelopeAddMode && volume < 15) {\n                    volume += 1;\n                }\n                else if (!Channel4.NRx2EnvelopeAddMode && volume > 0) {\n                    volume -= 1;\n                }\n                Channel4.volume = volume;\n            }\n        }\n        Channel4.envelopeCounter = envelopeCounter;\n    };\n    // Cycle Counter for our sound accumulator\n    Channel4.cycleCounter = 0;\n    // Channel 4\n    // 'white noise' channel with volume envelope functions.\n    // NR41 -> Sound length (R/W)\n    Channel4.memoryLocationNRx1 = 0xff20;\n    // --LL LLLL Length load (64-L)\n    Channel4.NRx1LengthLoad = 0;\n    // NR42 -> Volume Envelope (R/W)\n    Channel4.memoryLocationNRx2 = 0xff21;\n    // VVVV APPP Starting volume, Envelope add mode, period\n    Channel4.NRx2StartingVolume = 0;\n    Channel4.NRx2EnvelopeAddMode = false;\n    Channel4.NRx2EnvelopePeriod = 0;\n    // NR43 -> Polynomial Counter (R/W)\n    Channel4.memoryLocationNRx3 = 0xff22;\n    // SSSS WDDD Clock shift, Width mode of LFSR, Divisor code\n    Channel4.NRx3ClockShift = 0;\n    Channel4.NRx3WidthMode = false;\n    Channel4.NRx3DivisorCode = 0;\n    // NR44 -> Trigger, Length Enable\n    Channel4.memoryLocationNRx4 = 0xff23;\n    // TL-- ---- Trigger, Length enable\n    Channel4.NRx4LengthEnabled = false;\n    // Channel Properties\n    Channel4.channelNumber = 4;\n    Channel4.isEnabled = false;\n    Channel4.isDacEnabled = false;\n    Channel4.frequencyTimer = 0x00;\n    Channel4.envelopeCounter = 0x00;\n    Channel4.lengthCounter = 0x00;\n    Channel4.volume = 0x00;\n    Channel4.divisor = 0;\n    // Noise properties\n    // NOTE: Is only 15 bits\n    Channel4.linearFeedbackShiftRegister = 0x00;\n    // Save States\n    Channel4.saveStateSlot = 10;\n    return Channel4;\n}());\n\n// Another class simply for accumulating samples\n// Default everything to silence\nvar SoundAccumulator = /** @class */ (function () {\n    function SoundAccumulator() {\n    }\n    SoundAccumulator.channel1Sample = 15;\n    SoundAccumulator.channel2Sample = 15;\n    SoundAccumulator.channel3Sample = 15;\n    SoundAccumulator.channel4Sample = 15;\n    SoundAccumulator.channel1DacEnabled = false;\n    SoundAccumulator.channel2DacEnabled = false;\n    SoundAccumulator.channel3DacEnabled = false;\n    SoundAccumulator.channel4DacEnabled = false;\n    SoundAccumulator.leftChannelSampleUnsignedByte = 127;\n    SoundAccumulator.rightChannelSampleUnsignedByte = 127;\n    SoundAccumulator.mixerVolumeChanged = false;\n    SoundAccumulator.mixerEnabledChanged = false;\n    //If a channel was updated, need to also track if we need to need to mix them again\n    SoundAccumulator.needToRemixSamples = false;\n    return SoundAccumulator;\n}());\n// Inlined because closure compiler inlines\nfunction initializeSoundAccumulator() {\n    SoundAccumulator.channel1Sample = 15;\n    SoundAccumulator.channel2Sample = 15;\n    SoundAccumulator.channel3Sample = 15;\n    SoundAccumulator.channel4Sample = 15;\n    SoundAccumulator.channel1DacEnabled = false;\n    SoundAccumulator.channel2DacEnabled = false;\n    SoundAccumulator.channel3DacEnabled = false;\n    SoundAccumulator.channel4DacEnabled = false;\n    SoundAccumulator.leftChannelSampleUnsignedByte = 127;\n    SoundAccumulator.rightChannelSampleUnsignedByte = 127;\n    SoundAccumulator.mixerVolumeChanged = true;\n    SoundAccumulator.mixerEnabledChanged = true;\n    SoundAccumulator.needToRemixSamples = false;\n}\n// Inlined because closure compiler inlines\nfunction accumulateSound(numberOfCycles) {\n    // Check if any of the individual channels will update\n    var channel1WillUpdate = Channel1.willChannelUpdate(numberOfCycles) || didChannelDacChange(Channel1.channelNumber);\n    var channel2WillUpdate = Channel2.willChannelUpdate(numberOfCycles) || didChannelDacChange(Channel2.channelNumber);\n    var channel3WillUpdate = Channel3.willChannelUpdate(numberOfCycles) || didChannelDacChange(Channel3.channelNumber);\n    var channel4WillUpdate = Channel4.willChannelUpdate(numberOfCycles) || didChannelDacChange(Channel4.channelNumber);\n    if (channel1WillUpdate) {\n        SoundAccumulator.channel1Sample = Channel1.getSampleFromCycleCounter();\n    }\n    if (channel2WillUpdate) {\n        SoundAccumulator.channel2Sample = Channel2.getSampleFromCycleCounter();\n    }\n    if (channel3WillUpdate) {\n        SoundAccumulator.channel3Sample = Channel3.getSampleFromCycleCounter();\n    }\n    if (channel4WillUpdate) {\n        SoundAccumulator.channel4Sample = Channel4.getSampleFromCycleCounter();\n    }\n    // If any channel updated, we need to re-mix our samples\n    if (channel1WillUpdate || channel2WillUpdate || channel3WillUpdate || channel4WillUpdate) {\n        SoundAccumulator.needToRemixSamples = true;\n    }\n    // Do Some downsampling magic\n    var downSampleCycleCounter = Sound.downSampleCycleCounter;\n    downSampleCycleCounter += numberOfCycles * Sound.downSampleCycleMultiplier;\n    var maxDownSampleCycles = Sound.maxDownSampleCycles();\n    if (downSampleCycleCounter >= maxDownSampleCycles) {\n        // Reset the downsample counter\n        // Don't set to zero to catch overflowed cycles\n        downSampleCycleCounter -= maxDownSampleCycles;\n        Sound.downSampleCycleCounter = downSampleCycleCounter;\n        if (SoundAccumulator.needToRemixSamples || SoundAccumulator.mixerVolumeChanged || SoundAccumulator.mixerEnabledChanged) {\n            mixChannelSamples(SoundAccumulator.channel1Sample, SoundAccumulator.channel2Sample, SoundAccumulator.channel3Sample, SoundAccumulator.channel4Sample);\n        }\n        else {\n            Sound.downSampleCycleCounter = downSampleCycleCounter;\n        }\n        // Finally Simply place the accumulated sample in memory\n        // Set our volumes in memory\n        // +1 so it can not be zero\n        setLeftAndRightOutputForAudioQueue(SoundAccumulator.leftChannelSampleUnsignedByte + 1, SoundAccumulator.rightChannelSampleUnsignedByte + 1, AUDIO_BUFFER_LOCATION);\n        var audioQueueIndex = Sound.audioQueueIndex + 1;\n        // Don't allow our audioQueueIndex to overflow into other parts of the wasmBoy memory map\n        // https://docs.google.com/spreadsheets/d/17xrEzJk5-sCB9J2mMJcVnzhbE-XH_NvczVSQH9OHvRk/edit#gid=0\n        // Not 0xFFFF because we need half of 64kb since we store left and right channel\n        var maxIndex = i32Portable(Sound.wasmBoyMemoryMaxBufferSize >> 1) - 1;\n        if (audioQueueIndex >= maxIndex) {\n            audioQueueIndex -= 1;\n        }\n        Sound.audioQueueIndex = audioQueueIndex;\n    }\n}\n// Function used by SoundAccumulator to find out if a channel Dac Changed\nfunction didChannelDacChange(channelNumber) {\n    switch (channelNumber) {\n        case Channel1.channelNumber: {\n            var isDacEnabled = Channel1.isDacEnabled;\n            var channel1Enabled = SoundAccumulator.channel1DacEnabled !== isDacEnabled;\n            SoundAccumulator.channel1DacEnabled = isDacEnabled;\n            return channel1Enabled;\n        }\n        case Channel2.channelNumber: {\n            var isDacEnabled = Channel2.isDacEnabled;\n            var channel2Enabled = SoundAccumulator.channel2DacEnabled !== isDacEnabled;\n            SoundAccumulator.channel2DacEnabled = isDacEnabled;\n            return channel2Enabled;\n        }\n        case Channel3.channelNumber: {\n            var isDacEnabled = Channel3.isDacEnabled;\n            var channel3Enabled = SoundAccumulator.channel3DacEnabled !== isDacEnabled;\n            SoundAccumulator.channel3DacEnabled = isDacEnabled;\n            return channel3Enabled;\n        }\n        case Channel4.channelNumber: {\n            var isDacEnabled = Channel4.isDacEnabled;\n            var channel4Enabled = SoundAccumulator.channel4DacEnabled !== isDacEnabled;\n            SoundAccumulator.channel4DacEnabled = isDacEnabled;\n            return channel4Enabled;\n        }\n    }\n    return false;\n}\n\n// https://emu-docs.org/Game%20Boy/gb_sound.txt\nvar Sound = /** @class */ (function () {\n    function Sound() {\n    }\n    // Number of cycles to run in each batch process\n    // This number should be in sync so that sound doesn't run too many cyles at once\n    // and does not exceed the minimum number of cyles for either down sampling, or\n    // How often we change the frame, or a channel's update process\n    Sound.batchProcessCycles = function () {\n        // return Cpu.GBCDoubleSpeed ? 174 : 87;\n        return 87 << Cpu.GBCDoubleSpeed;\n    };\n    Sound.updateNR50 = function (value) {\n        Sound.NR50LeftMixerVolume = (value >> 4) & 0x07;\n        Sound.NR50RightMixerVolume = value & 0x07;\n    };\n    Sound.updateNR51 = function (value) {\n        Sound.NR51IsChannel4EnabledOnLeftOutput = checkBitOnByte(7, value);\n        Sound.NR51IsChannel3EnabledOnLeftOutput = checkBitOnByte(6, value);\n        Sound.NR51IsChannel2EnabledOnLeftOutput = checkBitOnByte(5, value);\n        Sound.NR51IsChannel1EnabledOnLeftOutput = checkBitOnByte(4, value);\n        Sound.NR51IsChannel4EnabledOnRightOutput = checkBitOnByte(3, value);\n        Sound.NR51IsChannel3EnabledOnRightOutput = checkBitOnByte(2, value);\n        Sound.NR51IsChannel2EnabledOnRightOutput = checkBitOnByte(1, value);\n        Sound.NR51IsChannel1EnabledOnRightOutput = checkBitOnByte(0, value);\n    };\n    Sound.updateNR52 = function (value) {\n        Sound.NR52IsSoundEnabled = checkBitOnByte(7, value);\n    };\n    Sound.maxFrameSequenceCycles = function () {\n        // return Cpu.GBCDoubleSpeed ? 16384 : 8192;\n        return 8192 << Cpu.GBCDoubleSpeed;\n    };\n    Sound.maxDownSampleCycles = function () {\n        return Cpu.CLOCK_SPEED();\n    };\n    // Function to save the state of the class\n    Sound.saveState = function () {\n        store(getSaveStateMemoryOffset(0x00, Sound.saveStateSlot), Sound.frameSequenceCycleCounter);\n        store(getSaveStateMemoryOffset(0x04, Sound.saveStateSlot), Sound.downSampleCycleCounter);\n        store(getSaveStateMemoryOffset(0x05, Sound.saveStateSlot), Sound.frameSequencer);\n    };\n    // Function to load the save state from memory\n    Sound.loadState = function () {\n        Sound.frameSequenceCycleCounter = load(getSaveStateMemoryOffset(0x00, Sound.saveStateSlot));\n        Sound.downSampleCycleCounter = load(getSaveStateMemoryOffset(0x04, Sound.saveStateSlot));\n        Sound.frameSequencer = load(getSaveStateMemoryOffset(0x05, Sound.saveStateSlot));\n        clearAudioBuffer();\n    };\n    // Current cycles\n    // This will be used for batch processing\n    // https://github.com/binji/binjgb/commit/e028f45e805bc0b0aa4697224a209f9ae514c954\n    // TODO: May Also need to do this for Reads\n    Sound.currentCycles = 0;\n    // Channel control / On-OFF / Volume (RW)\n    Sound.memoryLocationNR50 = 0xff24;\n    Sound.NR50LeftMixerVolume = 0;\n    Sound.NR50RightMixerVolume = 0;\n    // 0xFF25 selects which output each channel goes to, Referred to as NR51\n    Sound.memoryLocationNR51 = 0xff25;\n    Sound.NR51IsChannel1EnabledOnLeftOutput = true;\n    Sound.NR51IsChannel2EnabledOnLeftOutput = true;\n    Sound.NR51IsChannel3EnabledOnLeftOutput = true;\n    Sound.NR51IsChannel4EnabledOnLeftOutput = true;\n    Sound.NR51IsChannel1EnabledOnRightOutput = true;\n    Sound.NR51IsChannel2EnabledOnRightOutput = true;\n    Sound.NR51IsChannel3EnabledOnRightOutput = true;\n    Sound.NR51IsChannel4EnabledOnRightOutput = true;\n    // Sound on/off\n    Sound.memoryLocationNR52 = 0xff26;\n    Sound.NR52IsSoundEnabled = true;\n    // $FF30 -- $FF3F is the load register space for the 4-bit samples for channel 3\n    Sound.memoryLocationChannel3LoadRegisterStart = 0xff30;\n    // Need to count how often we need to increment our frame sequencer\n    // Which you can read about below\n    Sound.frameSequenceCycleCounter = 0x0000;\n    // Also need to downsample our audio to average audio qualty\n    // https://www.reddit.com/r/EmuDev/comments/5gkwi5/gb_apu_sound_emulation/\n    // Want to do 48000hz, so CpuRate / Sound Rate, 4194304 / 48000 ~ 87 cycles\n    Sound.downSampleCycleCounter = 0x00;\n    Sound.downSampleCycleMultiplier = 48000;\n    // Frame sequencer controls what should be updated and and ticked\n    // Every time the sound is updated :) It is updated everytime the\n    // Cycle counter reaches the max cycle\n    Sound.frameSequencer = 0x00;\n    // Our current sample number we are passing back to the wasmboy memory map\n    // Found that a static number of samples doesn't work well on mobile\n    // Will just update the queue index, grab as much as we can whenever we need more audio, then reset\n    // NOTE: Giving a really large sample rate gives more latency, but less pops!\n    //static readonly MAX_NUMBER_OF_SAMPLES: i32 = 4096;\n    Sound.audioQueueIndex = 0x0000;\n    Sound.wasmBoyMemoryMaxBufferSize = 0x20000;\n    // Save States\n    Sound.saveStateSlot = 6;\n    return Sound;\n}());\n// Initialize sound registers\n// From: https://emu-docs.org/Game%20Boy/gb_sound.txt\n// Inlined because closure compiler inlines\nfunction initializeSound() {\n    // Reset Stateful variables\n    Sound.currentCycles = 0;\n    Sound.NR50LeftMixerVolume = 0;\n    Sound.NR50RightMixerVolume = 0;\n    Sound.NR51IsChannel1EnabledOnLeftOutput = true;\n    Sound.NR51IsChannel2EnabledOnLeftOutput = true;\n    Sound.NR51IsChannel3EnabledOnLeftOutput = true;\n    Sound.NR51IsChannel4EnabledOnLeftOutput = true;\n    Sound.NR51IsChannel1EnabledOnRightOutput = true;\n    Sound.NR51IsChannel2EnabledOnRightOutput = true;\n    Sound.NR51IsChannel3EnabledOnRightOutput = true;\n    Sound.NR51IsChannel4EnabledOnRightOutput = true;\n    Sound.NR52IsSoundEnabled = true;\n    Sound.frameSequenceCycleCounter = 0x0000;\n    Sound.downSampleCycleCounter = 0x00;\n    Sound.frameSequencer = 0x00;\n    Sound.audioQueueIndex = 0x0000;\n    // intiialize our channels\n    Channel1.initialize();\n    Channel2.initialize();\n    Channel3.initialize();\n    Channel4.initialize();\n    // Other Sound Registers\n    eightBitStoreIntoGBMemory(Sound.memoryLocationNR50, 0x77);\n    eightBitStoreIntoGBMemory(Sound.memoryLocationNR51, 0xf3);\n    eightBitStoreIntoGBMemory(Sound.memoryLocationNR52, 0xf1);\n    initializeSoundAccumulator();\n}\n// Function to batch process our audio after we skipped so many cycles\nfunction batchProcessAudio() {\n    var batchProcessCycles = Sound.batchProcessCycles();\n    while (Sound.currentCycles >= batchProcessCycles) {\n        updateSound(batchProcessCycles);\n        Sound.currentCycles -= batchProcessCycles;\n    }\n}\n// Function for updating sound\nfunction updateSound(numberOfCycles) {\n    // Check if our frameSequencer updated\n    var frameSequencerUpdated = updateFrameSequencer(numberOfCycles);\n    if (Config.audioAccumulateSamples && !frameSequencerUpdated) {\n        accumulateSound(numberOfCycles);\n    }\n    else {\n        calculateSound(numberOfCycles);\n    }\n}\n// Funciton to get the current Audio Queue index\nfunction getNumberOfSamplesInAudioBuffer() {\n    return Sound.audioQueueIndex;\n}\n// Function to reset the audio queue\nfunction clearAudioBuffer() {\n    Sound.audioQueueIndex = 0;\n}\n// Inlined because closure compiler inlines\nfunction calculateSound(numberOfCycles) {\n    // Update all of our channels\n    // All samples will be returned as 0 to 30\n    // 0 being -1.0, and 30 being 1.0\n    // (see blurb at top)\n    var channel1Sample = i32Portable(Channel1.getSample(numberOfCycles));\n    var channel2Sample = i32Portable(Channel2.getSample(numberOfCycles));\n    var channel3Sample = i32Portable(Channel3.getSample(numberOfCycles));\n    var channel4Sample = i32Portable(Channel4.getSample(numberOfCycles));\n    // TODO: Allow individual channels to be muted\n    // let channel1Sample: i32 = 15;\n    // let channel2Sample: i32 = 15;\n    // let channel3Sample: i32 = 15;\n    // let channel4Sample: i32 = 15;\n    // Save the samples in the accumulator\n    SoundAccumulator.channel1Sample = channel1Sample;\n    SoundAccumulator.channel2Sample = channel2Sample;\n    SoundAccumulator.channel3Sample = channel3Sample;\n    SoundAccumulator.channel4Sample = channel4Sample;\n    // Do Some downsampling magic\n    var downSampleCycleCounter = Sound.downSampleCycleCounter + numberOfCycles * Sound.downSampleCycleMultiplier;\n    if (downSampleCycleCounter >= Sound.maxDownSampleCycles()) {\n        // Reset the downsample counter\n        // Don't set to zero to catch overflowed cycles\n        downSampleCycleCounter -= Sound.maxDownSampleCycles();\n        Sound.downSampleCycleCounter = downSampleCycleCounter;\n        // Mix our samples\n        var mixedSample = mixChannelSamples(channel1Sample, channel2Sample, channel3Sample, channel4Sample);\n        var leftChannelSampleUnsignedByte = splitHighByte(mixedSample);\n        var rightChannelSampleUnsignedByte = splitLowByte(mixedSample);\n        // Set our volumes in memory\n        // +1 so it can not be zero\n        setLeftAndRightOutputForAudioQueue(leftChannelSampleUnsignedByte + 1, rightChannelSampleUnsignedByte + 1, AUDIO_BUFFER_LOCATION);\n        if (Config.enableAudioDebugging) {\n            // Channel 1\n            mixedSample = mixChannelSamples(channel1Sample, 15, 15, 15);\n            leftChannelSampleUnsignedByte = splitHighByte(mixedSample);\n            rightChannelSampleUnsignedByte = splitLowByte(mixedSample);\n            setLeftAndRightOutputForAudioQueue(leftChannelSampleUnsignedByte + 1, rightChannelSampleUnsignedByte + 1, CHANNEL_1_BUFFER_LOCATION);\n            // Channel 2\n            mixedSample = mixChannelSamples(15, channel2Sample, 15, 15);\n            leftChannelSampleUnsignedByte = splitHighByte(mixedSample);\n            rightChannelSampleUnsignedByte = splitLowByte(mixedSample);\n            setLeftAndRightOutputForAudioQueue(leftChannelSampleUnsignedByte + 1, rightChannelSampleUnsignedByte + 1, CHANNEL_2_BUFFER_LOCATION);\n            // Channel 3\n            mixedSample = mixChannelSamples(15, 15, channel3Sample, 15);\n            leftChannelSampleUnsignedByte = splitHighByte(mixedSample);\n            rightChannelSampleUnsignedByte = splitLowByte(mixedSample);\n            setLeftAndRightOutputForAudioQueue(leftChannelSampleUnsignedByte + 1, rightChannelSampleUnsignedByte + 1, CHANNEL_3_BUFFER_LOCATION);\n            // Channel 4\n            mixedSample = mixChannelSamples(15, 15, 15, channel4Sample);\n            leftChannelSampleUnsignedByte = splitHighByte(mixedSample);\n            rightChannelSampleUnsignedByte = splitLowByte(mixedSample);\n            setLeftAndRightOutputForAudioQueue(leftChannelSampleUnsignedByte + 1, rightChannelSampleUnsignedByte + 1, CHANNEL_4_BUFFER_LOCATION);\n        }\n        var audioQueueIndex = Sound.audioQueueIndex + 1;\n        // Don't allow our audioQueueIndex to overflow into other parts of the wasmBoy memory map\n        // https://docs.google.com/spreadsheets/d/17xrEzJk5-sCB9J2mMJcVnzhbE-XH_NvczVSQH9OHvRk/edit#gid=0\n        // Not 0xFFFF because we need half of 64kb since we store left and right channel\n        var maxIndex = i32Portable(Sound.wasmBoyMemoryMaxBufferSize >> 1) - 1;\n        if (audioQueueIndex >= maxIndex) {\n            audioQueueIndex -= 1;\n        }\n        Sound.audioQueueIndex = audioQueueIndex;\n    }\n}\n// Inlined because closure compiler inlines\nfunction updateFrameSequencer(numberOfCycles) {\n    // APU runs at 4194304 / 512\n    // Or Cpu.clockSpeed / 512\n    // Which means, we need to update once every 8192 cycles :)\n    var maxFrameSequenceCycles = Sound.maxFrameSequenceCycles();\n    var frameSequenceCycleCounter = Sound.frameSequenceCycleCounter + numberOfCycles;\n    if (frameSequenceCycleCounter >= maxFrameSequenceCycles) {\n        // Reset the frameSequenceCycleCounter\n        // Not setting to zero as we do not want to drop cycles\n        frameSequenceCycleCounter -= maxFrameSequenceCycles;\n        Sound.frameSequenceCycleCounter = frameSequenceCycleCounter;\n        // Check our frame sequencer\n        // https://gist.github.com/drhelius/3652407\n        var frameSequencer = Sound.frameSequencer;\n        switch (frameSequencer) {\n            case 0:\n                // Update Length on Channels\n                Channel1.updateLength();\n                Channel2.updateLength();\n                Channel3.updateLength();\n                Channel4.updateLength();\n                break;\n            /* Do Nothing on one */\n            case 2:\n                // Update Sweep and Length on Channels\n                Channel1.updateLength();\n                Channel2.updateLength();\n                Channel3.updateLength();\n                Channel4.updateLength();\n                Channel1.updateSweep();\n                break;\n            /* Do Nothing on three */\n            case 4:\n                // Update Length on Channels\n                Channel1.updateLength();\n                Channel2.updateLength();\n                Channel3.updateLength();\n                Channel4.updateLength();\n                break;\n            /* Do Nothing on five */\n            case 6:\n                // Update Sweep and Length on Channels\n                Channel1.updateLength();\n                Channel2.updateLength();\n                Channel3.updateLength();\n                Channel4.updateLength();\n                Channel1.updateSweep();\n                break;\n            case 7:\n                // Update Envelope on channels\n                Channel1.updateEnvelope();\n                Channel2.updateEnvelope();\n                Channel4.updateEnvelope();\n                break;\n        }\n        // Update our frame sequencer\n        Sound.frameSequencer = (frameSequencer + 1) & 7;\n        return true;\n    }\n    else {\n        Sound.frameSequenceCycleCounter = frameSequenceCycleCounter;\n    }\n    return false;\n}\nfunction mixChannelSamples(channel1Sample, channel2Sample, channel3Sample, channel4Sample) {\n    // Do Some Cool mixing\n    // NR50 FF24 ALLL BRRR Vin L enable, Left vol, Vin R enable, Right vol\n    // NR51 FF25 NW21 NW21 Left enables, Right enables\n    // NR52 FF26 P--- NW21 Power control/status, Channel length statuses\n    // NW21 = 4 bits on byte\n    // 3 -> Channel 4, 2 -> Channel 3, 1 -> Channel 2, 0 -> Channel 1\n    if (channel1Sample === void 0) { channel1Sample = 15; }\n    if (channel2Sample === void 0) { channel2Sample = 15; }\n    if (channel3Sample === void 0) { channel3Sample = 15; }\n    if (channel4Sample === void 0) { channel4Sample = 15; }\n    // Matt's Proccess\n    // I push out 1024 samples at a time and use 96000 hz sampling rate, so I guess i'm a bit less than one frame,\n    // but I let the queue fill up with 4 x 1024 samples before I start waiting for the audio\n    // TODO: Vin Mixing\n    SoundAccumulator.mixerVolumeChanged = false;\n    // Get our channel volume for left/right\n    var leftChannelSample = 0;\n    var rightChannelSample = 0;\n    // Find the sample for the left if enabled\n    // other wise add silence (15) for the channel\n    leftChannelSample += Sound.NR51IsChannel1EnabledOnLeftOutput ? channel1Sample : 15;\n    leftChannelSample += Sound.NR51IsChannel2EnabledOnLeftOutput ? channel2Sample : 15;\n    leftChannelSample += Sound.NR51IsChannel3EnabledOnLeftOutput ? channel3Sample : 15;\n    leftChannelSample += Sound.NR51IsChannel4EnabledOnLeftOutput ? channel4Sample : 15;\n    // Find the sample for the right if enabled\n    // other wise add silence (15) for the channel\n    rightChannelSample += Sound.NR51IsChannel1EnabledOnRightOutput ? channel1Sample : 15;\n    rightChannelSample += Sound.NR51IsChannel2EnabledOnRightOutput ? channel2Sample : 15;\n    rightChannelSample += Sound.NR51IsChannel3EnabledOnRightOutput ? channel3Sample : 15;\n    rightChannelSample += Sound.NR51IsChannel4EnabledOnRightOutput ? channel4Sample : 15;\n    // Update our accumulator\n    SoundAccumulator.mixerEnabledChanged = false;\n    SoundAccumulator.needToRemixSamples = false;\n    // Finally multiply our volumes by the mixer volume\n    // Mixer volume can be at most 7 + 1\n    // Can be at most 7, because we only have 3 bits, 111 = 7\n    // http://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware#Mixer\n    // Done in the getSampleAsUnsignedByte(), since we are doing some weirdness there :)\n    // Convert our samples from unsigned 32 to unsigned byte\n    // Reason being, We want to be able to pass in wasm memory as usigned byte. Javascript will handle the conversion back\n    var leftChannelSampleUnsignedByte = getSampleAsUnsignedByte(leftChannelSample, Sound.NR50LeftMixerVolume + 1);\n    var rightChannelSampleUnsignedByte = getSampleAsUnsignedByte(rightChannelSample, Sound.NR50RightMixerVolume + 1);\n    // Save these samples in the accumulator\n    SoundAccumulator.leftChannelSampleUnsignedByte = leftChannelSampleUnsignedByte;\n    SoundAccumulator.rightChannelSampleUnsignedByte = rightChannelSampleUnsignedByte;\n    return concatenateBytes(leftChannelSampleUnsignedByte, rightChannelSampleUnsignedByte);\n}\nfunction getSampleAsUnsignedByte(sample, mixerVolume) {\n    // If the sample is silence, return silence as unsigned byte\n    // Silence is common, and should be checked for performance\n    if (sample === 60) {\n        return 127;\n    }\n    // convert to a signed, precise scale of -6000 to 6000 (cheap way of -1.0 to 1.0)\n    // Multiply by the mixer volume fraction (to find the actual volume)\n    var precision = 100000;\n    var convertedSample = sample - 60;\n    convertedSample = convertedSample * precision;\n    // Multiply by the mixer volume fraction (to find the actual volume)\n    convertedSample = (convertedSample * mixerVolume) >> 3;\n    // Convert back to scale of 0 to 120\n    convertedSample = i32Portable(convertedSample / precision) + 60;\n    // Finally, convert to an unsigned byte scale\n    // With Four Channels (0 to 30) and no global volume. Max is 120\n    // max unsigned byte goal is 254 (see blurb at top).\n    // 120 / 254 should give the correct conversion\n    // For example, 120 / 254 = 0.47244094488188976\n    // Multiply by 1000 to increase the float into an int\n    // so, 120 * 1000 / (0.47244094488188976 * 1000) should give approximate answer for max mixer volume\n    var maxDivider = i32Portable((120 * precision) / 254);\n    convertedSample = i32Portable((convertedSample * precision) / maxDivider);\n    // Ensure we have an i32 and not a float for JS builds\n    convertedSample = i32Portable(convertedSample);\n    return convertedSample;\n}\n// Function to set our left and right channels at the correct queue index\nfunction setLeftAndRightOutputForAudioQueue(leftVolume, rightVolume, bufferLocation) {\n    // Get our stereo index\n    var audioQueueOffset = bufferLocation + (Sound.audioQueueIndex << 1);\n    // Store our volumes\n    // +1 that way we don't have empty data to ensure that the value is set\n    store(audioQueueOffset + 0, (leftVolume + 1));\n    store(audioQueueOffset + 1, (rightVolume + 1));\n}\n\n// Functions involved in R/W of sound registers\n// Function to check and handle writes to sound registers\n// Inlined because closure compiler inlines\nfunction SoundRegisterWriteTraps(offset, value) {\n    if (offset !== Sound.memoryLocationNR52 && !Sound.NR52IsSoundEnabled) {\n        // Block all writes to any sound register EXCEPT NR52!\n        // This is under the assumption that the check for\n        // offset >= 0xFF10 && offset <= 0xFF26\n        // is done in writeTraps.ts (which it is)\n        // NOTE: Except on DMG, length can still be written (whatever that means)\n        return false;\n    }\n    switch (offset) {\n        // Handle NRx0 on Channels\n        case Channel1.memoryLocationNRx0:\n            Channel1.updateNRx0(value);\n            return true;\n        case Channel3.memoryLocationNRx0:\n            Channel3.updateNRx0(value);\n            return true;\n        // Handle NRx1 (Length Counter) on Channels\n        case Channel1.memoryLocationNRx1:\n            Channel1.updateNRx1(value);\n            return true;\n        case Channel2.memoryLocationNRx1:\n            Channel2.updateNRx1(value);\n            return true;\n        case Channel3.memoryLocationNRx1:\n            Channel3.updateNRx1(value);\n            return true;\n        case Channel4.memoryLocationNRx1:\n            Channel4.updateNRx1(value);\n            return true;\n        // Handle NRx2 (Envelope / Volume) on Channels\n        case Channel1.memoryLocationNRx2:\n            Channel1.updateNRx2(value);\n            return true;\n        case Channel2.memoryLocationNRx2:\n            Channel2.updateNRx2(value);\n            return true;\n        case Channel3.memoryLocationNRx2:\n            // Check if channel 3's volume code was written too\n            // This is handcy to know for accumulation of samples\n            Channel3.volumeCodeChanged = true;\n            Channel3.updateNRx2(value);\n            return true;\n        case Channel4.memoryLocationNRx2:\n            Channel4.updateNRx2(value);\n            return true;\n        // Handle NRx3 (Frequency / Noise Properties) on Channels\n        case Channel1.memoryLocationNRx3:\n            Channel1.updateNRx3(value);\n            return true;\n        case Channel2.memoryLocationNRx3:\n            Channel2.updateNRx3(value);\n            return true;\n        case Channel3.memoryLocationNRx3:\n            Channel3.updateNRx3(value);\n            return true;\n        case Channel4.memoryLocationNRx3:\n            Channel4.updateNRx3(value);\n            return true;\n        // Check our NRx4 registers to trap our trigger bits\n        case Channel1.memoryLocationNRx4:\n            if (checkBitOnByte(7, value)) {\n                Channel1.updateNRx4(value);\n                Channel1.trigger();\n            }\n            return true;\n        case Channel2.memoryLocationNRx4:\n            if (checkBitOnByte(7, value)) {\n                Channel2.updateNRx4(value);\n                Channel2.trigger();\n            }\n            return true;\n        case Channel3.memoryLocationNRx4:\n            if (checkBitOnByte(7, value)) {\n                Channel3.updateNRx4(value);\n                Channel3.trigger();\n            }\n            return true;\n        case Channel4.memoryLocationNRx4:\n            if (checkBitOnByte(7, value)) {\n                Channel4.updateNRx4(value);\n                Channel4.trigger();\n            }\n            return true;\n        // Tell the sound accumulator if volumes changes\n        case Sound.memoryLocationNR50:\n            Sound.updateNR50(value);\n            SoundAccumulator.mixerVolumeChanged = true;\n            return true;\n        // Tell the sound accumulator if volumes changes\n        case Sound.memoryLocationNR51:\n            Sound.updateNR51(value);\n            SoundAccumulator.mixerEnabledChanged = true;\n            return true;\n        case Sound.memoryLocationNR52:\n            // Reset all registers except NR52\n            Sound.updateNR52(value);\n            if (!checkBitOnByte(7, value)) {\n                for (var i = 0xff10; i < 0xff26; ++i) {\n                    eightBitStoreIntoGBMemory(i, 0x00);\n                }\n            }\n            return true;\n    }\n    // We did not handle the write, Allow the write\n    return true;\n}\n// http://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware#Registers\n// Inlined because closure compiler inlines\nfunction SoundRegisterReadTraps(offset) {\n    // TODO: OR All Registers\n    // This will fix bugs in orcale of ages :)\n    if (offset === Sound.memoryLocationNR52) {\n        // Get our registerNR52\n        var registerNR52 = eightBitLoadFromGBMemory(Sound.memoryLocationNR52);\n        // Knock off lower 7 bits\n        registerNR52 &= 0x80;\n        // Or from the table\n        registerNR52 |= 0x70;\n        return registerNR52;\n    }\n    return -1;\n}\n\nvar Interrupts = /** @class */ (function () {\n    function Interrupts() {\n    }\n    Interrupts.updateInterruptEnabled = function (value) {\n        Interrupts.isVBlankInterruptEnabled = checkBitOnByte(Interrupts.bitPositionVBlankInterrupt, value);\n        Interrupts.isLcdInterruptEnabled = checkBitOnByte(Interrupts.bitPositionLcdInterrupt, value);\n        Interrupts.isTimerInterruptEnabled = checkBitOnByte(Interrupts.bitPositionTimerInterrupt, value);\n        Interrupts.isSerialInterruptEnabled = checkBitOnByte(Interrupts.bitPositionSerialInterrupt, value);\n        Interrupts.isJoypadInterruptEnabled = checkBitOnByte(Interrupts.bitPositionJoypadInterrupt, value);\n        Interrupts.interruptsEnabledValue = value;\n    };\n    Interrupts.updateInterruptRequested = function (value) {\n        Interrupts.isVBlankInterruptRequested = checkBitOnByte(Interrupts.bitPositionVBlankInterrupt, value);\n        Interrupts.isLcdInterruptRequested = checkBitOnByte(Interrupts.bitPositionLcdInterrupt, value);\n        Interrupts.isTimerInterruptRequested = checkBitOnByte(Interrupts.bitPositionTimerInterrupt, value);\n        Interrupts.isSerialInterruptRequested = checkBitOnByte(Interrupts.bitPositionSerialInterrupt, value);\n        Interrupts.isJoypadInterruptRequested = checkBitOnByte(Interrupts.bitPositionJoypadInterrupt, value);\n        Interrupts.interruptsRequestedValue = value;\n    };\n    // Function to return if we have any pending interrupts\n    Interrupts.areInterruptsPending = function () {\n        return (Interrupts.interruptsRequestedValue & Interrupts.interruptsEnabledValue & 0x1f) > 0;\n    };\n    // Function to save the state of the class\n    Interrupts.saveState = function () {\n        storeBooleanDirectlyToWasmMemory(getSaveStateMemoryOffset(0x00, Interrupts.saveStateSlot), Interrupts.masterInterruptSwitch);\n        storeBooleanDirectlyToWasmMemory(getSaveStateMemoryOffset(0x01, Interrupts.saveStateSlot), Interrupts.masterInterruptSwitchDelay);\n        // Interrupts enabled and requested are stored in actual GB memory, thus, don't need to be saved\n    };\n    // Function to load the save state from memory\n    Interrupts.loadState = function () {\n        Interrupts.masterInterruptSwitch = loadBooleanDirectlyFromWasmMemory(getSaveStateMemoryOffset(0x00, Interrupts.saveStateSlot));\n        Interrupts.masterInterruptSwitchDelay = loadBooleanDirectlyFromWasmMemory(getSaveStateMemoryOffset(0x01, Interrupts.saveStateSlot));\n        Interrupts.updateInterruptEnabled(eightBitLoadFromGBMemory(Interrupts.memoryLocationInterruptEnabled));\n        Interrupts.updateInterruptRequested(eightBitLoadFromGBMemory(Interrupts.memoryLocationInterruptRequest));\n    };\n    Interrupts.masterInterruptSwitch = false;\n    // According to mooneye, interrupts are not handled until AFTER\n    // Next instruction\n    // https://github.com/Gekkio/mooneye-gb/blob/master/docs/accuracy.markdown\n    Interrupts.masterInterruptSwitchDelay = false;\n    // Biut position for each part of the interrupts HW registers\n    Interrupts.bitPositionVBlankInterrupt = 0;\n    Interrupts.bitPositionLcdInterrupt = 1;\n    Interrupts.bitPositionTimerInterrupt = 2;\n    Interrupts.bitPositionSerialInterrupt = 3;\n    Interrupts.bitPositionJoypadInterrupt = 4;\n    Interrupts.memoryLocationInterruptEnabled = 0xffff; // A.K.A interrupt Flag (IE)\n    // Cache which Interrupts are enabled\n    Interrupts.interruptsEnabledValue = 0;\n    Interrupts.isVBlankInterruptEnabled = false;\n    Interrupts.isLcdInterruptEnabled = false;\n    Interrupts.isTimerInterruptEnabled = false;\n    Interrupts.isSerialInterruptEnabled = false;\n    Interrupts.isJoypadInterruptEnabled = false;\n    Interrupts.memoryLocationInterruptRequest = 0xff0f; // A.K.A interrupt Flag (IF)\n    // Cache which Interrupts are requested\n    Interrupts.interruptsRequestedValue = 0;\n    Interrupts.isVBlankInterruptRequested = false;\n    Interrupts.isLcdInterruptRequested = false;\n    Interrupts.isTimerInterruptRequested = false;\n    Interrupts.isSerialInterruptRequested = false;\n    Interrupts.isJoypadInterruptRequested = false;\n    // Save States\n    Interrupts.saveStateSlot = 2;\n    return Interrupts;\n}());\n// Inlined because closure compiler inlines\nfunction initializeInterrupts() {\n    // Values from BGB\n    // IE\n    Interrupts.updateInterruptEnabled(0x00);\n    eightBitStoreIntoGBMemory(Interrupts.memoryLocationInterruptEnabled, Interrupts.interruptsEnabledValue);\n    // IF\n    Interrupts.updateInterruptRequested(0xe1);\n    eightBitStoreIntoGBMemory(Interrupts.memoryLocationInterruptRequest, Interrupts.interruptsRequestedValue);\n}\n// NOTE: Interrupts should be handled before reading an opcode\n// Inlined because closure compiler inlines\nfunction checkInterrupts() {\n    // First check for our delay was enabled\n    if (Interrupts.masterInterruptSwitchDelay) {\n        Interrupts.masterInterruptSwitch = true;\n        Interrupts.masterInterruptSwitchDelay = false;\n    }\n    // Check if we have an enabled and requested interrupt\n    var isAnInterruptRequestedAndEnabledValue = Interrupts.interruptsEnabledValue & Interrupts.interruptsRequestedValue & 0x1f;\n    if (isAnInterruptRequestedAndEnabledValue > 0) {\n        // Boolean to track if interrupts were handled\n        // Interrupt handling requires 20 cycles\n        // https://github.com/Gekkio/mooneye-gb/blob/master/docs/accuracy.markdown#what-is-the-exact-timing-of-cpu-servicing-an-interrupt\n        var wasInterruptHandled = false;\n        // Service our interrupts, if we have the master switch enabled\n        // https://www.reddit.com/r/EmuDev/comments/5ie3k7/infinite_loop_trying_to_pass_blarggs_interrupt/\n        if (Interrupts.masterInterruptSwitch && !Cpu.isHaltNoJump) {\n            if (Interrupts.isVBlankInterruptEnabled && Interrupts.isVBlankInterruptRequested) {\n                _handleInterrupt(Interrupts.bitPositionVBlankInterrupt);\n                wasInterruptHandled = true;\n            }\n            else if (Interrupts.isLcdInterruptEnabled && Interrupts.isLcdInterruptRequested) {\n                _handleInterrupt(Interrupts.bitPositionLcdInterrupt);\n                wasInterruptHandled = true;\n            }\n            else if (Interrupts.isTimerInterruptEnabled && Interrupts.isTimerInterruptRequested) {\n                _handleInterrupt(Interrupts.bitPositionTimerInterrupt);\n                wasInterruptHandled = true;\n            }\n            else if (Interrupts.isSerialInterruptEnabled && Interrupts.isSerialInterruptRequested) {\n                _handleInterrupt(Interrupts.bitPositionSerialInterrupt);\n                wasInterruptHandled = true;\n            }\n            else if (Interrupts.isJoypadInterruptEnabled && Interrupts.isJoypadInterruptRequested) {\n                _handleInterrupt(Interrupts.bitPositionJoypadInterrupt);\n                wasInterruptHandled = true;\n            }\n        }\n        var interuptHandlerCycles = 0;\n        if (wasInterruptHandled) {\n            // Interrupt handling requires 20 cycles, TCAGBD\n            interuptHandlerCycles = 20;\n            if (Cpu.isHalted()) {\n                // If the CPU was halted, now is the time to un-halt\n                // Should be done here when the jump occurs according to:\n                // https://www.reddit.com/r/EmuDev/comments/6fmjch/gb_glitches_in_links_awakening_and_pok%C3%A9mon_gold/\n                Cpu.exitHaltAndStop();\n                interuptHandlerCycles += 4;\n            }\n        }\n        if (Cpu.isHalted()) {\n            Cpu.exitHaltAndStop();\n        }\n        return interuptHandlerCycles;\n    }\n    return 0;\n}\nfunction _handleInterrupt(bitPosition) {\n    // Disable the master switch\n    setInterrupts(false);\n    // Disable the bit on the interruptRequest\n    var interruptRequest = eightBitLoadFromGBMemory(Interrupts.memoryLocationInterruptRequest);\n    interruptRequest = resetBitOnByte(bitPosition, interruptRequest);\n    Interrupts.interruptsRequestedValue = interruptRequest;\n    eightBitStoreIntoGBMemory(Interrupts.memoryLocationInterruptRequest, interruptRequest);\n    // Push the programCounter onto the stacks\n    // Push the next instruction, not the halt itself (TCAGBD).\n    Cpu.stackPointer = Cpu.stackPointer - 2;\n    if (Cpu.isHalted()) {\n        // TODO: This breaks Pokemon Yellow, And OG Link's awakening. Find out why...\n        // sixteenBitStoreIntoGBMemory(Cpu.stackPointer, Cpu.programCounter + 1);\n        sixteenBitStoreIntoGBMemory(Cpu.stackPointer, Cpu.programCounter);\n    }\n    else {\n        sixteenBitStoreIntoGBMemory(Cpu.stackPointer, Cpu.programCounter);\n    }\n    // Jump to the correct interrupt location\n    // Also piggyback off of the switch to reset our HW Register caching\n    // http://www.codeslinger.co.uk/pages/projects/gameboy/interupts.html\n    switch (bitPosition) {\n        case Interrupts.bitPositionVBlankInterrupt:\n            Interrupts.isVBlankInterruptRequested = false;\n            Cpu.programCounter = 0x40;\n            break;\n        case Interrupts.bitPositionLcdInterrupt:\n            Interrupts.isLcdInterruptRequested = false;\n            Cpu.programCounter = 0x48;\n            break;\n        case Interrupts.bitPositionTimerInterrupt:\n            Interrupts.isTimerInterruptRequested = false;\n            Cpu.programCounter = 0x50;\n            break;\n        case Interrupts.bitPositionSerialInterrupt:\n            Interrupts.isSerialInterruptRequested = false;\n            Cpu.programCounter = 0x58;\n            break;\n        case Interrupts.bitPositionJoypadInterrupt:\n            Interrupts.isJoypadInterruptRequested = false;\n            Cpu.programCounter = 0x60;\n            break;\n    }\n}\nfunction _requestInterrupt(bitPosition) {\n    var interruptRequest = eightBitLoadFromGBMemory(Interrupts.memoryLocationInterruptRequest);\n    // Pass to set the correct interrupt bit on interruptRequest\n    interruptRequest = setBitOnByte(bitPosition, interruptRequest);\n    Interrupts.interruptsRequestedValue = interruptRequest;\n    eightBitStoreIntoGBMemory(Interrupts.memoryLocationInterruptRequest, interruptRequest);\n}\nfunction setInterrupts(value) {\n    // If we are enabling interrupts,\n    // we want to wait 4 cycles before enabling\n    if (value) {\n        Interrupts.masterInterruptSwitchDelay = true;\n    }\n    else {\n        Interrupts.masterInterruptSwitch = false;\n    }\n}\n// Inlined because closure compiler inlines\nfunction requestVBlankInterrupt() {\n    Interrupts.isVBlankInterruptRequested = true;\n    _requestInterrupt(Interrupts.bitPositionVBlankInterrupt);\n}\n// Inlined because closure compiler inlines\nfunction requestLcdInterrupt() {\n    Interrupts.isLcdInterruptRequested = true;\n    _requestInterrupt(Interrupts.bitPositionLcdInterrupt);\n}\n// Inlined because closure compiler inlines\nfunction requestTimerInterrupt() {\n    Interrupts.isTimerInterruptRequested = true;\n    _requestInterrupt(Interrupts.bitPositionTimerInterrupt);\n}\n// Inlined because closure compiler inlines\nfunction requestJoypadInterrupt() {\n    Interrupts.isJoypadInterruptRequested = true;\n    _requestInterrupt(Interrupts.bitPositionJoypadInterrupt);\n}\n// Inlined because closure compiler inlines\nfunction requestSerialInterrupt() {\n    Interrupts.isSerialInterruptRequested = true;\n    _requestInterrupt(Interrupts.bitPositionSerialInterrupt);\n}\n\nvar Timers = /** @class */ (function () {\n    function Timers() {\n    }\n    // Number of cycles to run in each batch process\n    Timers.batchProcessCycles = function () {\n        return 256;\n    };\n    Timers.updateDividerRegister = function () {\n        var oldDividerRegister = Timers.dividerRegister;\n        Timers.dividerRegister = 0;\n        eightBitStoreIntoGBMemory(Timers.memoryLocationDividerRegister, 0);\n        if (Timers.timerEnabled && _checkDividerRegisterFallingEdgeDetector(oldDividerRegister, 0)) {\n            _incrementTimerCounter();\n        }\n    };\n    Timers.updateTimerCounter = function (value) {\n        if (Timers.timerEnabled) {\n            // From binjgb, dont write TIMA if we were just reset\n            if (Timers.timerCounterWasReset) {\n                return;\n            }\n            // Mooneye Test, tima_write_reloading\n            // Writing in this strange delay cycle, will cancel\n            // Both the interrupt and the TMA reload\n            if (Timers.timerCounterOverflowDelay) {\n                Timers.timerCounterOverflowDelay = false;\n            }\n        }\n        Timers.timerCounter = value;\n    };\n    Timers.updateTimerModulo = function (value) {\n        Timers.timerModulo = value;\n        // Mooneye Test, tma_write_reloading\n        // Don't update if we were reloading\n        if (Timers.timerEnabled && Timers.timerCounterWasReset) {\n            Timers.timerCounter = value;\n            Timers.timerCounterWasReset = false;\n        }\n    };\n    Timers.updateTimerControl = function (value) {\n        // Get some initial values\n        var oldTimerEnabled = Timers.timerEnabled;\n        Timers.timerEnabled = checkBitOnByte(2, value);\n        var newTimerInputClock = value & 0x03;\n        // Do some obscure behavior for if we should increment TIMA\n        // This does the timer increments from rapid_toggle mooneye tests\n        if (!oldTimerEnabled) {\n            var oldTimerCounterMaskBit = _getTimerCounterMaskBit(Timers.timerInputClock);\n            var newTimerCounterMaskBit = _getTimerCounterMaskBit(newTimerInputClock);\n            var shouldIncrementTimerCounter = false;\n            var dividerRegister = Timers.dividerRegister;\n            if (Timers.timerEnabled) {\n                shouldIncrementTimerCounter = checkBitOnByte(oldTimerCounterMaskBit, dividerRegister);\n            }\n            else {\n                shouldIncrementTimerCounter =\n                    checkBitOnByte(oldTimerCounterMaskBit, dividerRegister) && checkBitOnByte(newTimerCounterMaskBit, dividerRegister);\n            }\n            if (shouldIncrementTimerCounter) {\n                _incrementTimerCounter();\n            }\n        }\n        Timers.timerInputClock = newTimerInputClock;\n    };\n    // Function to save the state of the class\n    // TODO: Save state for new properties on Timers\n    Timers.saveState = function () {\n        store(getSaveStateMemoryOffset(0x00, Timers.saveStateSlot), Timers.currentCycles);\n        store(getSaveStateMemoryOffset(0x04, Timers.saveStateSlot), Timers.dividerRegister);\n        storeBooleanDirectlyToWasmMemory(getSaveStateMemoryOffset(0x08, Timers.saveStateSlot), Timers.timerCounterOverflowDelay);\n        storeBooleanDirectlyToWasmMemory(getSaveStateMemoryOffset(0x0b, Timers.saveStateSlot), Timers.timerCounterWasReset);\n        eightBitStoreIntoGBMemory(Timers.memoryLocationTimerCounter, Timers.timerCounter);\n    };\n    // Function to load the save state from memory\n    Timers.loadState = function () {\n        Timers.currentCycles = load(getSaveStateMemoryOffset(0x00, Timers.saveStateSlot));\n        Timers.dividerRegister = load(getSaveStateMemoryOffset(0x04, Timers.saveStateSlot));\n        Timers.timerCounterOverflowDelay = loadBooleanDirectlyFromWasmMemory(getSaveStateMemoryOffset(0x08, Timers.saveStateSlot));\n        Timers.timerCounterWasReset = loadBooleanDirectlyFromWasmMemory(getSaveStateMemoryOffset(0x0b, Timers.saveStateSlot));\n        Timers.timerCounter = eightBitLoadFromGBMemory(Timers.memoryLocationTimerCounter);\n        Timers.timerModulo = eightBitLoadFromGBMemory(Timers.memoryLocationTimerModulo);\n        Timers.timerInputClock = eightBitLoadFromGBMemory(Timers.memoryLocationTimerControl);\n    };\n    // Current cycles\n    // This will be used for batch processing\n    Timers.currentCycles = 0;\n    // Divider Register = DIV\n    // Divider Register is 16 bits.\n    // Divider Register when read is just the upper 8 bits\n    // But internally is used as the full 16\n    // Essentially dividerRegister is an always counting clock\n    // DIV Drives everything, it is the heart of the timer.\n    // All other timing registers base them selves relative to the DIV register\n    // Think of the div register as like a cycle counter :)\n    // DIV will increment TIMA, whenever there is a falling edge, see below for that.\n    Timers.memoryLocationDividerRegister = 0xff04; // DIV\n    Timers.dividerRegister = 0;\n    // timerCounter = TIMA\n    // TIMA is the actual counter.\n    // Whenever the DIV gets the falling edge, and other obscure cases,\n    // This is incremented. When this overflows, we need to fire an interrupt.\n    Timers.memoryLocationTimerCounter = 0xff05;\n    Timers.timerCounter = 0;\n    Timers.timerCounterOverflowDelay = false;\n    Timers.timerCounterWasReset = false;\n    Timers.timerCounterMask = 0;\n    // Timer Modulo = TMA\n    // TMA is what TIMA (Notice the I :p) is counting from, and TIMA will load\n    // Whenever TIMA overflow.\n    // For instance, we count like 1,2,3,4,5,6,7,8,9, and then overflow to 10.\n    // TMA would be like \"Hey, start counting from 5 whenever we reset\"\n    // Then we would be like 5,6,7,8,9...5,6,7,8,9...etc...\n    Timers.memoryLocationTimerModulo = 0xff06;\n    Timers.timerModulo = 0;\n    // Timer Control = TAC\n    // TAC Says how fast we are counting.\n    // TAC controls which bit we are watching for the falling edge on the DIV register\n    // And whenever the bit has the falling edge, we increment TIMA (The thing counting).\n    // Therefore, depending on the value, we will either count faster or slower.\n    Timers.memoryLocationTimerControl = 0xff07;\n    // Bit 2    - Timer Stop  (0=Stop, 1=Start)\n    // Bits 1-0 - Input Clock Select\n    //            00:   4096 Hz    (~4194 Hz SGB) (1024 cycles)\n    //            01: 262144 Hz  (~268400 Hz SGB) (16 cycles)\n    //            10:  65536 Hz   (~67110 Hz SGB) (64 cycles)\n    //            11:  16384 Hz   (~16780 Hz SGB) (256 cycles)\n    Timers.timerEnabled = false;\n    Timers.timerInputClock = 0;\n    // Save States\n    Timers.saveStateSlot = 5;\n    return Timers;\n}());\n// Inlined because closure compiler inlines\nfunction initializeTimers() {\n    // Reset stateful Variables\n    Timers.currentCycles = 0;\n    Timers.dividerRegister = 0;\n    Timers.timerCounter = 0;\n    Timers.timerModulo = 0;\n    Timers.timerEnabled = false;\n    Timers.timerInputClock = 0;\n    Timers.timerCounterOverflowDelay = false;\n    Timers.timerCounterWasReset = false;\n    if (Cpu.GBCEnabled) {\n        // DIV\n        eightBitStoreIntoGBMemory(0xff04, 0x1e);\n        Timers.dividerRegister = 0x1ea0;\n        // 0xFF05 -> 0xFF06 = 0x00\n        // TAC\n        eightBitStoreIntoGBMemory(0xff07, 0xf8);\n        Timers.timerInputClock = 0xf8;\n    }\n    else {\n        // DIV\n        eightBitStoreIntoGBMemory(0xff04, 0xab);\n        Timers.dividerRegister = 0xabcc;\n        // 0xFF05 -> 0xFF06 = 0x00\n        // TAC\n        eightBitStoreIntoGBMemory(0xff07, 0xf8);\n        Timers.timerInputClock = 0xf8;\n    }\n}\n// Batch Process Timers\n// Only checked on writes\n// Function to batch process our Timers after we skipped so many cycles\nfunction batchProcessTimers() {\n    // TODO: Did a timer rewrite, make a proper batch processing\n    // For timers\n    updateTimers(Timers.currentCycles);\n    Timers.currentCycles = 0;\n}\nfunction updateTimers(numberOfCycles) {\n    // Want to increment 4 cycles at a time like an actual GB would\n    var cyclesIncreased = 0;\n    while (cyclesIncreased < numberOfCycles) {\n        var oldDividerRegister = Timers.dividerRegister;\n        var curDividerRegister = oldDividerRegister;\n        cyclesIncreased += 4;\n        curDividerRegister += 4;\n        curDividerRegister &= 0xffff;\n        Timers.dividerRegister = curDividerRegister;\n        if (Timers.timerEnabled) {\n            var timerCounterWasReset = Timers.timerCounterWasReset;\n            if (Timers.timerCounterOverflowDelay) {\n                Timers.timerCounter = Timers.timerModulo;\n                // Fire off timer interrupt\n                requestTimerInterrupt();\n                Timers.timerCounterOverflowDelay = false;\n                Timers.timerCounterWasReset = true;\n            }\n            else if (timerCounterWasReset) {\n                Timers.timerCounterWasReset = false;\n            }\n            if (_checkDividerRegisterFallingEdgeDetector(oldDividerRegister, curDividerRegister)) {\n                _incrementTimerCounter();\n            }\n        }\n    }\n}\n// Function to increment our Timer Counter\n// This fires off interrupts once we overflow\nfunction _incrementTimerCounter() {\n    var counter = Timers.timerCounter;\n    if (++counter > 255) {\n        // Whenever the timer overflows, there is a slight delay (4 cycles)\n        // Of when TIMA gets TMA's value, and the interrupt is fired.\n        // Thus we will set the delay, which can be handled in the update timer or write trap\n        Timers.timerCounterOverflowDelay = true;\n        counter = 0;\n    }\n    Timers.timerCounter = counter;\n}\n// Function to act as our falling edge detector\n// Whenever we have a falling edge, we need to increment TIMA\n// http://gbdev.gg8.se/wiki/articles/Timer_Obscure_Behaviour\n// https://github.com/binji/binjgb/blob/master/src/emulator.c#L1944\nfunction _checkDividerRegisterFallingEdgeDetector(oldDividerRegister, newDividerRegister) {\n    // Get our mask\n    var timerCounterMaskBit = _getTimerCounterMaskBit(Timers.timerInputClock);\n    // If the old register's watched bit was zero,\n    // but after adding the new registers wastch bit is now 1\n    return checkBitOnByte(timerCounterMaskBit, oldDividerRegister) && !checkBitOnByte(timerCounterMaskBit, newDividerRegister);\n}\n// Function to get our current tima mask bit\n// used for our falling edge detector\n// See The docs linked above, or TCAGB for this bit mapping\nfunction _getTimerCounterMaskBit(timerInputClock) {\n    switch (timerInputClock) {\n        case 0x00:\n            return 9;\n        case 0x01:\n            return 3;\n        case 0x02:\n            return 5;\n        case 0x03:\n            return 7;\n    }\n    return 0;\n}\n\n// Link cable / serial implementation\nvar Serial = /** @class */ (function () {\n    function Serial() {\n    }\n    Serial.updateTransferControl = function (value) {\n        Serial.isShiftClockInternal = checkBitOnByte(0, value);\n        Serial.isClockSpeedFast = checkBitOnByte(1, value);\n        Serial.transferStartFlag = checkBitOnByte(7, value);\n        // Allow the original write, and return since we dont need to look anymore\n        return true;\n    };\n    // Cycle counter\n    Serial.currentCycles = 0x00;\n    // Register locations\n    Serial.memoryLocationSerialTransferData = 0xff01; // SB\n    Serial.memoryLocationSerialTransferControl = 0xff02; // SC\n    // Number of bits transferred\n    Serial.numberOfBitsTransferred = 0;\n    // Transfer control variables\n    Serial.isShiftClockInternal = false;\n    Serial.isClockSpeedFast = false;\n    Serial.transferStartFlag = false;\n    return Serial;\n}());\n// Function to initialize our serial values\n// Inlined because closure compiler inlines\nfunction initializeSerial() {\n    Serial.currentCycles = 0x00;\n    Serial.numberOfBitsTransferred = 0;\n    if (Cpu.GBCEnabled) {\n        // FF01 = 0x00\n        eightBitStoreIntoGBMemory(0xff02, 0x7c);\n        Serial.updateTransferControl(0x7c);\n    }\n    else {\n        // FF01 = 0x00\n        eightBitStoreIntoGBMemory(0xff02, 0x7e);\n        Serial.updateTransferControl(0x7e);\n    }\n}\n// TODO: Finish serial\n// See minimal serial: https://github.com/binji/binjgb/commit/64dece05c4ef5a052c4b9b75eb3ddbbfc6677cbe\n// Inlined because closure compiler inlines\nfunction updateSerial(numberOfCycles) {\n    // If we aren't starting our transfer, or transferring,\n    // return\n    if (!Serial.transferStartFlag) {\n        return;\n    }\n    // Want to increment 4 cycles at a time like an actual GB would\n    var cyclesIncreased = 0;\n    while (cyclesIncreased < numberOfCycles) {\n        var oldCycles = Serial.currentCycles;\n        var curCycles = oldCycles;\n        cyclesIncreased += 4;\n        curCycles += 4;\n        if (curCycles > 0xffff) {\n            curCycles -= 0x10000;\n        }\n        Serial.currentCycles = curCycles;\n        if (_checkFallingEdgeDetector(oldCycles, curCycles)) {\n            // TODO: Since no actual connection, always transfer 1\n            // Need to fix this\n            var memoryLocationSerialTransferData = Serial.memoryLocationSerialTransferData;\n            var transferData = eightBitLoadFromGBMemory(memoryLocationSerialTransferData);\n            transferData = (transferData << 1) + 1;\n            transferData = transferData & 0xff;\n            eightBitStoreIntoGBMemory(memoryLocationSerialTransferData, transferData);\n            var numberOfBitsTransferred = Serial.numberOfBitsTransferred;\n            if (++numberOfBitsTransferred === 8) {\n                Serial.numberOfBitsTransferred = 0;\n                requestSerialInterrupt();\n                // Disable transfer start\n                var memoryLocationSerialTransferControl = Serial.memoryLocationSerialTransferControl;\n                var transferControl = eightBitLoadFromGBMemory(memoryLocationSerialTransferControl);\n                eightBitStoreIntoGBMemory(memoryLocationSerialTransferControl, resetBitOnByte(7, transferControl));\n                Serial.transferStartFlag = false;\n            }\n            else {\n                Serial.numberOfBitsTransferred = numberOfBitsTransferred;\n            }\n        }\n    }\n}\n// Inlined because closure compiler inlines\nfunction _checkFallingEdgeDetector(oldCycles, newCycles) {\n    // Get our mask\n    var maskBit = _getFallingEdgeMaskBit();\n    // If the old register's watched bit was zero,\n    // but after adding the new registers wastch bit is now 1\n    return checkBitOnByte(maskBit, oldCycles) && !checkBitOnByte(maskBit, newCycles);\n}\n// Function to get our current tima mask bit\n// used for our falling edge detector\n// See The docs linked above, or TCAGB for this bit mapping\n// Inlined because closure compiler inlines\nfunction _getFallingEdgeMaskBit() {\n    return Serial.isClockSpeedFast ? 2 : 7;\n}\n\n// http://www.codeslinger.co.uk/pages/projects/gameboy/joypad.html\n// Joypad Register\n// Taken from pandocs\n// Bit 7 - Not used\n// Bit 6 - Not used\n// Bit 5 - P15 Select Button Keys (0=Select)\n// Bit 4 - P14 Select Direction Keys (0=Select)\n// Bit 3 - P13 Input Down or Start (0=Pressed) (Read Only)\n// Bit 2 - P12 Input Up or Select (0=Pressed) (Read Only)\n// Bit 1 - P11 Input Left or Button B (0=Pressed) (Read Only)\n// Bit 0 - P10 Input Right or Button A (0=Pressed) (Read Only)\n// Button Ids will be the following:\n// UP - 0\n// RIGHT - 1\n// DOWN - 2\n// LEFT - 3\n// A - 4\n// B - 5\n// SELECT - 6\n// START - 7\nvar Joypad = /** @class */ (function () {\n    function Joypad() {\n    }\n    Joypad.updateJoypad = function (value) {\n        Joypad.joypadRegisterFlipped = value ^ 0xff;\n        Joypad.isDpadType = checkBitOnByte(4, Joypad.joypadRegisterFlipped);\n        Joypad.isButtonType = checkBitOnByte(5, Joypad.joypadRegisterFlipped);\n    };\n    // Function to save the state of the class\n    Joypad.saveState = function () { };\n    // Function to load the save state from memory\n    Joypad.loadState = function () {\n        Joypad.updateJoypad(eightBitLoadFromGBMemory(Joypad.memoryLocationJoypadRegister));\n    };\n    Joypad.up = false;\n    Joypad.down = false;\n    Joypad.left = false;\n    Joypad.right = false;\n    Joypad.a = false;\n    Joypad.b = false;\n    Joypad.select = false;\n    Joypad.start = false;\n    Joypad.memoryLocationJoypadRegister = 0xff00;\n    // Cache some values on the Joypad register\n    Joypad.joypadRegisterFlipped = 0;\n    Joypad.isDpadType = false;\n    Joypad.isButtonType = false;\n    // Save States\n    // Not doing anything for Joypad for now\n    Joypad.saveStateSlot = 3;\n    return Joypad;\n}());\n// Inlined because closure compiler inlines\nfunction getJoypadState() {\n    // Get the joypad register\n    var joypadRegister = Joypad.joypadRegisterFlipped;\n    if (Joypad.isDpadType) {\n        // D-pad buttons\n        // Up\n        if (Joypad.up) {\n            joypadRegister = resetBitOnByte(2, joypadRegister);\n        }\n        else {\n            joypadRegister = setBitOnByte(2, joypadRegister);\n        }\n        // Right\n        if (Joypad.right) {\n            joypadRegister = resetBitOnByte(0, joypadRegister);\n        }\n        else {\n            joypadRegister = setBitOnByte(0, joypadRegister);\n        }\n        // Down\n        if (Joypad.down) {\n            joypadRegister = resetBitOnByte(3, joypadRegister);\n        }\n        else {\n            joypadRegister = setBitOnByte(3, joypadRegister);\n        }\n        // Left\n        if (Joypad.left) {\n            joypadRegister = resetBitOnByte(1, joypadRegister);\n        }\n        else {\n            joypadRegister = setBitOnByte(1, joypadRegister);\n        }\n    }\n    else if (Joypad.isButtonType) {\n        // A\n        if (Joypad.a) {\n            joypadRegister = resetBitOnByte(0, joypadRegister);\n        }\n        else {\n            joypadRegister = setBitOnByte(0, joypadRegister);\n        }\n        // B\n        if (Joypad.b) {\n            joypadRegister = resetBitOnByte(1, joypadRegister);\n        }\n        else {\n            joypadRegister = setBitOnByte(1, joypadRegister);\n        }\n        // Select\n        if (Joypad.select) {\n            joypadRegister = resetBitOnByte(2, joypadRegister);\n        }\n        else {\n            joypadRegister = setBitOnByte(2, joypadRegister);\n        }\n        // Start\n        if (Joypad.start) {\n            joypadRegister = resetBitOnByte(3, joypadRegister);\n        }\n        else {\n            joypadRegister = setBitOnByte(3, joypadRegister);\n        }\n    }\n    // Set the top 4 bits to on\n    joypadRegister = joypadRegister | 0xf0;\n    return joypadRegister;\n}\nfunction setJoypadState(up, right, down, left, a, b, select, start) {\n    if (up > 0) {\n        _pressJoypadButton(0);\n    }\n    else {\n        _releaseJoypadButton(0);\n    }\n    if (right > 0) {\n        _pressJoypadButton(1);\n    }\n    else {\n        _releaseJoypadButton(1);\n    }\n    if (down > 0) {\n        _pressJoypadButton(2);\n    }\n    else {\n        _releaseJoypadButton(2);\n    }\n    if (left > 0) {\n        _pressJoypadButton(3);\n    }\n    else {\n        _releaseJoypadButton(3);\n    }\n    if (a > 0) {\n        _pressJoypadButton(4);\n    }\n    else {\n        _releaseJoypadButton(4);\n    }\n    if (b > 0) {\n        _pressJoypadButton(5);\n    }\n    else {\n        _releaseJoypadButton(5);\n    }\n    if (select > 0) {\n        _pressJoypadButton(6);\n    }\n    else {\n        _releaseJoypadButton(6);\n    }\n    if (start > 0) {\n        _pressJoypadButton(7);\n    }\n    else {\n        _releaseJoypadButton(7);\n    }\n}\nfunction _pressJoypadButton(buttonId) {\n    // Un stop the CPU\n    Cpu.isStopped = false;\n    // Check if the button state changed from not pressed\n    var isButtonStateChanging = false;\n    if (!_getJoypadButtonStateFromButtonId(buttonId)) {\n        isButtonStateChanging = true;\n    }\n    // Set our joypad state\n    _setJoypadButtonStateFromButtonId(buttonId, true);\n    // If the button state is changing, check for an interrupt\n    if (isButtonStateChanging) {\n        // Determine if it is a button or a dpad button\n        var isDpadTypeButton = false;\n        if (buttonId <= 3) {\n            isDpadTypeButton = true;\n        }\n        // Determine if we should request an interrupt\n        var shouldRequestInterrupt = false;\n        // Check if the game is looking for a dpad type button press\n        if (Joypad.isDpadType && isDpadTypeButton) {\n            shouldRequestInterrupt = true;\n        }\n        // Check if the game is looking for a button type button press\n        if (Joypad.isButtonType && !isDpadTypeButton) {\n            shouldRequestInterrupt = true;\n        }\n        // Finally, request the interrupt, if the button state actually changed\n        if (shouldRequestInterrupt) {\n            requestJoypadInterrupt();\n        }\n    }\n}\n// Inlined because closure compiler inlines\nfunction _releaseJoypadButton(buttonId) {\n    // Set our joypad state\n    _setJoypadButtonStateFromButtonId(buttonId, false);\n}\nfunction _getJoypadButtonStateFromButtonId(buttonId) {\n    switch (buttonId) {\n        case 0:\n            return Joypad.up;\n        case 1:\n            return Joypad.right;\n        case 2:\n            return Joypad.down;\n        case 3:\n            return Joypad.left;\n        case 4:\n            return Joypad.a;\n        case 5:\n            return Joypad.b;\n        case 6:\n            return Joypad.select;\n        case 7:\n            return Joypad.start;\n        default:\n            return false;\n    }\n}\nfunction _setJoypadButtonStateFromButtonId(buttonId, isPressed) {\n    switch (buttonId) {\n        case 0:\n            Joypad.up = isPressed;\n            break;\n        case 1:\n            Joypad.right = isPressed;\n            break;\n        case 2:\n            Joypad.down = isPressed;\n            break;\n        case 3:\n            Joypad.left = isPressed;\n            break;\n        case 4:\n            Joypad.a = isPressed;\n            break;\n        case 5:\n            Joypad.b = isPressed;\n            break;\n        case 6:\n            Joypad.select = isPressed;\n            break;\n        case 7:\n            Joypad.start = isPressed;\n            break;\n    }\n}\n\n// Function to handle rom/rambanking\n// Inlined because closure compiler inlines\nfunction handleBanking(offset, value) {\n    // Is rom Only does not bank\n    if (Memory.isRomOnly) {\n        return;\n    }\n    var isMBC1 = Memory.isMBC1;\n    var isMBC2 = Memory.isMBC2;\n    // Enable Ram Banking\n    if (offset <= 0x1fff) {\n        if (isMBC2 && !checkBitOnByte(4, value)) {\n            // Do Nothing\n            return;\n        }\n        else {\n            var romEnableByte = value & 0x0f;\n            if (romEnableByte === 0x00) {\n                Memory.isRamBankingEnabled = false;\n            }\n            else if (romEnableByte === 0x0a) {\n                Memory.isRamBankingEnabled = true;\n            }\n        }\n    }\n    else if (offset <= 0x3fff) {\n        var isMBC5 = Memory.isMBC5;\n        if (!isMBC5 || offset <= 0x2fff) {\n            // Change Low Bits on the Current Rom Bank\n            var currentRomBank = Memory.currentRomBank;\n            if (isMBC2) {\n                currentRomBank = value & 0x0f;\n            }\n            // Set the number of bottom bytes from the MBC type\n            var romBankLowerBits = value;\n            if (isMBC1) {\n                // Only want the bottom 5\n                romBankLowerBits = romBankLowerBits & 0x1f;\n                currentRomBank &= 0xe0;\n            }\n            else if (Memory.isMBC3) {\n                // Only Want the bottom 7\n                romBankLowerBits = romBankLowerBits & 0x7f;\n                currentRomBank &= 0x80;\n            }\n            else if (isMBC5) {\n                // Going to switch the whole thing\n                currentRomBank &= 0x00;\n            }\n            // Set the lower bytes\n            currentRomBank |= romBankLowerBits;\n            Memory.currentRomBank = currentRomBank;\n            return;\n        }\n        else {\n            // TODO: MBC5 High bits Rom bank, check if this works, not sure about the value\n            var lowByte = splitLowByte(Memory.currentRomBank);\n            var highByte = (value > 0);\n            Memory.currentRomBank = concatenateBytes(highByte, lowByte);\n        }\n    }\n    else if (!isMBC2 && offset <= 0x5fff) {\n        // ROM / RAM Banking, MBC2 doesn't do this\n        if (isMBC1 && Memory.isMBC1RomModeEnabled) {\n            // Do an upper bit rom bank for MBC 1\n            // Remove upper bits of currentRomBank\n            var currentRomBank = Memory.currentRomBank & 0x1f;\n            var romBankHigherBits = value & 0xe0;\n            currentRomBank |= romBankHigherBits;\n            Memory.currentRomBank = currentRomBank;\n            return;\n        }\n        var ramBankBits = value;\n        if (!Memory.isMBC5) {\n            // Get the bottom 2 bits\n            ramBankBits &= 0x03;\n        }\n        else {\n            // Get the bottom nibble\n            ramBankBits &= 0x0f;\n        }\n        // Set our ram bank\n        Memory.currentRamBank = ramBankBits;\n        return;\n    }\n    else if (!isMBC2 && offset <= 0x7fff) {\n        if (isMBC1) {\n            Memory.isMBC1RomModeEnabled = checkBitOnByte(0, value);\n        }\n        // TODO: MBC3 Latch Clock Data\n    }\n}\n// Inlined because closure compiler inlines\nfunction getRomBankAddress(gameboyOffset) {\n    var currentRomBank = Memory.currentRomBank;\n    if (!Memory.isMBC5 && currentRomBank === 0) {\n        currentRomBank = 1;\n    }\n    // Adjust our gameboy offset relative to zero for the gameboy memory map\n    return (0x4000 * currentRomBank + (gameboyOffset - Memory.switchableCartridgeRomLocation));\n}\n// Inlined because closure compiler inlines\nfunction getRamBankAddress(gameboyOffset) {\n    // Adjust our gameboy offset relative to zero for the gameboy memory map\n    return (0x2000 * Memory.currentRamBank + (gameboyOffset - Memory.cartridgeRamLocation));\n}\n\n// Inlined because closure compiler inlines\nfunction initializeDma() {\n    if (Cpu.GBCEnabled) {\n        // GBC DMA\n        eightBitStoreIntoGBMemory(0xff51, 0xff);\n        eightBitStoreIntoGBMemory(0xff52, 0xff);\n        eightBitStoreIntoGBMemory(0xff53, 0xff);\n        eightBitStoreIntoGBMemory(0xff54, 0xff);\n        eightBitStoreIntoGBMemory(0xff55, 0xff);\n    }\n    else {\n        // GBC DMA\n        eightBitStoreIntoGBMemory(0xff51, 0xff);\n        eightBitStoreIntoGBMemory(0xff52, 0xff);\n        eightBitStoreIntoGBMemory(0xff53, 0xff);\n        eightBitStoreIntoGBMemory(0xff54, 0xff);\n        eightBitStoreIntoGBMemory(0xff55, 0xff);\n    }\n}\n// Inlined because closure compiler inlines\nfunction startDmaTransfer(sourceAddressOffset) {\n    var sourceAddress = sourceAddressOffset << 8;\n    for (var i = 0; i <= 0x9f; ++i) {\n        var spriteInformationByte = eightBitLoadFromGBMemory(sourceAddress + i);\n        var spriteInformationAddress = Memory.spriteInformationTableLocation + i;\n        eightBitStoreIntoGBMemory(spriteInformationAddress, spriteInformationByte);\n    }\n    // TCAGBD:  This copy (DMA) needs 160  4 + 4 clocks to complete in both double speed and single speeds modes\n    // Increment all of our Cycle coiunters in ../cpu/opcodes\n    Memory.DMACycles = 644;\n}\n// https://gist.github.com/drhelius/3394856\n// http://bgb.bircd.org/pandocs.htm\n// Inlined because closure compiler inlines\nfunction startHdmaTransfer(hdmaTriggerByteToBeWritten) {\n    // Check if we are Gbc\n    if (!Cpu.GBCEnabled) {\n        return;\n    }\n    // Check if we are trying to terminate an already active HBLANK HDMA\n    if (Memory.isHblankHdmaActive && !checkBitOnByte(7, hdmaTriggerByteToBeWritten)) {\n        // Don't reset anything, just set bit 7 to 1 on the trigger byte\n        Memory.isHblankHdmaActive = false;\n        var hdmaTriggerByte = eightBitLoadFromGBMemory(Memory.memoryLocationHdmaTrigger);\n        eightBitStoreIntoGBMemory(Memory.memoryLocationHdmaTrigger, setBitOnByte(7, hdmaTriggerByte));\n        return;\n    }\n    // Get our source and destination for the HDMA\n    var hdmaSource = getHdmaSourceFromMemory();\n    var hdmaDestination = getHdmaDestinationFromMemory();\n    // Get the length from the trigger\n    // Lower 7 bits, Add 1, times 16\n    // https://gist.github.com/drhelius/3394856\n    var transferLength = resetBitOnByte(7, hdmaTriggerByteToBeWritten);\n    transferLength = (transferLength + 1) << 4;\n    // Get bit 7 of the trigger for the HDMA type\n    if (checkBitOnByte(7, hdmaTriggerByteToBeWritten)) {\n        // H-Blank DMA\n        Memory.isHblankHdmaActive = true;\n        Memory.hblankHdmaTransferLengthRemaining = transferLength;\n        Memory.hblankHdmaSource = hdmaSource;\n        Memory.hblankHdmaDestination = hdmaDestination;\n        // This will be handled in updateHblankHdma()\n        // Since we return false in write traps, we need to now write the byte\n        // Be sure to reset bit 7, to show that the hdma is active\n        eightBitStoreIntoGBMemory(Memory.memoryLocationHdmaTrigger, resetBitOnByte(7, hdmaTriggerByteToBeWritten));\n    }\n    else {\n        // General DMA\n        hdmaTransfer(hdmaSource, hdmaDestination, transferLength);\n        // Stop the DMA\n        eightBitStoreIntoGBMemory(Memory.memoryLocationHdmaTrigger, 0xff);\n    }\n}\n// Inlined because closure compiler inlines\nfunction updateHblankHdma() {\n    if (!Memory.isHblankHdmaActive) {\n        return;\n    }\n    // Get our amount of bytes to transfer (Only 0x10 bytes at a time)\n    var bytesToTransfer = 0x10;\n    var hblankHdmaTransferLengthRemaining = Memory.hblankHdmaTransferLengthRemaining;\n    if (hblankHdmaTransferLengthRemaining < bytesToTransfer) {\n        // Set to the difference\n        bytesToTransfer = hblankHdmaTransferLengthRemaining;\n    }\n    // Do the transfer (Only 0x10 bytes at a time)\n    hdmaTransfer(Memory.hblankHdmaSource, Memory.hblankHdmaDestination, bytesToTransfer);\n    // Update our source and destination\n    Memory.hblankHdmaSource += bytesToTransfer;\n    Memory.hblankHdmaDestination += bytesToTransfer;\n    hblankHdmaTransferLengthRemaining -= bytesToTransfer;\n    Memory.hblankHdmaTransferLengthRemaining = hblankHdmaTransferLengthRemaining;\n    var memoryLocationHdmaTrigger = Memory.memoryLocationHdmaTrigger;\n    if (hblankHdmaTransferLengthRemaining <= 0) {\n        // End the transfer\n        Memory.isHblankHdmaActive = false;\n        // Need to clear the HDMA with 0xFF, which sets bit 7 to 1 to show the HDMA has ended\n        eightBitStoreIntoGBMemory(memoryLocationHdmaTrigger, 0xff);\n    }\n    else {\n        // Set our new transfer length, make sure it is in the weird format,\n        // and make sure bit 7 is 0, to show that the HDMA is Active\n        var remainingTransferLength = hblankHdmaTransferLengthRemaining;\n        var transferLengthAsByte = (remainingTransferLength >> 4) - 1;\n        eightBitStoreIntoGBMemory(memoryLocationHdmaTrigger, resetBitOnByte(7, transferLengthAsByte));\n    }\n}\n// Simple Function to transfer the bytes from a destination to a source for a general pourpose or Hblank HDMA\nfunction hdmaTransfer(hdmaSource, hdmaDestination, transferLength) {\n    for (var i = 0; i < transferLength; ++i) {\n        var sourceByte = eightBitLoadFromGBMemoryWithTraps(hdmaSource + i);\n        // get the hdmaDestination with wrapping\n        // See issue #61: https://github.com/torch2424/wasmBoy/issues/61\n        var hdmaDestinationWithWrapping = hdmaDestination + i;\n        while (hdmaDestinationWithWrapping > 0x9fff) {\n            // Simply clear the top 3 bits\n            hdmaDestinationWithWrapping -= 0x2000;\n        }\n        eightBitStoreIntoGBMemoryWithTraps(hdmaDestinationWithWrapping, sourceByte);\n    }\n    // Set our Cycles used for the HDMA\n    // Since DMA in GBC Double Speed Mode takes 80 micro seconds,\n    // And HDMA takes 8 micro seconds per 0x10 bytes in GBC Double Speed mode (and GBC Normal Mode)\n    // Will assume (644 / 10) cycles for GBC Double Speed Mode,\n    // and (644 / 10 / 2) for GBC Normal Mode\n    var hdmaCycles = 32 << Cpu.GBCDoubleSpeed;\n    hdmaCycles = hdmaCycles * (transferLength >> 4);\n    Memory.DMACycles += hdmaCycles;\n}\n// Function to get our HDMA Source\n// Follows the poan docs\n// Inlined because closure compiler inlines\nfunction getHdmaSourceFromMemory() {\n    // Get our source for the HDMA\n    var hdmaSourceHigh = eightBitLoadFromGBMemory(Memory.memoryLocationHdmaSourceHigh);\n    var hdmaSourceLow = eightBitLoadFromGBMemory(Memory.memoryLocationHdmaSourceLow);\n    var hdmaSource = concatenateBytes(hdmaSourceHigh, hdmaSourceLow);\n    // And off the appopriate bits for the source and destination\n    // And off the bottom 4 bits\n    hdmaSource = hdmaSource & 0xfff0;\n    return hdmaSource;\n}\n// Function to get our HDMA Destination\n// Follows the poan docs\n// Inlined because closure compiler inlines\nfunction getHdmaDestinationFromMemory() {\n    var hdmaDestinationHigh = eightBitLoadFromGBMemory(Memory.memoryLocationHdmaDestinationHigh);\n    var hdmaDestinationLow = eightBitLoadFromGBMemory(Memory.memoryLocationHdmaDestinationLow);\n    var hdmaDestination = concatenateBytes(hdmaDestinationHigh, hdmaDestinationLow);\n    // Can only be in VRAM, 0x8000 -> 0x9FF0\n    // Pan docs says to knock off upper 3 bits, and lower 4 bits\n    // Which gives us: 0001111111110000 or 0x1FF0\n    // Meaning we must add 0x8000\n    hdmaDestination = hdmaDestination & 0x1ff0;\n    hdmaDestination += Memory.videoRamLocation;\n    return hdmaDestination;\n}\n\n// Internal function to trap any modify data trying to be written to Gameboy memory\n// Follows the Gameboy memory map\n// Return true if you want to continue the write, return false to end it here\nfunction checkWriteTraps(offset, value) {\n    // Cpu\n    if (offset === Cpu.memoryLocationSpeedSwitch) {\n        // TCAGBD, only Bit 0 is writable\n        eightBitStoreIntoGBMemory(Cpu.memoryLocationSpeedSwitch, value & 0x01);\n        // We did the write, dont need to\n        return false;\n    }\n    // Graphics\n    // Cache globals used multiple times for performance\n    var videoRamLocation = Memory.videoRamLocation;\n    var spriteInformationTableLocation = Memory.spriteInformationTableLocation;\n    // Handle banking\n    if (offset < videoRamLocation) {\n        handleBanking(offset, value);\n        return false;\n    }\n    // Check the graphics mode to see if we can write to VRAM\n    // http://gbdev.gg8.se/wiki/articles/Video_Display#Accessing_VRAM_and_OAM\n    if (offset >= videoRamLocation && offset < Memory.cartridgeRamLocation) {\n        // Can only read/write from VRAM During Modes 0 - 2\n        // See graphics/lcd.ts\n        // TODO: This can do more harm than good in a beta emulator,\n        // requires precise timing disabling for now\n        // if (Graphics.currentLcdMode > 2) {\n        //   return false;\n        // }\n        // Not batch processing here for performance\n        // batchProcessGraphics();\n        // Allow the original write, and return since we dont need to look anymore\n        return true;\n    }\n    // Be sure to copy everything in EchoRam to Work Ram\n    // Codeslinger: The ECHO memory region (0xE000-0xFDFF) is quite different because any data written here is also written in the equivelent ram memory region 0xC000-0xDDFF.\n    // Hence why it is called echo\n    if (offset >= Memory.echoRamLocation && offset < spriteInformationTableLocation) {\n        var wramOffset = offset - 0x2000;\n        eightBitStoreIntoGBMemory(wramOffset, value);\n        // Allow the original write, and return since we dont need to look anymore\n        return true;\n    }\n    // Also check for individal writes\n    // Can only read/write from OAM During Modes 0 - 1\n    // See graphics/lcd.ts\n    if (offset >= spriteInformationTableLocation && offset <= Memory.spriteInformationTableLocationEnd) {\n        // Can only read/write from OAM During Mode 2\n        // See graphics/lcd.ts\n        // if (Lcd.currentLcdMode < 2) {\n        // return false;\n        // }\n        // Not batch processing here for performance\n        // batchProcessGraphics();\n        // Allow the original write, and return since we dont need to look anymore\n        // return true;\n        return Lcd.currentLcdMode >= 2;\n    }\n    if (offset >= Memory.unusableMemoryLocation && offset <= Memory.unusableMemoryEndLocation) {\n        return false;\n    }\n    // Serial\n    if (offset === Serial.memoryLocationSerialTransferControl) {\n        // SC\n        return Serial.updateTransferControl(value);\n    }\n    // Sound\n    // http://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware#Registers\n    if (offset >= 0xff10 && offset <= 0xff26) {\n        batchProcessAudio();\n        return SoundRegisterWriteTraps(offset, value);\n    }\n    // FF27 - FF2F not used\n    // Final Wave Table for Channel 3\n    if (offset >= 0xff30 && offset <= 0xff3f) {\n        batchProcessAudio();\n    }\n    // Other Memory effects fomr read/write to Lcd/Graphics\n    if (offset >= Lcd.memoryLocationLcdControl && offset <= Graphics.memoryLocationWindowX) {\n        // Not batch processing here for performance\n        // batchProcessGraphics();\n        if (offset === Lcd.memoryLocationLcdControl) {\n            // Shorcut for isLCD Enabled since it gets \"hot\"\n            Lcd.updateLcdControl(value);\n            return true;\n        }\n        if (offset === Lcd.memoryLocationLcdStatus) {\n            // We are handling the write here\n            Lcd.updateLcdStatus(value);\n            return false;\n        }\n        // reset the current scanline if the game tries to write to it\n        if (offset === Graphics.memoryLocationScanlineRegister) {\n            Graphics.scanlineRegister = 0;\n            eightBitStoreIntoGBMemory(offset, 0);\n            return false;\n        }\n        // Cache our coincidence compare\n        if (offset === Lcd.memoryLocationCoincidenceCompare) {\n            Lcd.coincidenceCompare = value;\n            return true;\n        }\n        // Do the direct memory access transfer for spriteInformationTable\n        // Check the graphics mode to see if we can write to VRAM\n        // http://gbdev.gg8.se/wiki/articles/Video_Display#Accessing_VRAM_and_OAM\n        if (offset === Graphics.memoryLocationDmaTransfer) {\n            // otherwise, perform a DMA transfer\n            // And allow the original write\n            startDmaTransfer(value);\n            return true;\n        }\n        // Scroll and Window XY\n        switch (offset) {\n            case Graphics.memoryLocationScrollX:\n                Graphics.scrollX = value;\n                return true;\n            case Graphics.memoryLocationScrollY:\n                Graphics.scrollY = value;\n                return true;\n            case Graphics.memoryLocationWindowX:\n                Graphics.windowX = value;\n                return true;\n            case Graphics.memoryLocationWindowY:\n                Graphics.windowY = value;\n                return true;\n        }\n        // Allow the original write, and return since we dont need to look anymore\n        return true;\n    }\n    // Do an HDMA\n    if (offset === Memory.memoryLocationHdmaTrigger) {\n        startHdmaTransfer(value);\n        return false;\n    }\n    // Don't allow banking if we are doing an Hblank HDM transfer\n    // https://gist.github.com/drhelius/3394856\n    if (offset === Memory.memoryLocationGBCWRAMBank || offset === Memory.memoryLocationGBCVRAMBank) {\n        if (Memory.isHblankHdmaActive) {\n            var hblankHdmaSource = Memory.hblankHdmaSource;\n            if ((hblankHdmaSource >= 0x4000 && hblankHdmaSource <= 0x7fff) || (hblankHdmaSource >= 0xd000 && hblankHdmaSource <= 0xdfff)) {\n                return false;\n            }\n        }\n    }\n    // Handle GBC Pallete Write\n    if (offset >= Palette.memoryLocationBackgroundPaletteIndex && offset <= Palette.memoryLocationSpritePaletteData) {\n        // Incremeenting the palette handled by the write\n        writeColorPaletteToMemory(offset, value);\n        return true;\n    }\n    // Handle timer writes\n    if (offset >= Timers.memoryLocationDividerRegister && offset <= Timers.memoryLocationTimerControl) {\n        // Batch Process\n        batchProcessTimers();\n        switch (offset) {\n            case Timers.memoryLocationDividerRegister:\n                Timers.updateDividerRegister();\n                return false;\n            case Timers.memoryLocationTimerCounter:\n                Timers.updateTimerCounter(value);\n                return true;\n            case Timers.memoryLocationTimerModulo:\n                Timers.updateTimerModulo(value);\n                return true;\n            case Timers.memoryLocationTimerControl:\n                Timers.updateTimerControl(value);\n                return true;\n        }\n        return true;\n    }\n    // Handle Joypad writes for HW reg caching\n    if (offset === Joypad.memoryLocationJoypadRegister) {\n        Joypad.updateJoypad(value);\n    }\n    // Handle Interrupt writes\n    if (offset === Interrupts.memoryLocationInterruptRequest) {\n        Interrupts.updateInterruptRequested(value);\n        return true;\n    }\n    if (offset === Interrupts.memoryLocationInterruptEnabled) {\n        Interrupts.updateInterruptEnabled(value);\n        return true;\n    }\n    // Allow the original write\n    return true;\n}\n\n// WasmBoy memory map:\n// Private function to translate a offset meant for the gameboy memory map\n// To the wasmboy memory map\n// Following: http://gameboy.mongenel.com/dmg/asmmemmap.html\n// And https://github.com/Dooskington/GameLad/wiki/Part-11---Memory-Bank-Controllers\n// Performance help from @dcodeIO, and awesome-gbdev\nfunction getWasmBoyOffsetFromGameBoyOffset(gameboyOffset) {\n    // Get the top byte and switch\n    var gameboyOffsetHighByte = gameboyOffset >> 12;\n    switch (gameboyOffsetHighByte) {\n        case 0x00:\n        case 0x01:\n        case 0x02:\n        case 0x03:\n            // Cartridge ROM - Bank 0 (fixed)\n            // 0x0000 -> 0x0D2400\n            return gameboyOffset + CARTRIDGE_ROM_LOCATION;\n        case 0x04:\n        case 0x05:\n        case 0x06:\n        case 0x07:\n            // Cartridge ROM - Switchable Banks 1-xx\n            // 0x4000 -> (0x0D2400 + 0x4000)\n            return getRomBankAddress(gameboyOffset) + CARTRIDGE_ROM_LOCATION;\n        case 0x08:\n        case 0x09:\n            // Video RAM\n            // 0x8000 -> 0x000400\n            var vramBankId = 0;\n            if (Cpu.GBCEnabled) {\n                // Find our current VRAM Bank\n                vramBankId = eightBitLoadFromGBMemory(Memory.memoryLocationGBCVRAMBank) & 0x01;\n                // Even though We added another 0x2000, the Cartridge ram is pulled out of our Internal Memory Space\n                // Therefore, we do not need to adjust for this extra 0x2000\n            }\n            return gameboyOffset - Memory.videoRamLocation + VIDEO_RAM_LOCATION + 0x2000 * vramBankId;\n        case 0x0a:\n        case 0x0b:\n            // Cartridge RAM - A.K.A External RAM\n            // 0xA000 -> 0x008400\n            return getRamBankAddress(gameboyOffset) + CARTRIDGE_RAM_LOCATION;\n        case 0x0c:\n            // Gameboy Ram Bank 0\n            // 0xC000 -> 0x000400\n            // Don't need to add head, since we move out 0x200 from the cartridge ram\n            return gameboyOffset - Memory.internalRamBankZeroLocation + WORK_RAM_LOCATION;\n        case 0x0d:\n            // Gameboy Ram Banks, Switchable in GBC Mode\n            // 0xD000 -> 0x000400\n            // In CGB Mode 32 KBytes internal RAM are available.\n            // This memory is divided into 8 banks of 4 KBytes each.\n            // Bank 0 is always available in memory at C000-CFFF,\n            // Bank 1-7 can be selected into the address space at D000-DFFF.\n            // http://gbdev.gg8.se/wiki/articles/CGB_Registers#FF70_-_SVBK_-_CGB_Mode_Only_-_WRAM_Bank\n            // Get the last 3 bits to find our wram ID\n            var wramBankId = 0;\n            if (Cpu.GBCEnabled) {\n                wramBankId = eightBitLoadFromGBMemory(Memory.memoryLocationGBCWRAMBank) & 0x07;\n            }\n            wramBankId = wramBankId < 1 ? 1 : wramBankId;\n            // (0x1000 * (wramBankId - 1)) -> To find the correct wram bank.\n            // wramBankId - 1, because we alreayd have the space for wramBank 1, and are currently in it\n            // So need to address space for 6 OTHER banks\n            return gameboyOffset - Memory.internalRamBankZeroLocation + WORK_RAM_LOCATION + 0x1000 * (wramBankId - 1);\n        default:\n            // Everything Else after Gameboy Ram Banks\n            // 0xE000 -> 0x000400\n            // 0x6000 For the Extra WRAM Banks\n            return gameboyOffset - Memory.echoRamLocation + OTHER_GAMEBOY_INTERNAL_MEMORY_LOCATION;\n    }\n}\n\n// Breakpoints for memory / cpu\nvar Breakpoints = /** @class */ (function () {\n    function Breakpoints() {\n    }\n    Breakpoints.programCounter = -1;\n    Breakpoints.readGbMemory = -1;\n    Breakpoints.writeGbMemory = -1;\n    Breakpoints.reachedBreakpoint = false;\n    return Breakpoints;\n}());\nfunction setProgramCounterBreakpoint(breakpoint) {\n    Breakpoints.programCounter = breakpoint;\n}\nfunction resetProgramCounterBreakpoint() {\n    Breakpoints.programCounter = -1;\n}\nfunction setReadGbMemoryBreakpoint(breakpoint) {\n    Breakpoints.readGbMemory = breakpoint;\n}\nfunction resetReadGbMemoryBreakpoint() {\n    Breakpoints.readGbMemory = -1;\n}\nfunction setWriteGbMemoryBreakpoint(breakpoint) {\n    Breakpoints.writeGbMemory = breakpoint;\n}\nfunction resetWriteGbMemoryBreakpoint() {\n    Breakpoints.writeGbMemory = -1;\n}\n\n// Store / Write memory access\nfunction eightBitStoreIntoGBMemory(gameboyOffset, value) {\n    store(getWasmBoyOffsetFromGameBoyOffset(gameboyOffset), value);\n}\nfunction eightBitStoreIntoGBMemoryWithTraps(offset, value) {\n    if (offset === Breakpoints.writeGbMemory) {\n        Breakpoints.reachedBreakpoint = true;\n    }\n    if (checkWriteTraps(offset, value)) {\n        eightBitStoreIntoGBMemory(offset, value);\n    }\n}\nfunction sixteenBitStoreIntoGBMemoryWithTraps(offset, value) {\n    // Dividing into two seperate eight bit calls to help with debugging tilemap overwrites\n    // Split the value into two seperate bytes\n    var highByte = splitHighByte(value);\n    var lowByte = splitLowByte(value);\n    if (checkWriteTraps(offset, lowByte)) {\n        eightBitStoreIntoGBMemory(offset, lowByte);\n    }\n    var nextOffset = offset + 1;\n    if (checkWriteTraps(nextOffset, highByte)) {\n        eightBitStoreIntoGBMemory(nextOffset, highByte);\n    }\n}\nfunction sixteenBitStoreIntoGBMemory(offset, value) {\n    // Dividing into two seperate eight bit calls to help with debugging tilemap overwrites\n    // Split the value into two seperate bytes\n    var highByte = splitHighByte(value);\n    var lowByte = splitLowByte(value);\n    eightBitStoreIntoGBMemory(offset + 0, lowByte);\n    eightBitStoreIntoGBMemory(offset + 1, highByte);\n}\nfunction storeBooleanDirectlyToWasmMemory(offset, value) {\n    store(offset, value);\n}\n\n// Funcitons for setting and checking the LCD\nvar Lcd = /** @class */ (function () {\n    function Lcd() {\n    }\n    // Function called in write traps to update our hardware registers\n    Lcd.updateLcdStatus = function (value) {\n        // Bottom three bits are read only\n        var currentLcdStatus = eightBitLoadFromGBMemory(Lcd.memoryLocationLcdStatus);\n        var valueNoBottomBits = value & 0xf8;\n        var lcdStatusOnlyBottomBits = currentLcdStatus & 0x07;\n        value = valueNoBottomBits | lcdStatusOnlyBottomBits;\n        // Top bit is always 1\n        value = setBitOnByte(7, value);\n        eightBitStoreIntoGBMemory(Lcd.memoryLocationLcdStatus, value);\n    };\n    // Function called in write traps to update our hardware registers\n    Lcd.updateLcdControl = function (value) {\n        var wasLcdEnabled = Lcd.enabled;\n        Lcd.enabled = checkBitOnByte(7, value);\n        Lcd.windowTileMapDisplaySelect = checkBitOnByte(6, value);\n        Lcd.windowDisplayEnabled = checkBitOnByte(5, value);\n        Lcd.bgWindowTileDataSelect = checkBitOnByte(4, value);\n        Lcd.bgTileMapDisplaySelect = checkBitOnByte(3, value);\n        Lcd.tallSpriteSize = checkBitOnByte(2, value);\n        Lcd.spriteDisplayEnable = checkBitOnByte(1, value);\n        Lcd.bgDisplayEnabled = checkBitOnByte(0, value);\n        if (wasLcdEnabled && !Lcd.enabled) {\n            // Disable the LCD\n            resetLcd(true);\n        }\n        if (!wasLcdEnabled && Lcd.enabled) {\n            // Re-enable the LCD\n            resetLcd(false);\n        }\n    };\n    // Memory Locations\n    // Also known at STAT\n    // LCD Status (0xFF41) bits Explanation\n    // 0                0                    000                    0             00\n    //       |Coicedence Interrupt|     |Mode Interrupts|  |coincidence flag|  | Mode |\n    // Modes:\n    // 0 or 00: H-Blank\n    // 1 or 01: V-Blank\n    // 2 or 10: Searching Sprites Atts\n    // 3 or 11: Transfering Data to LCD Driver\n    Lcd.memoryLocationLcdStatus = 0xff41;\n    Lcd.currentLcdMode = 0;\n    Lcd.memoryLocationCoincidenceCompare = 0xff45;\n    Lcd.coincidenceCompare = 0;\n    // Also known as LCDC\n    // http://www.codeslinger.co.uk/pages/projects/gameboy/graphics.html\n    // Bit 7 - LCD Display Enable (0=Off, 1=On)\n    // Bit 6 - Window Tile Map Display Select (0=9800-9BFF, 1=9C00-9FFF)\n    // Bit 5 - Window Display Enable (0=Off, 1=On)\n    // Bit 4 - BG & Window Tile Data Select (0=8800-97FF, 1=8000-8FFF)\n    // Bit 3 - BG Tile Map Display Select (0=9800-9BFF, 1=9C00-9FFF)\n    // Bit 2 - OBJ (Sprite) Size (0=8x8, 1=8x16)\n    // Bit 1 - OBJ (Sprite) Display Enable (0=Off, 1=On)\n    // Bit 0 - BG Display (for CGB see below) (0=Off, 1=On\n    Lcd.memoryLocationLcdControl = 0xff40;\n    // Decoupled LCDC for caching\n    Lcd.enabled = true;\n    Lcd.windowTileMapDisplaySelect = false;\n    Lcd.windowDisplayEnabled = false;\n    Lcd.bgWindowTileDataSelect = false;\n    Lcd.bgTileMapDisplaySelect = false;\n    Lcd.tallSpriteSize = false;\n    Lcd.spriteDisplayEnable = false;\n    Lcd.bgDisplayEnabled = false;\n    return Lcd;\n}());\nfunction resetLcd(shouldBlankScreen) {\n    // Reset scanline cycle counter\n    Graphics.scanlineCycleCounter = 0;\n    Graphics.scanlineRegister = 0;\n    eightBitStoreIntoGBMemory(Graphics.memoryLocationScanlineRegister, 0);\n    // Set to mode 0\n    // https://www.reddit.com/r/EmuDev/comments/4w6479/gb_dr_mario_level_generation_issues/\n    var lcdStatus = eightBitLoadFromGBMemory(Lcd.memoryLocationLcdStatus);\n    lcdStatus = resetBitOnByte(1, lcdStatus);\n    lcdStatus = resetBitOnByte(0, lcdStatus);\n    Lcd.currentLcdMode = 0;\n    // Store the status in memory\n    eightBitStoreIntoGBMemory(Lcd.memoryLocationLcdStatus, lcdStatus);\n    // Blank the screen\n    if (shouldBlankScreen) {\n        for (var i = 0; i < FRAME_SIZE; ++i) {\n            store(FRAME_LOCATION + i, 255);\n        }\n    }\n}\n// Pass in the lcd status for performance\n// Inlined because closure compiler inlines\nfunction setLcdStatus() {\n    // Check if the Lcd was disabled\n    if (!Lcd.enabled) {\n        return;\n    }\n    // Get our current scanline, and lcd mode\n    var scanlineRegister = Graphics.scanlineRegister;\n    var lcdMode = Lcd.currentLcdMode;\n    // Default to  H-Blank\n    var newLcdMode = 0;\n    // Find our newLcd mode\n    if (scanlineRegister >= 144) {\n        // VBlank mode\n        newLcdMode = 1;\n    }\n    else {\n        var scanlineCycleCounter = Graphics.scanlineCycleCounter;\n        var MIN_CYCLES_SPRITES_LCD_MODE = Graphics.MIN_CYCLES_SPRITES_LCD_MODE();\n        if (scanlineCycleCounter >= MIN_CYCLES_SPRITES_LCD_MODE) {\n            // Searching Sprites Atts\n            newLcdMode = 2;\n        }\n        else if (scanlineCycleCounter >= MIN_CYCLES_SPRITES_LCD_MODE) {\n            // Transferring data to lcd\n            newLcdMode = 3;\n        }\n    }\n    if (lcdMode !== newLcdMode) {\n        // Get our lcd status\n        var lcdStatus = eightBitLoadFromGBMemory(Lcd.memoryLocationLcdStatus);\n        // Save our lcd mode\n        Lcd.currentLcdMode = newLcdMode;\n        var shouldRequestInterrupt = false;\n        // Set our LCD Status accordingly\n        switch (newLcdMode) {\n            case 0x00:\n                lcdStatus = resetBitOnByte(0, lcdStatus);\n                lcdStatus = resetBitOnByte(1, lcdStatus);\n                shouldRequestInterrupt = checkBitOnByte(3, lcdStatus);\n                break;\n            case 0x01:\n                lcdStatus = resetBitOnByte(1, lcdStatus);\n                lcdStatus = setBitOnByte(0, lcdStatus);\n                shouldRequestInterrupt = checkBitOnByte(4, lcdStatus);\n                break;\n            case 0x02:\n                lcdStatus = resetBitOnByte(0, lcdStatus);\n                lcdStatus = setBitOnByte(1, lcdStatus);\n                shouldRequestInterrupt = checkBitOnByte(5, lcdStatus);\n                break;\n            case 0x03:\n                lcdStatus = setBitOnByte(0, lcdStatus);\n                lcdStatus = setBitOnByte(1, lcdStatus);\n                break;\n        }\n        // Check if we want to request an interrupt, and we JUST changed modes\n        if (shouldRequestInterrupt) {\n            requestLcdInterrupt();\n        }\n        // Check for updating the Hblank HDMA\n        if (newLcdMode === 0) {\n            // Update the Hblank DMA, will simply return if not active\n            updateHblankHdma();\n        }\n        // Check for requesting a VBLANK interrupt\n        if (newLcdMode === 1) {\n            requestVBlankInterrupt();\n        }\n        // Check for the coincidence\n        lcdStatus = checkCoincidence(newLcdMode, lcdStatus);\n        // Finally, save our status\n        eightBitStoreIntoGBMemory(Lcd.memoryLocationLcdStatus, lcdStatus);\n    }\n    else if (scanlineRegister === 153) {\n        // Special Case, need to check LYC\n        // Fix prehistorik man freeze\n        var lcdStatus = eightBitLoadFromGBMemory(Lcd.memoryLocationLcdStatus);\n        lcdStatus = checkCoincidence(newLcdMode, lcdStatus);\n        eightBitStoreIntoGBMemory(Lcd.memoryLocationLcdStatus, lcdStatus);\n    }\n}\nfunction checkCoincidence(lcdMode, lcdStatus) {\n    // Check for the coincidence flag\n    // Need to check on every mode, and not just HBLANK, as checking on hblank breaks shantae, which checks on vblank\n    if ((lcdMode === 0 || lcdMode === 1) && Graphics.scanlineRegister === Lcd.coincidenceCompare) {\n        lcdStatus = setBitOnByte(2, lcdStatus);\n        if (checkBitOnByte(6, lcdStatus)) {\n            requestLcdInterrupt();\n        }\n    }\n    else {\n        lcdStatus = resetBitOnByte(2, lcdStatus);\n    }\n    return lcdStatus;\n}\n\n// Functions for rendering the background\n// NOTE: i32Portable wraps modulo here as somehow it gets converted to a double:\n// https://github.com/torch2424/wasmboy/issues/216\n// Inlined because closure compiler inlines\nfunction renderBackground(scanlineRegister, tileDataMemoryLocation, tileMapMemoryLocation) {\n    // NOTE: Camera is reffering to what you can see inside the 160x144 viewport of the entire rendered 256x256 map.\n    // Get our scrollX and scrollY (u16 to play nice with assemblyscript)\n    // let scrollX: i32 = eightBitLoadFromGBMemory(Graphics.memoryLocationScrollX);\n    // let scrollY: i32 = eightBitLoadFromGBMemory(Graphics.memoryLocationScrollY);\n    var scrollX = Graphics.scrollX;\n    var scrollY = Graphics.scrollY;\n    // Get our current pixel y positon on the 160x144 camera (Row that the scanline draws across)\n    // this is done by getting the current scroll Y position,\n    // and adding it do what Y Value the scanline is drawing on the camera.\n    var pixelYPositionInMap = scanlineRegister + scrollY;\n    // Gameboy camera will \"wrap\" around the background map,\n    // meaning that if the pixelValue is 350, then we need to subtract 256 (decimal) to get it's actual value\n    // pixel values (scrollX and scrollY) range from 0x00 - 0xFF\n    pixelYPositionInMap &= 0x100 - 1;\n    // Draw the Background scanline\n    drawBackgroundWindowScanline(scanlineRegister, tileDataMemoryLocation, tileMapMemoryLocation, pixelYPositionInMap, 0, scrollX);\n}\n// Inlined because closure compiler inlines\nfunction renderWindow(scanlineRegister, tileDataMemoryLocation, tileMapMemoryLocation) {\n    // Get our windowX and windowY\n    // let windowX: i32 = eightBitLoadFromGBMemory(Graphics.memoryLocationWindowX);\n    // let windowY: i32 = eightBitLoadFromGBMemory(Graphics.memoryLocationWindowY);\n    var windowX = Graphics.windowX;\n    var windowY = Graphics.windowY;\n    // NOTE: Camera is reffering to what you can see inside the 160x144 viewport of the entire rendered 256x256 map.\n    // First ensure that the scanline is greater than our window\n    if (scanlineRegister < windowY) {\n        // Window is not within the current camera view\n        return;\n    }\n    // WindowX is offset by 7\n    windowX -= 7;\n    // Get our current pixel y positon on the 160x144 camera (Row that the scanline draws across)\n    var pixelYPositionInMap = scanlineRegister - windowY;\n    // xOffset is simply a neagative window x\n    // NOTE: This can become negative zero?\n    // https://github.com/torch2424/wasmboy/issues/216\n    var xOffset = i32Portable(-windowX);\n    // Draw the Background scanline\n    drawBackgroundWindowScanline(scanlineRegister, tileDataMemoryLocation, tileMapMemoryLocation, pixelYPositionInMap, windowX, xOffset);\n}\n// Function frankenstein'd together to allow background and window to share the same draw scanline function\nfunction drawBackgroundWindowScanline(scanlineRegister, tileDataMemoryLocation, tileMapMemoryLocation, pixelYPositionInMap, iStart, xOffset) {\n    // Get our tile Y position in the map\n    var tileYPositionInMap = pixelYPositionInMap >> 3;\n    // Loop through x to draw the line like a CRT\n    for (var i = iStart; i < 160; ++i) {\n        // Get our Current X position of our pixel on the on the 160x144 camera\n        // this is done by getting the current scroll X position,\n        // and adding it do what X Value the scanline is drawing on the camera.\n        var pixelXPositionInMap = i + xOffset;\n        // This is to compensate wrapping, same as pixelY\n        if (pixelXPositionInMap >= 0x100) {\n            pixelXPositionInMap -= 0x100;\n        }\n        // Divide our pixel position by 8 to get our tile.\n        // Since, there are 256x256 pixels, and 32x32 tiles.\n        // 256 / 8 = 32.\n        // Also, bitshifting by 3, do do a division by 8\n        // Need to use u16s, as they will be used to compute an address, which will cause weird errors and overflows\n        var tileXPositionInMap = pixelXPositionInMap >> 3;\n        // Get our tile address on the tileMap\n        // NOTE: (tileMap represents where each tile is displayed on the screen)\n        // NOTE: (tile map represents the entire map, now just what is within the \"camera\")\n        // For instance, if we have y pixel 144. 144 / 8 = 18. 18 * 32 = line address in map memory.\n        // And we have x pixel 160. 160 / 8 = 20.\n        // * 32, because remember, this is NOT only for the camera, the actual map is 32x32. Therefore, the next tile line of the map, is 32 byte offset.\n        // Think like indexing a 2d array, as a 1d array and it make sense :)\n        var tileMapAddress = tileMapMemoryLocation + (tileYPositionInMap << 5) + tileXPositionInMap;\n        // Get the tile Id on the Tile Map\n        var tileIdFromTileMap = loadFromVramBank(tileMapAddress, 0);\n        // Now that we have our Tile Id, let's check our Tile Cache\n        var usedTileCache = false;\n        if (Config.tileCaching) {\n            var pixelsDrawn = drawLineOfTileFromTileCache(i, scanlineRegister, pixelXPositionInMap, pixelYPositionInMap, tileMapAddress, tileDataMemoryLocation, tileIdFromTileMap);\n            // Increment i by 7, not 8 because i will be incremented at end of for loop\n            if (pixelsDrawn > 0) {\n                i += pixelsDrawn - 1;\n                usedTileCache = true;\n            }\n        }\n        if (Config.tileRendering && !usedTileCache) {\n            var pixelsDrawn = drawLineOfTileFromTileId(i, scanlineRegister, pixelXPositionInMap, pixelYPositionInMap, tileMapAddress, tileDataMemoryLocation, tileIdFromTileMap);\n            // A line of a tile is 8 pixels wide, therefore increase i by (pixelsDrawn - 1), and then the for loop will increment by 1\n            // For a net increment for 8\n            if (pixelsDrawn > 0) {\n                i += pixelsDrawn - 1;\n            }\n        }\n        else if (!usedTileCache) {\n            if (Cpu.GBCEnabled) {\n                // Draw the individual pixel\n                drawColorPixelFromTileId(i, scanlineRegister, pixelXPositionInMap, pixelYPositionInMap, tileMapAddress, tileDataMemoryLocation, tileIdFromTileMap);\n            }\n            else {\n                // Draw the individual pixel\n                drawMonochromePixelFromTileId(i, scanlineRegister, pixelXPositionInMap, pixelYPositionInMap, tileDataMemoryLocation, tileIdFromTileMap);\n            }\n        }\n    }\n}\n// Function to draw a pixel for the standard GB\n// Inlined because closure compiler inlines\nfunction drawMonochromePixelFromTileId(xPixel, yPixel, pixelXPositionInMap, pixelYPositionInMap, tileDataMemoryLocation, tileIdFromTileMap) {\n    // Now we can process the the individual bytes that represent the pixel on a tile\n    // Now get our tileDataAddress for the corresponding tileID we found in the map\n    // Read the comments in _getTileDataAddress() to see what's going on.\n    // tl;dr if we had the tile map of \"a b c d\", and wanted tileId 2.\n    // This funcitons returns the start of memory locaiton for the tile 'c'.\n    var tileDataAddress = getTileDataAddress(tileDataMemoryLocation, tileIdFromTileMap);\n    // Get the y pixel of the 8 by 8 tile.\n    // Simply modulo the scanline.\n    // For instance, let's say we are printing the first line of pixels on our camera,\n    // And the first line of pixels on our tile.\n    // yPixel = 1. 1 % 8 = 1.\n    // And for the last line\n    // yPixel = 144. 144 % 8 = 0.\n    // 0 Represents last line of pixels in a tile, 1 represents first. 1 2 3 4 5 6 7 0.\n    // Because remember, we are counting lines on the display NOT including zero\n    var pixelYInTile = i32Portable(pixelYPositionInMap & 7);\n    // Remember to represent a single line of 8 pixels on a tile, we need two bytes.\n    // Therefore, we need to times our modulo by 2, to get the correct line of pixels on the tile.\n    // Again, think like you had to map a 2d array as a 1d.\n    var byteOneForLineOfTilePixels = loadFromVramBank(tileDataAddress + pixelYInTile * 2, 0);\n    var byteTwoForLineOfTilePixels = loadFromVramBank(tileDataAddress + pixelYInTile * 2 + 1, 0);\n    // Same logic as pixelYInTile.\n    // However, We need to reverse our byte,\n    // As pixel 0 is on byte 7, and pixel 1 is on byte 6, etc...\n    // Therefore, is pixelX was 2, then really is need to be 5\n    // So 2 - 7 = -5, * 1 = 5\n    // Or to simplify, 7 - 2 = 5 haha!\n    var pixelXInTile = i32Portable(pixelXPositionInMap & 7);\n    pixelXInTile = 7 - pixelXInTile;\n    // Now we can get the color for that pixel\n    // Colors are represented by getting X position of ByteTwo, and X positon of Byte One\n    // To Get the color Id.\n    // For example, the result of the color id is 0000 00[xPixelByteTwo][xPixelByteOne]\n    // See: How to draw a tile/sprite from memory: http://www.codeslinger.co.uk/pages/projects/gameboy/graphics.html\n    var paletteColorId = 0;\n    if (checkBitOnByte(pixelXInTile, byteTwoForLineOfTilePixels)) {\n        // Byte one represents the second bit in our color id, so bit shift\n        paletteColorId += 1;\n        paletteColorId = paletteColorId << 1;\n    }\n    if (checkBitOnByte(pixelXInTile, byteOneForLineOfTilePixels)) {\n        paletteColorId += 1;\n    }\n    // Not checking u8 Portability overflow here, since it can't be greater than i32 over :p\n    // Now get the colorId from the pallete, to get our final color\n    // Developers could change colorIds to represents different colors\n    // in their palette, thus we need to grab the color from there\n    //let pixelColorInTileFromPalette: u8 = getColorFromPalette(paletteColorId, Graphics.memoryLocationBackgroundPalette);\n    // Moved below for perofrmance\n    // FINALLY, RENDER THAT PIXEL!\n    // Only rendering camera for now, so coordinates are for the camera.\n    // Get the rgb value for the color Id, will be repeated into R, G, B. if not colorized\n    var hexColor = getColorizedGbHexColorFromPalette(paletteColorId, Graphics.memoryLocationBackgroundPalette);\n    setPixelOnFrame(xPixel, yPixel, 0, getRedFromHexColor(hexColor));\n    setPixelOnFrame(xPixel, yPixel, 1, getGreenFromHexColor(hexColor));\n    setPixelOnFrame(xPixel, yPixel, 2, getBlueFromHexColor(hexColor));\n    // Lastly, add the pixel to our background priority map\n    // https://github.com/torch2424/wasmBoy/issues/51\n    // Bits 0 & 1 will represent the color Id drawn by the BG/Window\n    // Bit 2 will represent if the Bg/Window has GBC priority.\n    addPriorityforPixel(xPixel, yPixel, paletteColorId);\n}\n// Function to draw a pixel from a tile in C O L O R\n// See above for more context on some variables\n// Inlined because closure compiler inlines\nfunction drawColorPixelFromTileId(xPixel, yPixel, pixelXPositionInMap, pixelYPositionInMap, tileMapAddress, tileDataMemoryLocation, tileIdFromTileMap) {\n    // Now get our tileDataAddress for the corresponding tileID we found in the map\n    // Read the comments in _getTileDataAddress() to see what's going on.\n    // tl;dr if we had the tile map of \"a b c d\", and wanted tileId 2.\n    // This funcitons returns the start of memory locaiton for the tile 'c'.\n    var tileDataAddress = getTileDataAddress(tileDataMemoryLocation, tileIdFromTileMap);\n    // Get the GB Map Attributes\n    // Bit 0-2  Background Palette number  (BGP0-7)\n    // Bit 3    Tile VRAM Bank number      (0=Bank 0, 1=Bank 1)\n    // Bit 4    Not used\n    // Bit 5    Horizontal Flip            (0=Normal, 1=Mirror horizontally)\n    // Bit 6    Vertical Flip              (0=Normal, 1=Mirror vertically)\n    // Bit 7    BG-to-OAM Priority         (0=Use OAM priority bit, 1=BG Priority)\n    var bgMapAttributes = loadFromVramBank(tileMapAddress, 1);\n    // See above for explanation\n    var pixelYInTile = i32Portable(pixelYPositionInMap & 7);\n    if (checkBitOnByte(6, bgMapAttributes)) {\n        // We are mirroring the tile, therefore, we need to opposite byte\n        // So if our pixel was 0 our of 8, it wild become 7 :)\n        pixelYInTile = 7 - pixelYInTile;\n    }\n    // Remember to represent a single line of 8 pixels on a tile, we need two bytes.\n    // Therefore, we need to times our modulo by 2, to get the correct line of pixels on the tile.\n    // But we need to load the time from a specific Vram bank\n    var vramBankId = i32Portable(checkBitOnByte(3, bgMapAttributes));\n    var byteOneForLineOfTilePixels = loadFromVramBank(tileDataAddress + pixelYInTile * 2, vramBankId);\n    var byteTwoForLineOfTilePixels = loadFromVramBank(tileDataAddress + pixelYInTile * 2 + 1, vramBankId);\n    // Get our X pixel. Need to NOT reverse it if it was flipped.\n    // See above, you have to reverse this normally\n    var pixelXInTile = i32Portable(pixelXPositionInMap & 7);\n    if (!checkBitOnByte(5, bgMapAttributes)) {\n        pixelXInTile = 7 - pixelXInTile;\n    }\n    // Now we can get the color for that pixel\n    // Colors are represented by getting X position of ByteTwo, and X positon of Byte One\n    // To Get the color Id.\n    // For example, the result of the color id is 0000 00[xPixelByteTwo][xPixelByteOne]\n    // See: How to draw a tile/sprite from memory: http://www.codeslinger.co.uk/pages/projects/gameboy/graphics.html\n    var paletteColorId = 0;\n    if (checkBitOnByte(pixelXInTile, byteTwoForLineOfTilePixels)) {\n        // Byte one represents the second bit in our color id, so bit shift\n        paletteColorId += 1;\n        paletteColorId = paletteColorId << 1;\n    }\n    if (checkBitOnByte(pixelXInTile, byteOneForLineOfTilePixels)) {\n        paletteColorId += 1;\n    }\n    // Finally lets add some, C O L O R\n    // Want the botom 3 bits\n    var bgPalette = bgMapAttributes & 0x07;\n    // Call the helper function to grab the correct color from the palette\n    var rgbColorPalette = getRgbColorFromPalette(bgPalette, paletteColorId, false);\n    // Split off into red green and blue\n    var red = getColorComponentFromRgb(0, rgbColorPalette);\n    var green = getColorComponentFromRgb(1, rgbColorPalette);\n    var blue = getColorComponentFromRgb(2, rgbColorPalette);\n    // Finally Place our colors on the things\n    setPixelOnFrame(xPixel, yPixel, 0, red);\n    setPixelOnFrame(xPixel, yPixel, 1, green);\n    setPixelOnFrame(xPixel, yPixel, 2, blue);\n    // Lastly, add the pixel to our background priority map\n    // https://github.com/torch2424/wasmBoy/issues/51\n    // Bits 0 & 1 will represent the color Id drawn by the BG/Window\n    // Bit 2 will represent if the Bg/Window has GBC priority.\n    addPriorityforPixel(xPixel, yPixel, paletteColorId, checkBitOnByte(7, bgMapAttributes));\n}\n// Function to attempt to draw the tile from the tile cache\n// Inlined because closure compiler inlines\nfunction drawLineOfTileFromTileCache(xPixel, yPixel, pixelXPositionInMap, pixelYPositionInMap, tileMapAddress, tileDataMemoryLocation, tileIdFromTileMap) {\n    // First, initialize how many pixels we have drawn\n    var pixelsDrawn = 0;\n    // Check if the current tile matches our tileId\n    // TODO: Allow the first line to use the tile cache, for some odd reason it doesn't work when scanline is 0\n    var nextXIndexToPerformCacheCheck = TileCache.nextXIndexToPerformCacheCheck;\n    if (yPixel > 0 && xPixel > 8 && tileIdFromTileMap === TileCache.tileId && xPixel === nextXIndexToPerformCacheCheck) {\n        // Was last tile flipped\n        var wasLastTileHorizontallyFlipped = checkBitOnByte(5, eightBitLoadFromGBMemory(tileMapAddress - 1));\n        var isCurrentTileHorizontallyFlipped = checkBitOnByte(5, eightBitLoadFromGBMemory(tileMapAddress));\n        // Simply copy the last 8 pixels from memory to copy the line from the tile\n        for (var tileCacheIndex = 0; tileCacheIndex < 8; ++tileCacheIndex) {\n            // Check if we need to render backwards for flipping\n            if (wasLastTileHorizontallyFlipped !== isCurrentTileHorizontallyFlipped) {\n                tileCacheIndex = 7 - tileCacheIndex;\n            }\n            var xPos = xPixel + tileCacheIndex;\n            // First check for overflow\n            if (xPos <= 160) {\n                // Get the pixel location in memory of the tile\n                var previousXPixel = xPixel - (8 - tileCacheIndex);\n                var previousTilePixelLocation = FRAME_LOCATION + getRgbPixelStart(xPos, yPixel);\n                // Cycle through the RGB\n                // for (let tileCacheRgb = 0; tileCacheRgb < 3; ++tileCacheRgb) {\n                //  setPixelOnFrame(xPixel + tileCacheIndex, yPixel, tileCacheRgb, load<u8>(previousTilePixelLocation + tileCacheRgb));\n                // }\n                // unroll\n                setPixelOnFrame(xPos, yPixel, 0, load(previousTilePixelLocation, 0));\n                setPixelOnFrame(xPos, yPixel, 1, load(previousTilePixelLocation, 1));\n                setPixelOnFrame(xPos, yPixel, 2, load(previousTilePixelLocation, 2));\n                // Copy the priority for the pixel\n                var pixelPriority = getPriorityforPixel(previousXPixel, yPixel);\n                addPriorityforPixel(xPos, yPixel, resetBitOnByte(2, pixelPriority), checkBitOnByte(2, pixelPriority));\n                pixelsDrawn++;\n            }\n        }\n    }\n    else {\n        // Save our current tile Id, and the next x value we should check the x index\n        TileCache.tileId = tileIdFromTileMap;\n    }\n    // Calculate when we should do the tileCache calculation again\n    if (xPixel >= nextXIndexToPerformCacheCheck) {\n        nextXIndexToPerformCacheCheck = xPixel + 8;\n        var xOffsetTileWidthRemainder = i32Portable(pixelXPositionInMap & 7);\n        if (xPixel < xOffsetTileWidthRemainder) {\n            nextXIndexToPerformCacheCheck += xOffsetTileWidthRemainder;\n        }\n    }\n    TileCache.nextXIndexToPerformCacheCheck = nextXIndexToPerformCacheCheck;\n    return pixelsDrawn;\n}\n// Function to draw a line of a tile in Color\n// This is for tile rendering shortcuts\n// Inlined because closure compiler inlines\nfunction drawLineOfTileFromTileId(xPixel, yPixel, pixelXPositionInMap, pixelYPositionInMap, tileMapAddress, tileDataMemoryLocation, tileIdFromTileMap) {\n    // Get the which line of the tile we are rendering\n    var tileLineY = i32Portable(pixelYPositionInMap & 7);\n    // Now lets find our tileX start and end\n    // This is for the case where i = 0, but scroll X was 3.\n    // Or i is 157, and our camera is only 160 pixels wide\n    var tileXStart = 0;\n    if (xPixel == 0) {\n        tileXStart = pixelXPositionInMap - ((pixelXPositionInMap >> 3) << 3);\n    }\n    var tileXEnd = 7;\n    if (xPixel + 8 > 160) {\n        tileXEnd = 160 - xPixel;\n    }\n    // initialize some variables for GBC\n    var bgMapAttributes = -1;\n    var vramBankId = 0;\n    if (Cpu.GBCEnabled) {\n        // Get Our GBC properties\n        bgMapAttributes = loadFromVramBank(tileMapAddress, 1);\n        vramBankId = i32Portable(checkBitOnByte(3, bgMapAttributes));\n        if (checkBitOnByte(6, bgMapAttributes)) {\n            // We are mirroring the tile, therefore, we need to opposite byte\n            // So if our pixel was 0 our of 8, it wild become 7 :)\n            tileLineY = 7 - tileLineY;\n        }\n    }\n    // Return the number of pixels drawn\n    return drawPixelsFromLineOfTile(tileIdFromTileMap, tileDataMemoryLocation, vramBankId, tileXStart, tileXEnd, tileLineY, xPixel, yPixel, 160, FRAME_LOCATION, false, 0, bgMapAttributes, -1);\n}\n\n// Functions for rendering the sprites\n// Inlined because closure compiler inlines\nfunction renderSprites(scanlineRegister, useLargerSprites) {\n    // Need to loop through all 40 sprites to check their status\n    // Going backwards since lower sprites draw over higher ones\n    // Will fix dragon warrior 3 intro\n    for (var i = 39; i >= 0; --i) {\n        // Sprites occupy 4 bytes in the sprite attribute table\n        var spriteTableIndex = i * 4;\n        // Y positon is offset by 16, X position is offset by 8\n        var index = Graphics.memoryLocationSpriteAttributesTable + spriteTableIndex;\n        var spriteYPosition = eightBitLoadFromGBMemory(index + 0);\n        var spriteXPosition = eightBitLoadFromGBMemory(index + 1);\n        var spriteTileId = eightBitLoadFromGBMemory(index + 2);\n        // Pan docs of sprite attirbute table\n        // Bit7   OBJ-to-BG Priority (0=OBJ Above BG, 1=OBJ Behind BG color 1-3)\n        //      (Used for both BG and Window. BG color 0 is always behind OBJ)\n        // Bit6   Y flip          (0=Normal, 1=Vertically mirrored)\n        // Bit5   X flip          (0=Normal, 1=Horizontally mirrored)\n        // Bit4   Palette number  **Non CGB Mode Only** (0=OBP0, 1=OBP1)\n        // Bit3   Tile VRAM-Bank  **CGB Mode Only**     (0=Bank 0, 1=Bank 1)\n        // Bit2-0 Palette number  **CGB Mode Only**     (OBP0-7)\n        // Apply sprite X and Y offset\n        // TODO: Sprites are overflowing on x if less than 8\n        spriteYPosition -= 16;\n        spriteXPosition -= 8;\n        // Find our sprite height\n        var spriteHeight = 8;\n        if (useLargerSprites) {\n            spriteHeight = 16;\n            // @binji says in 8x16 mode, even tileId always drawn first\n            // This will fix shantae sprites which always uses odd numbered indexes\n            // TODO: Do the actual Pandocs thing:\n            // \"In 8x16 mode, the lower bit of the tile number is ignored. Ie. the upper 8x8 tile is \"NN AND FEh\", and the lower 8x8 tile is \"NN OR 01h\".\"\n            // So just knock off the last bit? :)\n            spriteTileId -= spriteTileId & 1;\n        }\n        // Find if our sprite is on the current scanline\n        if (scanlineRegister >= spriteYPosition && scanlineRegister < spriteYPosition + spriteHeight) {\n            // Then we need to draw the current sprite\n            // Get our sprite attributes since we know we shall be drawing the tile\n            var spriteAttributes = eightBitLoadFromGBMemory(Graphics.memoryLocationSpriteAttributesTable + spriteTableIndex + 3);\n            // Check sprite Priority\n            var isSpritePriorityBehindWindowAndBackground = checkBitOnByte(7, spriteAttributes);\n            // Check if we should flip the sprite on the x or y axis\n            var flipSpriteY = checkBitOnByte(6, spriteAttributes);\n            var flipSpriteX = checkBitOnByte(5, spriteAttributes);\n            // TODO: Torch2424 continue here.\n            // Find which line on the sprite we are on\n            var currentSpriteLine = scanlineRegister - spriteYPosition;\n            // If we fliiped the Y axis on our sprite, need to read from memory backwards to acheive the same effect\n            if (flipSpriteY) {\n                currentSpriteLine = spriteHeight - currentSpriteLine;\n                // Bug fix for the flipped flies in link's awakening\n                currentSpriteLine -= 1;\n            }\n            // Each line of a tile takes two bytes of memory\n            currentSpriteLine <<= 1;\n            // Get our sprite tile address, need to also add the current sprite line to get the correct bytes\n            var spriteTileAddressStart = getTileDataAddress(Graphics.memoryLocationTileDataSelectOneStart, spriteTileId);\n            spriteTileAddressStart += currentSpriteLine;\n            var spriteTileAddress = spriteTileAddressStart;\n            // Find which VRAM Bank to load from\n            var vramBankId = (Cpu.GBCEnabled && checkBitOnByte(3, spriteAttributes));\n            var spriteDataByteOneForLineOfTilePixels = loadFromVramBank(spriteTileAddress + 0, vramBankId);\n            var spriteDataByteTwoForLineOfTilePixels = loadFromVramBank(spriteTileAddress + 1, vramBankId);\n            // Iterate over the width of our sprite to find our individual pixels\n            for (var tilePixel = 7; tilePixel >= 0; --tilePixel) {\n                // Get our spritePixel, and check for flipping\n                var spritePixelXInTile = tilePixel;\n                if (flipSpriteX) {\n                    spritePixelXInTile -= 7;\n                    spritePixelXInTile = -spritePixelXInTile;\n                }\n                // Get the color Id of our sprite, similar to renderBackground()\n                // With the first byte, and second byte lined up method thing\n                // Yes, the second byte comes before the first, see ./background.ts\n                var spriteColorId = 0;\n                if (checkBitOnByte(spritePixelXInTile, spriteDataByteTwoForLineOfTilePixels)) {\n                    // Byte one represents the second bit in our color id, so bit shift\n                    spriteColorId = (spriteColorId + 1) << 1;\n                }\n                if (checkBitOnByte(spritePixelXInTile, spriteDataByteOneForLineOfTilePixels)) {\n                    spriteColorId += 1;\n                }\n                // ColorId zero (last two bits of pallette) are transparent\n                // http://gbdev.gg8.se/wiki/articles/Video_Display\n                if (spriteColorId !== 0) {\n                    // Find our actual X pixel location on the gameboy \"camera\" view\n                    // This cannot be less than zero, i32 will overflow\n                    var spriteXPixelLocationInCameraView = spriteXPosition + (7 - tilePixel);\n                    if (spriteXPixelLocationInCameraView >= 0 && spriteXPixelLocationInCameraView <= 160) {\n                        // There are two cases where wouldnt draw the pixel on top of the Bg/window\n                        // 1. if isSpritePriorityBehindWindowAndBackground, sprite can only draw over color 0\n                        // 2. if bit 2 of our priority is set, then BG-to-OAM Priority from pandoc\n                        //  is active, meaning BG tile will have priority above all OBJs\n                        //  (regardless of the priority bits in OAM memory)\n                        // But if GBC and Bit 0 of LCDC is set, we always draw the object\n                        var shouldShowFromLcdcPriority = Cpu.GBCEnabled && !Lcd.bgDisplayEnabled; // LCDC Priority\n                        var shouldHideFromOamPriority = false;\n                        var shouldHideFromBgPriority = false;\n                        if (!shouldShowFromLcdcPriority) {\n                            // Now that we have our coordinates, check for sprite priority\n                            // Lets get the priority byte we put in memory\n                            var bgPriorityByte = getPriorityforPixel(spriteXPixelLocationInCameraView, scanlineRegister);\n                            var bgColorFromPriorityByte = bgPriorityByte & 0x03;\n                            // Doing an else if, since either will automatically stop drawing the pixel\n                            if (isSpritePriorityBehindWindowAndBackground && bgColorFromPriorityByte > 0) {\n                                // OAM Priority\n                                shouldHideFromOamPriority = true;\n                            }\n                            else if (Cpu.GBCEnabled && checkBitOnByte(2, bgPriorityByte) && bgColorFromPriorityByte > 0) {\n                                // Bg priority\n                                shouldHideFromBgPriority = true;\n                            }\n                        }\n                        if (shouldShowFromLcdcPriority || (!shouldHideFromOamPriority && !shouldHideFromBgPriority)) {\n                            if (!Cpu.GBCEnabled) {\n                                // Get our monochrome color RGB from the current sprite pallete\n                                // Get our sprite pallete\n                                var spritePaletteLocation = Graphics.memoryLocationSpritePaletteOne;\n                                if (checkBitOnByte(4, spriteAttributes)) {\n                                    spritePaletteLocation = Graphics.memoryLocationSpritePaletteTwo;\n                                }\n                                var hexColor = getColorizedGbHexColorFromPalette(spriteColorId, spritePaletteLocation);\n                                // Finally set the pixel!\n                                setPixelOnFrame(spriteXPixelLocationInCameraView, scanlineRegister, 0, getRedFromHexColor(hexColor));\n                                setPixelOnFrame(spriteXPixelLocationInCameraView, scanlineRegister, 1, getGreenFromHexColor(hexColor));\n                                setPixelOnFrame(spriteXPixelLocationInCameraView, scanlineRegister, 2, getBlueFromHexColor(hexColor));\n                            }\n                            else {\n                                // Get our RGB Color\n                                // Finally lets add some, C O L O R\n                                // Want the botom 3 bits\n                                var bgPalette = spriteAttributes & 0x07;\n                                // Call the helper function to grab the correct color from the palette\n                                var rgbColorPalette = getRgbColorFromPalette(bgPalette, spriteColorId, true);\n                                // Split off into red green and blue\n                                var red = getColorComponentFromRgb(0, rgbColorPalette);\n                                var green = getColorComponentFromRgb(1, rgbColorPalette);\n                                var blue = getColorComponentFromRgb(2, rgbColorPalette);\n                                // Finally Place our colors on the things\n                                setPixelOnFrame(spriteXPixelLocationInCameraView, scanlineRegister, 0, red);\n                                setPixelOnFrame(spriteXPixelLocationInCameraView, scanlineRegister, 1, green);\n                                setPixelOnFrame(spriteXPixelLocationInCameraView, scanlineRegister, 2, blue);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\n// Main Class and funcitons for rendering the gameboy display\nvar Graphics = /** @class */ (function () {\n    function Graphics() {\n    }\n    // Number of cycles to run in each batch process\n    // This number should be in sync so that graphics doesn't run too many cyles at once\n    // and does not exceed the minimum number of cyles for either scanlines, or\n    // How often we change the frame, or a channel's update process\n    Graphics.batchProcessCycles = function () {\n        return Graphics.MAX_CYCLES_PER_SCANLINE();\n    };\n    // TCAGBD says 456 per scanline, but 153 only a handful\n    Graphics.MAX_CYCLES_PER_SCANLINE = function () {\n        if (Graphics.scanlineRegister === 153) {\n            return 4 << Cpu.GBCDoubleSpeed;\n        }\n        else {\n            return 456 << Cpu.GBCDoubleSpeed;\n        }\n    };\n    Graphics.MIN_CYCLES_SPRITES_LCD_MODE = function () {\n        // TODO: Confirm these clock cyles, double similar to scanline, which TCAGBD did\n        return 376 << Cpu.GBCDoubleSpeed;\n    };\n    Graphics.MIN_CYCLES_TRANSFER_DATA_LCD_MODE = function () {\n        // TODO: Confirm these clock cyles, double similar to scanline, which TCAGBD did\n        return 249 << Cpu.GBCDoubleSpeed;\n    };\n    // Function to save the state of the class\n    Graphics.saveState = function () {\n        store(getSaveStateMemoryOffset(0x00, Graphics.saveStateSlot), Graphics.scanlineCycleCounter);\n        store(getSaveStateMemoryOffset(0x04, Graphics.saveStateSlot), Lcd.currentLcdMode);\n        eightBitStoreIntoGBMemory(Graphics.memoryLocationScanlineRegister, Graphics.scanlineRegister);\n    };\n    // Function to load the save state from memory\n    Graphics.loadState = function () {\n        Graphics.scanlineCycleCounter = load(getSaveStateMemoryOffset(0x00, Graphics.saveStateSlot));\n        Lcd.currentLcdMode = load(getSaveStateMemoryOffset(0x04, Graphics.saveStateSlot));\n        Graphics.scanlineRegister = eightBitLoadFromGBMemory(Graphics.memoryLocationScanlineRegister);\n        Lcd.updateLcdControl(eightBitLoadFromGBMemory(Lcd.memoryLocationLcdControl));\n    };\n    // Current cycles\n    // This will be used for batch processing\n    Graphics.currentCycles = 0;\n    // Count the number of cycles to keep synced with cpu cycles\n    // Found GBC cycles by finding clock speed from Gb Cycles\n    // See TCAGBD For cycles\n    Graphics.scanlineCycleCounter = 0x00;\n    // LCD\n    // scanlineRegister also known as LY\n    // See: http://bgb.bircd.org/pandocs.txt , and search \" LY \"\n    Graphics.memoryLocationScanlineRegister = 0xff44;\n    Graphics.scanlineRegister = 0;\n    Graphics.memoryLocationDmaTransfer = 0xff46;\n    // Scroll and Window\n    Graphics.memoryLocationScrollX = 0xff43;\n    Graphics.scrollX = 0;\n    Graphics.memoryLocationScrollY = 0xff42;\n    Graphics.scrollY = 0;\n    Graphics.memoryLocationWindowX = 0xff4b;\n    Graphics.windowX = 0;\n    Graphics.memoryLocationWindowY = 0xff4a;\n    Graphics.windowY = 0;\n    // Tile Maps And Data\n    Graphics.memoryLocationTileMapSelectZeroStart = 0x9800;\n    Graphics.memoryLocationTileMapSelectOneStart = 0x9c00;\n    Graphics.memoryLocationTileDataSelectZeroStart = 0x8800;\n    Graphics.memoryLocationTileDataSelectOneStart = 0x8000;\n    // Sprites\n    Graphics.memoryLocationSpriteAttributesTable = 0xfe00;\n    // Palettes\n    Graphics.memoryLocationBackgroundPalette = 0xff47;\n    Graphics.memoryLocationSpritePaletteOne = 0xff48;\n    Graphics.memoryLocationSpritePaletteTwo = 0xff49;\n    // Screen data needs to be stored in wasm memory\n    // Save States\n    Graphics.saveStateSlot = 1;\n    return Graphics;\n}());\n// Batch Process Graphics\n// http://gameboy.mongenel.com/dmg/asmmemmap.html and http://gbdev.gg8.se/wiki/articles/Video_Display\n// Function to batch process our graphics after we skipped so many cycles\n// This is not currently checked in memory read/write\nfunction batchProcessGraphics() {\n    var batchProcessCycles = Graphics.batchProcessCycles();\n    while (Graphics.currentCycles >= batchProcessCycles) {\n        updateGraphics(batchProcessCycles);\n        Graphics.currentCycles -= batchProcessCycles;\n    }\n}\n// Inlined because closure compiler inlines\nfunction initializeGraphics() {\n    // Reset Stateful Variables\n    Graphics.currentCycles = 0;\n    Graphics.scanlineCycleCounter = 0x00;\n    Graphics.scanlineRegister = 0;\n    Graphics.scrollX = 0;\n    Graphics.scrollY = 0;\n    Graphics.windowX = 0;\n    Graphics.windowY = 0;\n    Graphics.scanlineRegister = 0x90;\n    if (Cpu.GBCEnabled) {\n        // Bgb says LY is 90 on boot\n        eightBitStoreIntoGBMemory(0xff40, 0x91);\n        eightBitStoreIntoGBMemory(0xff41, 0x81);\n        // 0xFF42 -> 0xFF43 = 0x00\n        eightBitStoreIntoGBMemory(0xff44, 0x90);\n        // 0xFF45 -> 0xFF46 = 0x00\n        eightBitStoreIntoGBMemory(0xff47, 0xfc);\n        // 0xFF48 -> 0xFF4B = 0x00\n    }\n    else {\n        eightBitStoreIntoGBMemory(0xff40, 0x91);\n        eightBitStoreIntoGBMemory(0xff41, 0x85);\n        // 0xFF42 -> 0xFF45 = 0x00\n        eightBitStoreIntoGBMemory(0xff46, 0xff);\n        eightBitStoreIntoGBMemory(0xff47, 0xfc);\n        eightBitStoreIntoGBMemory(0xff48, 0xff);\n        eightBitStoreIntoGBMemory(0xff49, 0xff);\n        // 0xFF4A -> 0xFF4B = 0x00\n    }\n    // GBC VRAM Banks\n    eightBitStoreIntoGBMemory(0xff4f, 0x00);\n    eightBitStoreIntoGBMemory(0xff70, 0x01);\n    initializeColors();\n}\nfunction updateGraphics(numberOfCycles) {\n    if (Lcd.enabled) {\n        Graphics.scanlineCycleCounter += numberOfCycles;\n        var graphicsDisableScanlineRendering = Config.graphicsDisableScanlineRendering;\n        while (Graphics.scanlineCycleCounter >= Graphics.MAX_CYCLES_PER_SCANLINE()) {\n            // Reset the scanlineCycleCounter\n            // Don't set to zero to catch extra cycles\n            Graphics.scanlineCycleCounter -= Graphics.MAX_CYCLES_PER_SCANLINE();\n            // Move to next scanline\n            // let scanlineRegister: i32 = eightBitLoadFromGBMemory(Graphics.memoryLocationScanlineRegister);\n            var scanlineRegister = Graphics.scanlineRegister;\n            // Check if we've reached the last scanline\n            if (scanlineRegister === 144) {\n                // Draw the scanline\n                if (!graphicsDisableScanlineRendering) {\n                    _drawScanline(scanlineRegister);\n                }\n                else {\n                    _renderEntireFrame();\n                }\n                // Clear the priority map\n                clearPriorityMap();\n                // Reset the tile cache\n                resetTileCache();\n            }\n            else if (scanlineRegister < 144) {\n                // Draw the scanline\n                if (!graphicsDisableScanlineRendering) {\n                    _drawScanline(scanlineRegister);\n                }\n            }\n            // Post increment the scanline register after drawing\n            // TODO: Need to fix graphics timing\n            if (scanlineRegister > 153) {\n                // Check if we overflowed scanlines\n                // if so, reset our scanline number\n                scanlineRegister = 0;\n            }\n            else {\n                scanlineRegister += 1;\n            }\n            // Store our new scanline value\n            Graphics.scanlineRegister = scanlineRegister;\n            // eightBitStoreIntoGBMemory(Graphics.memoryLocationScanlineRegister, scanlineRegister);\n        }\n    }\n    // Games like Pokemon crystal want the vblank right as it turns to the value, and not have it increment after\n    // It will break and lead to an infinite loop in crystal\n    // Therefore, we want to be checking/Setting our LCD status after the scanline updates\n    setLcdStatus();\n}\n// TODO: Make this a _drawPixelOnScanline, as values can be updated while drawing a scanline\nfunction _drawScanline(scanlineRegister) {\n    // Get our seleted tile data memory location\n    var tileDataMemoryLocation = Graphics.memoryLocationTileDataSelectZeroStart;\n    if (Lcd.bgWindowTileDataSelect) {\n        tileDataMemoryLocation = Graphics.memoryLocationTileDataSelectOneStart;\n    }\n    // Check if the background is enabled\n    // NOTE: On Gameboy color, Pandocs says this does something completely different\n    // LCDC.0 - 2) CGB in CGB Mode: BG and Window Master Priority\n    // When Bit 0 is cleared, the background and window lose their priority -\n    // the sprites will be always displayed on top of background and window,\n    // independently of the priority flags in OAM and BG Map attributes.\n    // TODO: Enable this different feature for GBC\n    if (Cpu.GBCEnabled || Lcd.bgDisplayEnabled) {\n        // Get our map memory location\n        var tileMapMemoryLocation = Graphics.memoryLocationTileMapSelectZeroStart;\n        if (Lcd.bgTileMapDisplaySelect) {\n            tileMapMemoryLocation = Graphics.memoryLocationTileMapSelectOneStart;\n        }\n        // Finally, pass everything to draw the background\n        renderBackground(scanlineRegister, tileDataMemoryLocation, tileMapMemoryLocation);\n    }\n    // Check if the window is enabled, and we are currently\n    // Drawing lines on the window\n    if (Lcd.windowDisplayEnabled) {\n        // Get our map memory location\n        var tileMapMemoryLocation = Graphics.memoryLocationTileMapSelectZeroStart;\n        if (Lcd.windowTileMapDisplaySelect) {\n            tileMapMemoryLocation = Graphics.memoryLocationTileMapSelectOneStart;\n        }\n        // Finally, pass everything to draw the background\n        renderWindow(scanlineRegister, tileDataMemoryLocation, tileMapMemoryLocation);\n    }\n    if (Lcd.spriteDisplayEnable) {\n        // Sprites are enabled, render them!\n        renderSprites(scanlineRegister, Lcd.tallSpriteSize);\n    }\n}\n// Function to render everything for a frame at once\n// This is to improve performance\n// See above for comments on how things are donw\nfunction _renderEntireFrame() {\n    // Scanline needs to be in sync while we draw, thus, we can't shortcut anymore than here\n    for (var i = 0; i <= 144; ++i) {\n        _drawScanline(i);\n    }\n}\n// Function to get the start of a RGB pixel (R, G, B)\n// Inlined because closure compiler inlines\nfunction getRgbPixelStart(x, y) {\n    // Get the pixel number\n    // let pixelNumber: i32 = (y * 160) + x;\n    // Each pixel takes 3 slots, therefore, multiply by 3!\n    return (y * 160 + x) * 3;\n}\n// Also need to store current frame in memory to be read by JS\nfunction setPixelOnFrame(x, y, colorId, color) {\n    // Currently only supports 160x144\n    // Storing in X, then y\n    // So need an offset\n    store(FRAME_LOCATION + getRgbPixelStart(x, y) + colorId, color);\n}\n// Function to shortcut the memory map, and load directly from the VRAM Bank\nfunction loadFromVramBank(gameboyOffset, vramBankId) {\n    var wasmBoyAddress = gameboyOffset - Memory.videoRamLocation + GAMEBOY_INTERNAL_MEMORY_LOCATION + 0x2000 * (vramBankId & 0x01);\n    return load(wasmBoyAddress);\n}\n\n// Returns -1 if no trap found, otherwise returns a value that should be fed for the address\nfunction checkReadTraps(offset) {\n    // Cache globals used multiple times for performance\n    var videoRamLocation = Memory.videoRamLocation;\n    // Try to break early for most common scenario\n    if (offset < videoRamLocation) {\n        return -1;\n    }\n    // Check the graphics mode to see if we can read VRAM\n    // http://gbdev.gg8.se/wiki/articles/Video_Display#Accessing_VRAM_and_OAM\n    if (offset >= videoRamLocation && offset < Memory.cartridgeRamLocation) {\n        // Can only read/write from VRAM During Modes 0 - 2\n        // See graphics/lcd.ts\n        // TODO: This can do more harm than good in a beta emulator,\n        // requres precise timing, disabling for now\n        // if (Graphics.currentLcdMode > 2) {\n        //   return 0xFF;\n        // }\n        return -1;\n    }\n    // ECHO Ram, E000\tFDFF\tMirror of C000~DDFF (ECHO RAM)\n    // http://gbdev.gg8.se/wiki/articles/Memory_Map\n    if (offset >= Memory.echoRamLocation && offset < Memory.spriteInformationTableLocation) {\n        // Simply return the mirror'd value\n        return eightBitLoadFromGBMemory(offset - 0x2000);\n    }\n    // Check for individal writes\n    // Can only read/write from OAM During Modes 0 - 1\n    // See graphics/lcd.ts\n    if (offset >= Memory.spriteInformationTableLocation && offset <= Memory.spriteInformationTableLocationEnd) {\n        // Can only read/write from OAM During Mode 2\n        // See graphics/lcd.ts\n        // if (Lcd.currentLcdMode < 2) {\n        // return 0xff;\n        // }\n        // Not batch processing here for performance\n        // batchProcessGraphics();\n        // return -1;\n        return Lcd.currentLcdMode < 2 ? 0xff : -1;\n    }\n    // CPU\n    if (offset === Cpu.memoryLocationSpeedSwitch) {\n        // TCAGBD, only Bit 7 and 0 are readable, all others are 1\n        var response = 0xff;\n        var currentSpeedSwitchRegister = eightBitLoadFromGBMemory(Cpu.memoryLocationSpeedSwitch);\n        if (!checkBitOnByte(0, currentSpeedSwitchRegister)) {\n            response = resetBitOnByte(0, response);\n        }\n        if (!Cpu.GBCDoubleSpeed) {\n            response = resetBitOnByte(7, response);\n        }\n        return response;\n    }\n    // Graphics\n    // Not batch processing here for performance\n    // batchProcessGraphics();\n    if (offset === Graphics.memoryLocationScanlineRegister) {\n        eightBitStoreIntoGBMemory(offset, Graphics.scanlineRegister);\n        return Graphics.scanlineRegister;\n    }\n    // Sound\n    // http://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware#Registers\n    // TODO: Put these bounds on the Sound Class\n    if (offset >= 0xff10 && offset <= 0xff26) {\n        batchProcessAudio();\n        return SoundRegisterReadTraps(offset);\n    }\n    // FF27 - FF2F not used\n    // Final Wave Table for Channel 3\n    if (offset >= 0xff30 && offset <= 0xff3f) {\n        batchProcessAudio();\n        return -1;\n    }\n    // Timers\n    if (offset === Timers.memoryLocationDividerRegister) {\n        // Divider register in memory is just the upper 8 bits\n        // http://gbdev.gg8.se/wiki/articles/Timer_Obscure_Behaviour\n        var upperDividerRegisterBits = splitHighByte(Timers.dividerRegister);\n        eightBitStoreIntoGBMemory(offset, upperDividerRegisterBits);\n        return upperDividerRegisterBits;\n    }\n    if (offset === Timers.memoryLocationTimerCounter) {\n        eightBitStoreIntoGBMemory(offset, Timers.timerCounter);\n        return Timers.timerCounter;\n    }\n    // Interrupts\n    if (offset === Interrupts.memoryLocationInterruptRequest) {\n        // TCAGB and BGB say the top 5 bits are always 1.\n        return 0xe0 | Interrupts.interruptsRequestedValue;\n    }\n    // Joypad\n    if (offset === Joypad.memoryLocationJoypadRegister) {\n        return getJoypadState();\n    }\n    return -1;\n}\n\n// Load/Read functionality for memory\nfunction eightBitLoadFromGBMemory(gameboyOffset) {\n    return load(getWasmBoyOffsetFromGameBoyOffset(gameboyOffset));\n}\nfunction eightBitLoadFromGBMemoryWithTraps(offset) {\n    if (offset === Breakpoints.readGbMemory) {\n        Breakpoints.reachedBreakpoint = true;\n    }\n    var readTrapResult = checkReadTraps(offset);\n    return readTrapResult === -1 ? eightBitLoadFromGBMemory(offset) : readTrapResult;\n}\n// TODO: Rename this to sixteenBitLoadFromGBMemoryWithTraps\n// Inlined because closure compiler inlines\nfunction sixteenBitLoadFromGBMemory(offset) {\n    // Get our low byte\n    var lowByteReadTrapResult = checkReadTraps(offset);\n    var lowByte = lowByteReadTrapResult === -1 ? eightBitLoadFromGBMemory(offset) : lowByteReadTrapResult;\n    // Get the next offset for the second byte\n    var nextOffset = offset + 1;\n    // Get our high byte\n    var highByteReadTrapResult = checkReadTraps(nextOffset);\n    var highByte = highByteReadTrapResult === -1 ? eightBitLoadFromGBMemory(nextOffset) : highByteReadTrapResult;\n    // Concatenate the bytes and return\n    return concatenateBytes(highByte, lowByte);\n}\nfunction loadBooleanDirectlyFromWasmMemory(offset) {\n    return load(offset) > 0;\n}\n\n// WasmBoy memory map:\nvar Memory = /** @class */ (function () {\n    function Memory() {\n    }\n    // Function to save the state of the class\n    Memory.saveState = function () {\n        store(getSaveStateMemoryOffset(0x00, Memory.saveStateSlot), Memory.currentRomBank);\n        store(getSaveStateMemoryOffset(0x02, Memory.saveStateSlot), Memory.currentRamBank);\n        storeBooleanDirectlyToWasmMemory(getSaveStateMemoryOffset(0x04, Memory.saveStateSlot), Memory.isRamBankingEnabled);\n        storeBooleanDirectlyToWasmMemory(getSaveStateMemoryOffset(0x05, Memory.saveStateSlot), Memory.isMBC1RomModeEnabled);\n        storeBooleanDirectlyToWasmMemory(getSaveStateMemoryOffset(0x06, Memory.saveStateSlot), Memory.isRomOnly);\n        storeBooleanDirectlyToWasmMemory(getSaveStateMemoryOffset(0x07, Memory.saveStateSlot), Memory.isMBC1);\n        storeBooleanDirectlyToWasmMemory(getSaveStateMemoryOffset(0x08, Memory.saveStateSlot), Memory.isMBC2);\n        storeBooleanDirectlyToWasmMemory(getSaveStateMemoryOffset(0x09, Memory.saveStateSlot), Memory.isMBC3);\n        storeBooleanDirectlyToWasmMemory(getSaveStateMemoryOffset(0x0a, Memory.saveStateSlot), Memory.isMBC5);\n    };\n    // Function to load the save state from memory\n    Memory.loadState = function () {\n        Memory.currentRomBank = load(getSaveStateMemoryOffset(0x00, Memory.saveStateSlot));\n        Memory.currentRamBank = load(getSaveStateMemoryOffset(0x02, Memory.saveStateSlot));\n        Memory.isRamBankingEnabled = loadBooleanDirectlyFromWasmMemory(getSaveStateMemoryOffset(0x04, Memory.saveStateSlot));\n        Memory.isMBC1RomModeEnabled = loadBooleanDirectlyFromWasmMemory(getSaveStateMemoryOffset(0x05, Memory.saveStateSlot));\n        Memory.isRomOnly = loadBooleanDirectlyFromWasmMemory(getSaveStateMemoryOffset(0x06, Memory.saveStateSlot));\n        Memory.isMBC1 = loadBooleanDirectlyFromWasmMemory(getSaveStateMemoryOffset(0x07, Memory.saveStateSlot));\n        Memory.isMBC2 = loadBooleanDirectlyFromWasmMemory(getSaveStateMemoryOffset(0x08, Memory.saveStateSlot));\n        Memory.isMBC3 = loadBooleanDirectlyFromWasmMemory(getSaveStateMemoryOffset(0x09, Memory.saveStateSlot));\n        Memory.isMBC5 = loadBooleanDirectlyFromWasmMemory(getSaveStateMemoryOffset(0x0a, Memory.saveStateSlot));\n    };\n    // ----------------------------------\n    // Gameboy Memory Map\n    // ----------------------------------\n    // https://github.com/AntonioND/giibiiadvance/blob/master/docs/TCAGBD.pdf\n    // http://gameboy.mongenel.com/dmg/asmmemmap.html\n    // using Arrays, first index is start, second is end\n    Memory.cartridgeRomLocation = 0x0000;\n    Memory.switchableCartridgeRomLocation = 0x4000;\n    Memory.videoRamLocation = 0x8000;\n    Memory.cartridgeRamLocation = 0xa000;\n    Memory.internalRamBankZeroLocation = 0xc000;\n    // This ram bank is switchable\n    Memory.internalRamBankOneLocation = 0xd000;\n    Memory.echoRamLocation = 0xe000;\n    Memory.spriteInformationTableLocation = 0xfe00;\n    Memory.spriteInformationTableLocationEnd = 0xfe9f;\n    Memory.unusableMemoryLocation = 0xfea0;\n    Memory.unusableMemoryEndLocation = 0xfeff;\n    // Hardware I/O, 0xFF00 -> 0xFF7F\n    // Zero Page, 0xFF80 -> 0xFFFE\n    // Intterupt Enable Flag, 0xFFFF\n    // ----------------------------------\n    // Rom/Ram Banking\n    // ----------------------------------\n    // http://gbdev.gg8.se/wiki/articles/Memory_Bank_Controllers#MBC3_.28max_2MByte_ROM_and.2For_32KByte_RAM_and_Timer.29\n    // http://www.codeslinger.co.uk/pages/projects/gameboy/banking.html\n    Memory.currentRomBank = 0x00;\n    Memory.currentRamBank = 0x00;\n    Memory.isRamBankingEnabled = false;\n    Memory.isMBC1RomModeEnabled = true;\n    // Cartridge Types\n    // http://gbdev.gg8.se/wiki/articles/The_Cartridge_Header\n    Memory.isRomOnly = true;\n    Memory.isMBC1 = false;\n    Memory.isMBC2 = false;\n    Memory.isMBC3 = false;\n    Memory.isMBC5 = false;\n    // DMA\n    Memory.memoryLocationHdmaSourceHigh = 0xff51;\n    Memory.memoryLocationHdmaSourceLow = 0xff52;\n    Memory.memoryLocationHdmaDestinationHigh = 0xff53;\n    Memory.memoryLocationHdmaDestinationLow = 0xff54;\n    Memory.memoryLocationHdmaTrigger = 0xff55;\n    // Cycles accumulated for DMA\n    Memory.DMACycles = 0;\n    // Boolean we will mirror to indicate if Hdma is active\n    Memory.isHblankHdmaActive = false;\n    Memory.hblankHdmaTransferLengthRemaining = 0x00;\n    // Store the source and destination for performance, and update as needed\n    Memory.hblankHdmaSource = 0x00;\n    Memory.hblankHdmaDestination = 0x00;\n    // GBC Registers\n    Memory.memoryLocationGBCVRAMBank = 0xff4f;\n    Memory.memoryLocationGBCWRAMBank = 0xff70;\n    // Save States\n    Memory.saveStateSlot = 4;\n    return Memory;\n}());\n// Inlined because closure compiler inlines\nfunction initializeCartridge() {\n    // Reset stateful variables\n    Memory.isRamBankingEnabled = false;\n    Memory.isMBC1RomModeEnabled = true;\n    // Get our game MBC type from the cartridge header\n    // http://gbdev.gg8.se/wiki/articles/The_Cartridge_Header\n    var cartridgeType = eightBitLoadFromGBMemory(0x0147);\n    // Reset our Cartridge types\n    Memory.isRomOnly = cartridgeType === 0x00;\n    Memory.isMBC1 = cartridgeType >= 0x01 && cartridgeType <= 0x03;\n    Memory.isMBC2 = cartridgeType >= 0x05 && cartridgeType <= 0x06;\n    Memory.isMBC3 = cartridgeType >= 0x0f && cartridgeType <= 0x13;\n    Memory.isMBC5 = cartridgeType >= 0x19 && cartridgeType <= 0x1e;\n    Memory.currentRomBank = 0x01;\n    Memory.currentRamBank = 0x00;\n}\n\n// WasmBoy memory map:\n\n// Everything Static as class instances just aren't quite there yet\n// https://github.com/AssemblyScript/assemblyscript/blob/master/tests/compiler/showcase.ts\nvar Cpu = /** @class */ (function () {\n    function Cpu() {\n    }\n    Cpu.CLOCK_SPEED = function () {\n        // 2^23, thanks binji!\n        // return Cpu.GBCDoubleSpeed ? 8388608 : 4194304;\n        return 4194304 << Cpu.GBCDoubleSpeed;\n    };\n    // Cycles Per Frame = Clock Speed / fps\n    // So: 4194304 / 59.73\n    Cpu.MAX_CYCLES_PER_FRAME = function () {\n        // return Cpu.GBCDoubleSpeed ? 140448 : 70224;\n        return 70224 << Cpu.GBCDoubleSpeed;\n    };\n    // See section 4.10 of TCAGBD\n    // Cpu Halting explained: https://www.reddit.com/r/EmuDev/comments/5ie3k7/infinite_loop_trying_to_pass_blarggs_interrupt/db7xnbe/\n    Cpu.enableHalt = function () {\n        if (Interrupts.masterInterruptSwitch) {\n            Cpu.isHaltNormal = true;\n            return;\n        }\n        var haltTypeValue = Interrupts.interruptsEnabledValue & Interrupts.interruptsRequestedValue & 0x1f;\n        if (haltTypeValue === 0) {\n            Cpu.isHaltNoJump = true;\n            return;\n        }\n        Cpu.isHaltBug = true;\n    };\n    Cpu.exitHaltAndStop = function () {\n        Cpu.isHaltNoJump = false;\n        Cpu.isHaltNormal = false;\n        Cpu.isHaltBug = false;\n        Cpu.isStopped = false;\n    };\n    Cpu.isHalted = function () {\n        return Cpu.isHaltNormal || Cpu.isHaltNoJump;\n    };\n    // Function to save the state of the class\n    Cpu.saveState = function () {\n        // Registers\n        store(getSaveStateMemoryOffset(0x00, Cpu.saveStateSlot), Cpu.registerA);\n        store(getSaveStateMemoryOffset(0x01, Cpu.saveStateSlot), Cpu.registerB);\n        store(getSaveStateMemoryOffset(0x02, Cpu.saveStateSlot), Cpu.registerC);\n        store(getSaveStateMemoryOffset(0x03, Cpu.saveStateSlot), Cpu.registerD);\n        store(getSaveStateMemoryOffset(0x04, Cpu.saveStateSlot), Cpu.registerE);\n        store(getSaveStateMemoryOffset(0x05, Cpu.saveStateSlot), Cpu.registerH);\n        store(getSaveStateMemoryOffset(0x06, Cpu.saveStateSlot), Cpu.registerL);\n        store(getSaveStateMemoryOffset(0x07, Cpu.saveStateSlot), Cpu.registerF);\n        store(getSaveStateMemoryOffset(0x08, Cpu.saveStateSlot), Cpu.stackPointer);\n        store(getSaveStateMemoryOffset(0x0a, Cpu.saveStateSlot), Cpu.programCounter);\n        store(getSaveStateMemoryOffset(0x0c, Cpu.saveStateSlot), Cpu.currentCycles);\n        storeBooleanDirectlyToWasmMemory(getSaveStateMemoryOffset(0x11, Cpu.saveStateSlot), Cpu.isHaltNormal);\n        storeBooleanDirectlyToWasmMemory(getSaveStateMemoryOffset(0x12, Cpu.saveStateSlot), Cpu.isHaltNoJump);\n        storeBooleanDirectlyToWasmMemory(getSaveStateMemoryOffset(0x13, Cpu.saveStateSlot), Cpu.isHaltBug);\n        storeBooleanDirectlyToWasmMemory(getSaveStateMemoryOffset(0x14, Cpu.saveStateSlot), Cpu.isStopped);\n    };\n    // Function to load the save state from memory\n    Cpu.loadState = function () {\n        // Registers\n        Cpu.registerA = load(getSaveStateMemoryOffset(0x00, Cpu.saveStateSlot));\n        Cpu.registerB = load(getSaveStateMemoryOffset(0x01, Cpu.saveStateSlot));\n        Cpu.registerC = load(getSaveStateMemoryOffset(0x02, Cpu.saveStateSlot));\n        Cpu.registerD = load(getSaveStateMemoryOffset(0x03, Cpu.saveStateSlot));\n        Cpu.registerE = load(getSaveStateMemoryOffset(0x04, Cpu.saveStateSlot));\n        Cpu.registerH = load(getSaveStateMemoryOffset(0x05, Cpu.saveStateSlot));\n        Cpu.registerL = load(getSaveStateMemoryOffset(0x06, Cpu.saveStateSlot));\n        Cpu.registerF = load(getSaveStateMemoryOffset(0x07, Cpu.saveStateSlot));\n        Cpu.stackPointer = load(getSaveStateMemoryOffset(0x08, Cpu.saveStateSlot));\n        Cpu.programCounter = load(getSaveStateMemoryOffset(0x0a, Cpu.saveStateSlot));\n        Cpu.currentCycles = load(getSaveStateMemoryOffset(0x0c, Cpu.saveStateSlot));\n        Cpu.isHaltNormal = loadBooleanDirectlyFromWasmMemory(getSaveStateMemoryOffset(0x11, Cpu.saveStateSlot));\n        Cpu.isHaltNoJump = loadBooleanDirectlyFromWasmMemory(getSaveStateMemoryOffset(0x12, Cpu.saveStateSlot));\n        Cpu.isHaltBug = loadBooleanDirectlyFromWasmMemory(getSaveStateMemoryOffset(0x13, Cpu.saveStateSlot));\n        Cpu.isStopped = loadBooleanDirectlyFromWasmMemory(getSaveStateMemoryOffset(0x14, Cpu.saveStateSlot));\n    };\n    // Status to track if we are in Gameboy Color Mode, and GBC State\n    Cpu.GBCEnabled = false;\n    // Memory Location for the GBC Speed switch\n    // And the current status\n    Cpu.memoryLocationSpeedSwitch = 0xff4d;\n    Cpu.GBCDoubleSpeed = false;\n    // 8-bit Cpu.registers\n    Cpu.registerA = 0;\n    Cpu.registerB = 0;\n    Cpu.registerC = 0;\n    Cpu.registerD = 0;\n    Cpu.registerE = 0;\n    Cpu.registerH = 0;\n    Cpu.registerL = 0;\n    Cpu.registerF = 0;\n    // 16-bit Cpu.registers\n    Cpu.stackPointer = 0;\n    // Boot rom from 0x00 to 0x99, all games start at 0x100\n    Cpu.programCounter = 0x00;\n    // Current number of cycles, shouldn't execeed max number of cycles\n    Cpu.currentCycles = 0;\n    // HALT and STOP instructions need to stop running opcodes, but simply check timers\n    // https://github.com/nakardo/node-gameboy/blob/master/lib/cpu/opcodes.js\n    // Matt said is should work to, so it must work!\n    // TCAGBD shows three different HALT states. Therefore, we need to handle each\n    Cpu.isHaltNormal = false;\n    Cpu.isHaltNoJump = false;\n    Cpu.isHaltBug = false;\n    Cpu.isStopped = false;\n    // Save States\n    Cpu.saveStateSlot = 0;\n    return Cpu;\n}());\n// Inlined because closure compiler does so\nfunction initializeCpu() {\n    // Reset all stateful Cpu variables\n    // Cpu.GBCEnabled is done by core/initialize\n    Cpu.GBCDoubleSpeed = false;\n    Cpu.registerA = 0;\n    Cpu.registerB = 0;\n    Cpu.registerC = 0;\n    Cpu.registerD = 0;\n    Cpu.registerE = 0;\n    Cpu.registerH = 0;\n    Cpu.registerL = 0;\n    Cpu.registerF = 0;\n    Cpu.stackPointer = 0;\n    Cpu.programCounter = 0x00;\n    Cpu.currentCycles = 0;\n    Cpu.isHaltNormal = false;\n    Cpu.isHaltNoJump = false;\n    Cpu.isHaltBug = false;\n    Cpu.isStopped = false;\n    if (Cpu.GBCEnabled) {\n        // CPU Registers\n        Cpu.registerA = 0x11;\n        Cpu.registerF = 0x80;\n        Cpu.registerB = 0x00;\n        Cpu.registerC = 0x00;\n        Cpu.registerD = 0xff;\n        Cpu.registerE = 0x56;\n        Cpu.registerH = 0x00;\n        Cpu.registerL = 0x0d;\n    }\n    else {\n        // Cpu Registers\n        Cpu.registerA = 0x01;\n        Cpu.registerF = 0xb0;\n        Cpu.registerB = 0x00;\n        Cpu.registerC = 0x13;\n        Cpu.registerD = 0x00;\n        Cpu.registerE = 0xd8;\n        Cpu.registerH = 0x01;\n        Cpu.registerL = 0x4d;\n    }\n    // Cpu Control Flow\n    Cpu.programCounter = 0x100;\n    Cpu.stackPointer = 0xfffe;\n}\n\n// Imports\n// General Logic Instructions\n// Such as the ones found on the CB table and 0x40 - 0xBF\n// NOTE: Only CB table uses these for now, was mostly me realizing that I messed up, trying to be all cute and verbose :p\n// NOTE: TODO: Refactor honestly shouldn't take that long, and may happen once assembly script is improved\nfunction addARegister(register) {\n    var registerA = Cpu.registerA;\n    checkAndSetEightBitHalfCarryFlag(registerA, register);\n    checkAndSetEightBitCarryFlag(registerA, register);\n    registerA = u8Portable(registerA + register);\n    Cpu.registerA = registerA;\n    setZeroFlag$$1((registerA === 0));\n    setSubtractFlag(0);\n}\nfunction addAThroughCarryRegister(register) {\n    // Handling flags manually as they require some special overflow\n    // From: https://github.com/nakardo/node-gameboy/blob/master/lib/cpu/opcodes.js\n    // CTRL+F adc\n    var registerA = Cpu.registerA;\n    var result = u8Portable(registerA + register + getCarryFlag$$1());\n    setHalfCarryFlag(((u8Portable(registerA ^ register ^ result) & 0x10) != 0));\n    var overflowedResult = u16Portable(registerA + register + getCarryFlag$$1());\n    setCarryFlag(((overflowedResult & 0x100) > 0));\n    Cpu.registerA = result;\n    setZeroFlag$$1((result === 0));\n    setSubtractFlag(0);\n}\nfunction subARegister(register) {\n    // Need to convert the register on one line, and flip the sign on another\n    var negativeRegister = register;\n    negativeRegister = negativeRegister * -1;\n    var registerA = Cpu.registerA;\n    checkAndSetEightBitHalfCarryFlag(registerA, negativeRegister);\n    checkAndSetEightBitCarryFlag(registerA, negativeRegister);\n    registerA = u8Portable(registerA - register);\n    Cpu.registerA = registerA;\n    setZeroFlag$$1((registerA === 0));\n    setSubtractFlag(1);\n}\nfunction subAThroughCarryRegister(register) {\n    // Handling flags manually as they require some special overflow\n    // From: https://github.com/nakardo/node-gameboy/blob/master/lib/cpu/opcodes.js\n    // CTRL+F adc\n    var registerA = Cpu.registerA;\n    var result = u8Portable(registerA - register - getCarryFlag$$1());\n    var carryRegisterCheck = u8Portable((registerA ^ register ^ result) & 0x10);\n    setHalfCarryFlag((carryRegisterCheck != 0));\n    var overflowedResult = u16Portable(registerA - register - getCarryFlag$$1());\n    setCarryFlag(((overflowedResult & 0x100) > 0));\n    Cpu.registerA = result;\n    setZeroFlag$$1((result === 0));\n    setSubtractFlag(1);\n}\nfunction andARegister(register) {\n    var registerA = Cpu.registerA & register;\n    Cpu.registerA = registerA;\n    setZeroFlag$$1((registerA === 0));\n    setSubtractFlag(0);\n    setHalfCarryFlag(1);\n    setCarryFlag(0);\n}\nfunction xorARegister(register) {\n    var registerA = u8Portable(Cpu.registerA ^ register);\n    Cpu.registerA = registerA;\n    setZeroFlag$$1((registerA === 0));\n    setSubtractFlag(0);\n    setHalfCarryFlag(0);\n    setCarryFlag(0);\n}\nfunction orARegister(register) {\n    var registerA = Cpu.registerA | register;\n    Cpu.registerA = registerA;\n    setZeroFlag$$1((registerA === 0));\n    setSubtractFlag(0);\n    setHalfCarryFlag(0);\n    setCarryFlag(0);\n}\nfunction cpARegister(register) {\n    // 0xB8 - 0xBF\n    // CP B\n    // 1  4\n    // Z 1 H C\n    var registerA = Cpu.registerA;\n    var negativeRegister = register;\n    negativeRegister = negativeRegister * -1;\n    checkAndSetEightBitHalfCarryFlag(registerA, negativeRegister);\n    checkAndSetEightBitCarryFlag(registerA, negativeRegister);\n    var tempResult = registerA + negativeRegister;\n    setZeroFlag$$1((tempResult === 0));\n    setSubtractFlag(1);\n}\n// Inlined because closure compiler inlines\nfunction rotateRegisterLeft(register) {\n    // RLC register 8-bit\n    // Z 0 0 C\n    setCarryFlag(((register & 0x80) === 0x80));\n    register = rotateByteLeft(register);\n    setZeroFlag$$1((register === 0));\n    // Set all other flags to zero\n    setSubtractFlag(0);\n    setHalfCarryFlag(0);\n    // Return the register\n    return register;\n}\n// Inlined because closure compiler inlines\nfunction rotateRegisterRight(register) {\n    // RLC register 8-bit\n    // Z 0 0 C\n    // Check for the last bit, to see if it will be carried\n    setCarryFlag(((register & 0x01) > 0));\n    register = rotateByteRight(register);\n    setZeroFlag$$1((register === 0));\n    setSubtractFlag(0);\n    setHalfCarryFlag(0);\n    // Return the register\n    return register;\n}\n// Inlined because closure compiler inlines\nfunction rotateRegisterLeftThroughCarry(register) {\n    // RL register 8-bit\n    // Z 0 0 C\n    // setting has first bit since we need to use carry\n    var hasHighbit = (register & 0x80) === 0x80;\n    register = rotateByteLeftThroughCarry(register);\n    setCarryFlag(hasHighbit);\n    setZeroFlag$$1((register === 0));\n    setSubtractFlag(0);\n    setHalfCarryFlag(0);\n    return register;\n}\n// Inlined because closure compiler inlines\nfunction rotateRegisterRightThroughCarry(register) {\n    // RR register 8-bit\n    // Z 0 0 C\n    var hasLowBit = (register & 0x01) === 0x01;\n    register = rotateByteRightThroughCarry(register);\n    setCarryFlag(hasLowBit);\n    setZeroFlag$$1((register === 0));\n    setSubtractFlag(0);\n    setHalfCarryFlag(0);\n    return register;\n}\n// Inlined because closure compiler inlines\nfunction shiftLeftRegister(register) {\n    // SLA register 8-bit\n    // Z 0 0 C\n    var hasHighbit = (register & 0x80) === 0x80;\n    register = u8Portable(register << 1);\n    setCarryFlag(hasHighbit);\n    setZeroFlag$$1((register === 0));\n    setSubtractFlag(0);\n    setHalfCarryFlag(0);\n    return register;\n}\n// Inlined because closure compiler inlines\nfunction shiftRightArithmeticRegister(register) {\n    // SRA register 8-bit\n    // Z 0 0 C\n    // NOTE: This C flag may need to be set to 0;\n    // This preserves the MSB (Most significant bit)\n    var hasHighbit = (register & 0x80) === 0x80;\n    var hasLowbit = (register & 0x01) === 0x01;\n    register = u8Portable(register >> 1);\n    if (hasHighbit) {\n        register = register | 0x80;\n    }\n    setZeroFlag$$1((register === 0));\n    setSubtractFlag(0);\n    setHalfCarryFlag(0);\n    setCarryFlag(hasLowbit);\n    return register;\n}\n// Inlined because closure compiler inlines\nfunction swapNibblesOnRegister(register) {\n    // SWAP register 8-bit\n    // Z 0 0 0\n    var highNibble = register & 0xf0;\n    var lowNibble = register & 0x0f;\n    register = u8Portable((lowNibble << 4) | (highNibble >> 4));\n    setZeroFlag$$1((register === 0));\n    setSubtractFlag(0);\n    setHalfCarryFlag(0);\n    setCarryFlag(0);\n    return register;\n}\n// Inlined because closure compiler inlines\nfunction shiftRightLogicalRegister(register) {\n    // SRA register 8-bit\n    // Z 0 0 C\n    // NOTE: This C flag may need to be set to 0;\n    // This does NOT preserve MSB (most significant bit)\n    var hasLowbit = (register & 0x01) === 0x01;\n    register = u8Portable(register >> 1);\n    setZeroFlag$$1((register === 0));\n    setSubtractFlag(0);\n    setHalfCarryFlag(0);\n    setCarryFlag(hasLowbit);\n    return register;\n}\nfunction testBitOnRegister(bitPosition, register) {\n    // BIT bitPosition ,register 8-bit\n    // Z 0 1 -\n    var testByte = 0x01 << bitPosition;\n    var result = register & testByte;\n    setZeroFlag$$1((result === 0x00));\n    setSubtractFlag(0);\n    setHalfCarryFlag(1);\n    return register;\n}\nfunction setBitOnRegister(bitPosition, bitValue, register) {\n    // RES 0,B or SET 0,B depending on bit value\n    if (bitValue > 0) {\n        var setByte = 0x01 << bitPosition;\n        register = register | setByte;\n    }\n    else {\n        // NOT (byte we want)\n        // 0000 0100 becomes 1111 1011\n        var setByte = ~(0x01 << bitPosition);\n        register = register & setByte;\n    }\n    return register;\n}\n// Private function for our relative jumps\nfunction relativeJump(value) {\n    // Need to convert the value to i8, since in this case, u8 can be negative\n    var relativeJumpOffset = i8Portable(value);\n    var programCounter = Cpu.programCounter;\n    programCounter = u16Portable(programCounter + relativeJumpOffset);\n    // Realtive jump, using bgb debugger\n    // and my debugger shows,\n    // on JR you need to jump to the relative jump offset,\n    // However, if the jump fails (such as conditional), only jump +2 in total\n    programCounter = u16Portable(programCounter + 1);\n    Cpu.programCounter = programCounter;\n}\n\n// Imports\n// Handle CB Opcodes\n// NOTE: Program stpes and cycles are standardized depending on the register type\n// NOTE: Doing some funny stuff to get around not having arrays or objects\n// Inlined because closure compiler inlines.\nfunction handleCbOpcode(cbOpcode) {\n    var numberOfCycles = -1;\n    var handledOpcode = false;\n    // The result of our cb logic instruction\n    var instructionRegisterValue = 0;\n    var instructionRegisterResult = 0;\n    // Get our register number by modulo 0x08 (number of registers)\n    // cbOpcode % 0x08\n    var registerNumber = cbOpcode & 0x07;\n    // NOTE: registerNumber = register on CB table. Cpu.registerB = 0, Cpu.registerC = 1....Cpu.registerA = 7\n    switch (registerNumber) {\n        case 0:\n            instructionRegisterValue = Cpu.registerB;\n            break;\n        case 1:\n            instructionRegisterValue = Cpu.registerC;\n            break;\n        case 2:\n            instructionRegisterValue = Cpu.registerD;\n            break;\n        case 3:\n            instructionRegisterValue = Cpu.registerE;\n            break;\n        case 4:\n            instructionRegisterValue = Cpu.registerH;\n            break;\n        case 5:\n            instructionRegisterValue = Cpu.registerL;\n            break;\n        case 6:\n            // Value at register HL\n            // 4 cycles\n            instructionRegisterValue = eightBitLoadSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL));\n            break;\n        case 7:\n            instructionRegisterValue = Cpu.registerA;\n            break;\n    }\n    // Grab the high nibble to perform skips to speed up performance\n    var opcodeHighNibble = cbOpcode & 0xf0;\n    opcodeHighNibble = opcodeHighNibble >> 4;\n    // Send to the correct function\n    switch (opcodeHighNibble) {\n        case 0x00:\n            if (cbOpcode <= 0x07) {\n                // RLC register 8-bit\n                // Z 0 0 C\n                instructionRegisterResult = rotateRegisterLeft(instructionRegisterValue);\n                handledOpcode = true;\n            }\n            else if (cbOpcode <= 0x0f) {\n                // RRC register 8-bit\n                // Z 0 0 C\n                instructionRegisterResult = rotateRegisterRight(instructionRegisterValue);\n                handledOpcode = true;\n            }\n            break;\n        case 0x01:\n            if (cbOpcode <= 0x17) {\n                // RL register 8-bit\n                // Z 0 0 C\n                instructionRegisterResult = rotateRegisterLeftThroughCarry(instructionRegisterValue);\n                handledOpcode = true;\n            }\n            else if (cbOpcode <= 0x1f) {\n                // RR register 8-bit\n                // Z 0 0 C\n                instructionRegisterResult = rotateRegisterRightThroughCarry(instructionRegisterValue);\n                handledOpcode = true;\n            }\n            break;\n        case 0x02:\n            if (cbOpcode <= 0x27) {\n                // SLA register 8-bit\n                // Z 0 0 C\n                instructionRegisterResult = shiftLeftRegister(instructionRegisterValue);\n                handledOpcode = true;\n            }\n            else if (cbOpcode <= 0x2f) {\n                // SRA register 8-bit\n                // Z 0 0 0\n                instructionRegisterResult = shiftRightArithmeticRegister(instructionRegisterValue);\n                handledOpcode = true;\n            }\n            break;\n        case 0x03:\n            if (cbOpcode <= 0x37) {\n                // SWAP register 8-bit\n                // Z 0 0 0\n                instructionRegisterResult = swapNibblesOnRegister(instructionRegisterValue);\n                handledOpcode = true;\n            }\n            else if (cbOpcode <= 0x3f) {\n                // SRL B\n                // Z 0 0 C\n                instructionRegisterResult = shiftRightLogicalRegister(instructionRegisterValue);\n                handledOpcode = true;\n            }\n            break;\n        case 0x04:\n            if (cbOpcode <= 0x47) {\n                // BIT 0,register 8-bit\n                // Z 0 1 -\n                //TODO: Optimize this not to do logic of setting register back\n                instructionRegisterResult = testBitOnRegister(0, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            else if (cbOpcode <= 0x4f) {\n                // BIT 1,register 8-bit\n                // Z 0 1 -\n                instructionRegisterResult = testBitOnRegister(1, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            break;\n        case 0x05:\n            if (cbOpcode <= 0x57) {\n                // BIT 2,register 8-bit\n                // Z 0 1 -\n                instructionRegisterResult = testBitOnRegister(2, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            else if (cbOpcode <= 0x5f) {\n                // BIT 3,register 8-bit\n                // Z 0 1 -\n                instructionRegisterResult = testBitOnRegister(3, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            break;\n        case 0x06:\n            if (cbOpcode <= 0x67) {\n                // BIT 4,register 8-bit\n                // Z 0 1 -\n                instructionRegisterResult = testBitOnRegister(4, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            else if (cbOpcode <= 0x6f) {\n                // BIT 5,register 8-bit\n                // Z 0 1 -\n                instructionRegisterResult = testBitOnRegister(5, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            break;\n        case 0x07:\n            if (cbOpcode <= 0x77) {\n                // BIT 6,register 8-bit\n                // Z 0 1 -\n                instructionRegisterResult = testBitOnRegister(6, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            else if (cbOpcode <= 0x7f) {\n                // BIT 7,register 8-bit\n                // Z 0 1 -\n                instructionRegisterResult = testBitOnRegister(7, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            break;\n        case 0x08:\n            if (cbOpcode <= 0x87) {\n                // Res 0,register 8-bit\n                // - - - -\n                instructionRegisterResult = setBitOnRegister(0, 0, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            else if (cbOpcode <= 0x8f) {\n                // Res 1,register 8-bit\n                // - - - -\n                instructionRegisterResult = setBitOnRegister(1, 0, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            break;\n        case 0x09:\n            if (cbOpcode <= 0x97) {\n                // Res 2,register 8-bit\n                // - - - -\n                instructionRegisterResult = setBitOnRegister(2, 0, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            else if (cbOpcode <= 0x9f) {\n                // Res 3,register 8-bit\n                // - - - -\n                instructionRegisterResult = setBitOnRegister(3, 0, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            break;\n        case 0x0a:\n            if (cbOpcode <= 0xa7) {\n                // Res 4,register 8-bit\n                // - - - -\n                instructionRegisterResult = setBitOnRegister(4, 0, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            else if (cbOpcode <= 0xaf) {\n                // Res 5,register 8-bit\n                // - - - -\n                instructionRegisterResult = setBitOnRegister(5, 0, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            break;\n        case 0x0b:\n            if (cbOpcode <= 0xb7) {\n                // Res 6,register 8-bit\n                // - - - -\n                instructionRegisterResult = setBitOnRegister(6, 0, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            else if (cbOpcode <= 0xbf) {\n                // Res 7,register 8-bit\n                // - - - -\n                instructionRegisterResult = setBitOnRegister(7, 0, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            break;\n        case 0x0c:\n            if (cbOpcode <= 0xc7) {\n                // SET 0,register 8-bit\n                // - - - -\n                instructionRegisterResult = setBitOnRegister(0, 1, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            else if (cbOpcode <= 0xcf) {\n                // SET 1,register 8-bit\n                // - - - -\n                instructionRegisterResult = setBitOnRegister(1, 1, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            break;\n        case 0x0d:\n            if (cbOpcode <= 0xd7) {\n                // SET 2,register 8-bit\n                // - - - -\n                instructionRegisterResult = setBitOnRegister(2, 1, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            else if (cbOpcode <= 0xdf) {\n                // SET 3,register 8-bit\n                // - - - -\n                instructionRegisterResult = setBitOnRegister(3, 1, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            break;\n        case 0x0e:\n            if (cbOpcode <= 0xe7) {\n                // SET 4,register 8-bit\n                // - - - -\n                instructionRegisterResult = setBitOnRegister(4, 1, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            else if (cbOpcode <= 0xef) {\n                // SET 5,register 8-bit\n                // - - - -\n                instructionRegisterResult = setBitOnRegister(5, 1, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            break;\n        case 0x0f:\n            if (cbOpcode <= 0xf7) {\n                // SET 6,register 8-bit\n                // - - - -\n                instructionRegisterResult = setBitOnRegister(6, 1, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            else if (cbOpcode <= 0xff) {\n                // SET 7,register 8-bit\n                // - - - -\n                instructionRegisterResult = setBitOnRegister(7, 1, instructionRegisterValue);\n                handledOpcode = true;\n            }\n            break;\n    }\n    // Finally Pass back into the correct register\n    switch (registerNumber) {\n        case 0:\n            Cpu.registerB = instructionRegisterResult;\n            break;\n        case 1:\n            Cpu.registerC = instructionRegisterResult;\n            break;\n        case 2:\n            Cpu.registerD = instructionRegisterResult;\n            break;\n        case 3:\n            Cpu.registerE = instructionRegisterResult;\n            break;\n        case 4:\n            Cpu.registerH = instructionRegisterResult;\n            break;\n        case 5:\n            Cpu.registerL = instructionRegisterResult;\n            break;\n        case 6:\n            // Value at register HL\n            // Opcodes 0x40 -> 0x7F only do simple\n            // Bit test, and don't need to be stored back in memory\n            // Thus they take 4 less cycles to run\n            if (opcodeHighNibble < 0x04 || opcodeHighNibble > 0x07) {\n                // Store the result back\n                // 4 cycles\n                eightBitStoreSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL), instructionRegisterResult);\n            }\n            break;\n        case 7:\n            Cpu.registerA = instructionRegisterResult;\n            break;\n    }\n    // Finally our number of cycles\n    // Set if we handled the opcode\n    if (handledOpcode) {\n        numberOfCycles = 4;\n    }\n    // Return our number of cycles\n    return numberOfCycles;\n}\n\n// Imports\n// Take in any opcode, and decode it, and return the number of cycles\n// Program counter can be gotten from getProgramCounter();\n// Setting return value to i32 instead of u16, as we want to return a negative number on error\n// https://rednex.github.io/rgbds/gbz80.7.html\n// http://pastraiser.com/cpu/gameboy/gameboyopcodes.html\nfunction executeOpcode$$1(opcode) {\n    // Always implement the program counter by one\n    // Any other value can just subtract or add however much offset before reaching this line\n    var programCounter = Cpu.programCounter;\n    programCounter = u16Portable(programCounter + 1);\n    // Check if we are in the halt bug\n    if (Cpu.isHaltBug) {\n        // Need to not increment program counter,\n        // thus, running the next opcode twice\n        // E.g\n        // 0x76 - halt\n        // FA 34 12 - ld a,(1234)\n        // Becomes\n        // FA FA 34 ld a,(34FA)\n        // 12 ld (de),a\n        programCounter = u16Portable(programCounter - 1);\n    }\n    Cpu.programCounter = programCounter;\n    // Split our opcode into a high nibble to speed up performance\n    // Running 255 if statements is slow, even in wasm haha!\n    var opcodeHighNibble = opcode & 0xf0;\n    opcodeHighNibble = opcodeHighNibble >> 4;\n    // NOTE: @binji rule of thumb: it takes 4 cpu cycles to read one byte\n    // Therefore isntructions that use more than just the opcode (databyte one and two) will take at least\n    // 8 cyckles to use getDataByteOne(), and two cycles to use the concatented\n    // Not using a switch statement to avoid cannot redeclare this variable errors\n    // And it would be a ton of work :p\n    switch (opcodeHighNibble) {\n        case 0x00:\n            return handleOpcode0x(opcode);\n        case 0x01:\n            return handleOpcode1x(opcode);\n        case 0x02:\n            return handleOpcode2x(opcode);\n        case 0x03:\n            return handleOpcode3x(opcode);\n        case 0x04:\n            return handleOpcode4x(opcode);\n        case 0x05:\n            return handleOpcode5x(opcode);\n        case 0x06:\n            return handleOpcode6x(opcode);\n        case 0x07:\n            return handleOpcode7x(opcode);\n        case 0x08:\n            return handleOpcode8x(opcode);\n        case 0x09:\n            return handleOpcode9x(opcode);\n        case 0x0a:\n            return handleOpcodeAx(opcode);\n        case 0x0b:\n            return handleOpcodeBx(opcode);\n        case 0x0c:\n            return handleOpcodeCx(opcode);\n        case 0x0d:\n            return handleOpcodeDx(opcode);\n        case 0x0e:\n            return handleOpcodeEx(opcode);\n        default:\n            return handleOpcodeFx(opcode);\n    }\n}\n// Wrapper functions around loading and storing memory, and syncing those cycles\nfunction eightBitLoadSyncCycles(gameboyOffset) {\n    syncCycles(4);\n    return eightBitLoadFromGBMemoryWithTraps(gameboyOffset);\n}\nfunction eightBitStoreSyncCycles(gameboyOffset, value) {\n    syncCycles(4);\n    eightBitStoreIntoGBMemoryWithTraps(gameboyOffset, value);\n}\nfunction sixteenBitLoadSyncCycles(gameboyOffset) {\n    syncCycles(8);\n    // sixteen bit load has traps even though it has no label\n    return sixteenBitLoadFromGBMemory(gameboyOffset);\n}\nfunction sixteenBitStoreSyncCycles(gameboyOffset, value) {\n    syncCycles(8);\n    sixteenBitStoreIntoGBMemoryWithTraps(gameboyOffset, value);\n}\n// Functions to access the next operands of a opcode, reffering to them as \"dataBytes\"\nfunction getDataByteOne() {\n    syncCycles(4);\n    return eightBitLoadFromGBMemory(Cpu.programCounter);\n}\nfunction getDataByteTwo() {\n    syncCycles(4);\n    return eightBitLoadFromGBMemory(u16Portable(Cpu.programCounter + 1));\n}\n// Get our concatenated databyte one and getDataByteTwo()\n// Find and replace with : getConcatenatedDataByte()\nfunction getConcatenatedDataByte() {\n    return concatenateBytes(getDataByteTwo(), getDataByteOne());\n}\nfunction handleOpcode0x(opcode) {\n    switch (opcode) {\n        case 0x00:\n            // NOP\n            // 1  4\n            // No Operation\n            return 4;\n        case 0x01: {\n            // LD BC,d16\n            // 3  12\n            // 8 cycles\n            var concatenatedDataByte = getConcatenatedDataByte();\n            Cpu.registerB = splitHighByte(concatenatedDataByte);\n            Cpu.registerC = splitLowByte(concatenatedDataByte);\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 2);\n            return 4;\n        }\n        case 0x02: {\n            // LD (BC),A\n            // 1  8\n            // () means load into address pointed by BC\n            // 4 cycles\n            eightBitStoreSyncCycles(concatenateBytes(Cpu.registerB, Cpu.registerC), Cpu.registerA);\n            return 4;\n        }\n        case 0x03: {\n            // INC BC\n            // 1  8\n            var registerBC3 = concatenateBytes(Cpu.registerB, Cpu.registerC);\n            registerBC3++;\n            Cpu.registerB = splitHighByte(registerBC3);\n            Cpu.registerC = splitLowByte(registerBC3);\n            return 8;\n        }\n        case 0x04: {\n            // INC B\n            // 1  4\n            // Z 0 H -\n            var registerB = Cpu.registerB;\n            checkAndSetEightBitHalfCarryFlag(registerB, 1);\n            registerB = u8Portable(registerB + 1);\n            Cpu.registerB = registerB;\n            setZeroFlag$$1((registerB === 0));\n            setSubtractFlag(0);\n            return 4;\n        }\n        case 0x05: {\n            // DEC B\n            // 1  4\n            // Z 1 H -\n            var registerB = Cpu.registerB;\n            checkAndSetEightBitHalfCarryFlag(registerB, -1);\n            registerB = u8Portable(registerB - 1);\n            Cpu.registerB = registerB;\n            setZeroFlag$$1((registerB === 0));\n            setSubtractFlag(1);\n            return 4;\n        }\n        case 0x06: {\n            // LD B,d8\n            // 2  8\n            // 4 cycles\n            Cpu.registerB = getDataByteOne();\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 4;\n        }\n        case 0x07: {\n            // RLCA\n            // 1  4\n            // 0 0 0 C\n            // Check for the carry\n            var registerA = Cpu.registerA;\n            setCarryFlag(((registerA & 0x80) === 0x80));\n            Cpu.registerA = rotateByteLeft(registerA);\n            // Set all other flags to zero\n            setZeroFlag$$1(0);\n            setSubtractFlag(0);\n            setHalfCarryFlag(0);\n            return 4;\n        }\n        case 0x08: {\n            // LD (a16),SP\n            // 3  20\n            // Load the stack pointer into the 16 bit address represented by the two data bytes\n            // 16 cycles, 8 from data byte, 8 from sixteenbit store\n            sixteenBitStoreSyncCycles(getConcatenatedDataByte(), Cpu.stackPointer);\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 2);\n            return 4;\n        }\n        case 0x09: {\n            // ADD HL,BC\n            // 1 8\n            // - 0 H C\n            var registerHL = concatenateBytes(Cpu.registerH, Cpu.registerL);\n            var registerBC9 = concatenateBytes(Cpu.registerB, Cpu.registerC);\n            checkAndSetSixteenBitFlagsAddOverflow(registerHL, registerBC9, false);\n            var result = u16Portable((registerHL + registerBC9));\n            Cpu.registerH = splitHighByte(result);\n            Cpu.registerL = splitLowByte(result);\n            setSubtractFlag(0);\n            return 8;\n        }\n        case 0x0a: {\n            // LD A,(BC)\n            // 1 8\n            // 4 cycles from load\n            Cpu.registerA = eightBitLoadSyncCycles(concatenateBytes(Cpu.registerB, Cpu.registerC));\n            return 4;\n        }\n        case 0x0b: {\n            // DEC BC\n            // 1  8\n            var registerBCB = concatenateBytes(Cpu.registerB, Cpu.registerC);\n            registerBCB = u16Portable(registerBCB - 1);\n            Cpu.registerB = splitHighByte(registerBCB);\n            Cpu.registerC = splitLowByte(registerBCB);\n            return 8;\n        }\n        case 0x0c: {\n            // INC C\n            // 1  4\n            // Z 0 H -\n            var registerC = Cpu.registerC;\n            checkAndSetEightBitHalfCarryFlag(registerC, 1);\n            registerC = u8Portable(registerC + 1);\n            Cpu.registerC = registerC;\n            setZeroFlag$$1((registerC === 0));\n            setSubtractFlag(0);\n            return 4;\n        }\n        case 0x0d: {\n            // DEC C\n            // 1  4\n            // Z 1 H -\n            var registerC = Cpu.registerC;\n            checkAndSetEightBitHalfCarryFlag(registerC, -1);\n            registerC = u8Portable(registerC - 1);\n            Cpu.registerC = registerC;\n            setZeroFlag$$1((registerC === 0));\n            setSubtractFlag(1);\n            return 4;\n        }\n        case 0x0e: {\n            // LD C,d8\n            // 2 8\n            // 4 cycles\n            Cpu.registerC = getDataByteOne();\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 4;\n        }\n        case 0x0f: {\n            // RRCA\n            // 1 4\n            // 0 0 0 C\n            // Check for the last bit, to see if it will be carried\n            var registerA = Cpu.registerA;\n            setCarryFlag(((registerA & 0x01) > 0));\n            Cpu.registerA = rotateByteRight(registerA);\n            // Set all other flags to zero\n            setZeroFlag$$1(0);\n            setSubtractFlag(0);\n            setHalfCarryFlag(0);\n            return 4;\n        }\n    }\n    return -1;\n}\nfunction handleOpcode1x(opcode) {\n    switch (opcode) {\n        case 0x10: {\n            // STOP 0\n            // 2 4\n            // Enter CPU very low power mode. Also used to switch between double and normal speed CPU modes in GBC.\n            // Meaning Don't Decode anymore opcodes , or updated the LCD until joypad interrupt (or when button is pressed if I am wrong)\n            // See HALT\n            // If we are in gameboy color mode, set the new speed\n            if (Cpu.GBCEnabled) {\n                // 4 cycles\n                var speedSwitch = eightBitLoadSyncCycles(Cpu.memoryLocationSpeedSwitch);\n                if (checkBitOnByte(0, speedSwitch)) {\n                    // Reset the prepare bit\n                    speedSwitch = resetBitOnByte(0, speedSwitch);\n                    // Switch to the new mode, and set the speed switch to the OTHER speed, to represent our new speed\n                    if (!checkBitOnByte(7, speedSwitch)) {\n                        Cpu.GBCDoubleSpeed = true;\n                        speedSwitch = setBitOnByte(7, speedSwitch);\n                    }\n                    else {\n                        Cpu.GBCDoubleSpeed = false;\n                        speedSwitch = resetBitOnByte(7, speedSwitch);\n                    }\n                    // Store the final speed switch\n                    // 4 cycles\n                    eightBitStoreSyncCycles(Cpu.memoryLocationSpeedSwitch, speedSwitch);\n                    // Cycle accurate gameboy docs says this takes 76 clocks\n                    // 76 - 8 cycles (from load/store) = 68\n                    return 68;\n                }\n            }\n            // NOTE: This breaks Blarggs CPU tests if CGB Stop is not implemented\n            Cpu.isStopped = true;\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 4;\n        }\n        case 0x11: {\n            // LD DE,d16\n            // 3  12\n            // 8 cycles\n            var concatenatedDataByte = getConcatenatedDataByte();\n            Cpu.registerD = splitHighByte(concatenatedDataByte);\n            Cpu.registerE = splitLowByte(concatenatedDataByte);\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 2);\n            return 4;\n        }\n        case 0x12: {\n            // LD (DE),A\n            // 1 8\n            // 4 cycles\n            eightBitStoreSyncCycles(concatenateBytes(Cpu.registerD, Cpu.registerE), Cpu.registerA);\n            return 4;\n        }\n        case 0x13: {\n            // INC DE\n            // 1 8\n            var registerDE3 = concatenateBytes(Cpu.registerD, Cpu.registerE);\n            registerDE3 = u16Portable(registerDE3 + 1);\n            Cpu.registerD = splitHighByte(registerDE3);\n            Cpu.registerE = splitLowByte(registerDE3);\n            return 8;\n        }\n        case 0x14: {\n            // INC D\n            // 1  4\n            // Z 0 H -\n            var registerD = Cpu.registerD;\n            checkAndSetEightBitHalfCarryFlag(registerD, 1);\n            registerD = u8Portable(registerD + 1);\n            Cpu.registerD = registerD;\n            setZeroFlag$$1((Cpu.registerD === 0));\n            setSubtractFlag(0);\n            return 4;\n        }\n        case 0x15: {\n            // DEC D\n            // 1  4\n            // Z 1 H -\n            var registerD = Cpu.registerD;\n            checkAndSetEightBitHalfCarryFlag(registerD, -1);\n            registerD = u8Portable(registerD - 1);\n            Cpu.registerD = registerD;\n            setZeroFlag$$1((Cpu.registerD === 0));\n            setSubtractFlag(1);\n            return 4;\n        }\n        case 0x16: {\n            // LD D,d8\n            // 2 8\n            // 4 cycles\n            Cpu.registerD = getDataByteOne();\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 4;\n        }\n        case 0x17: {\n            // RLA\n            // 1 4\n            // 0 0 0 C\n            // Check for the carry\n            // setting has first bit since we need to use carry\n            var hasHighbit = (Cpu.registerA & 0x80) === 0x80;\n            Cpu.registerA = rotateByteLeftThroughCarry(Cpu.registerA);\n            // OR the carry flag to the end\n            setCarryFlag(hasHighbit);\n            // Set all other flags to zero\n            setZeroFlag$$1(0);\n            setSubtractFlag(0);\n            setHalfCarryFlag(0);\n            return 4;\n        }\n        case 0x18: {\n            // JR r8\n            // 2  12\n            // NOTE: Discoved dataByte is signed\n            // However the relative Jump Function handles this\n            // 4 cycles\n            relativeJump(getDataByteOne());\n            return 8;\n        }\n        // Relative Jump Function Handles program counter\n        case 0x19: {\n            // ADD HL,DE\n            // 1  8\n            // - 0 H C\n            var registerHL = concatenateBytes(Cpu.registerH, Cpu.registerL);\n            var registerDE9 = concatenateBytes(Cpu.registerD, Cpu.registerE);\n            checkAndSetSixteenBitFlagsAddOverflow(registerHL, registerDE9, false);\n            var result = u16Portable((registerHL + registerDE9));\n            Cpu.registerH = splitHighByte(result);\n            Cpu.registerL = splitLowByte(result);\n            setSubtractFlag(0);\n            return 8;\n        }\n        case 0x1a: {\n            // LD A,(DE)\n            // 1 8\n            var registerDEA = concatenateBytes(Cpu.registerD, Cpu.registerE);\n            // 4 cycles\n            Cpu.registerA = eightBitLoadSyncCycles(registerDEA);\n            return 4;\n        }\n        case 0x1b: {\n            // DEC DE\n            // 1 8\n            var registerDEB = concatenateBytes(Cpu.registerD, Cpu.registerE);\n            registerDEB = u16Portable(registerDEB - 1);\n            Cpu.registerD = splitHighByte(registerDEB);\n            Cpu.registerE = splitLowByte(registerDEB);\n            return 8;\n        }\n        case 0x1c: {\n            // INC E\n            // 1  4\n            // Z 0 H -\n            var registerE = Cpu.registerE;\n            checkAndSetEightBitHalfCarryFlag(registerE, 1);\n            registerE = u8Portable(registerE + 1);\n            Cpu.registerE = registerE;\n            setZeroFlag$$1((registerE === 0));\n            setSubtractFlag(0);\n            return 4;\n        }\n        case 0x1d: {\n            // DEC E\n            // 1  4\n            // Z 1 H -\n            var registerE = Cpu.registerE;\n            checkAndSetEightBitHalfCarryFlag(registerE, -1);\n            registerE = u8Portable(registerE - 1);\n            Cpu.registerE = registerE;\n            setZeroFlag$$1((registerE === 0));\n            setSubtractFlag(1);\n            return 4;\n        }\n        case 0x1e: {\n            // LD E,d8\n            // 2 8\n            // 4 cycles\n            Cpu.registerE = getDataByteOne();\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 4;\n        }\n        case 0x1f: {\n            // RRA\n            // 1 4\n            // 0 0 0 C\n            // Check for the carry\n            // setting has low bit since we need to use carry\n            var hasLowBit = (Cpu.registerA & 0x01) === 0x01;\n            Cpu.registerA = rotateByteRightThroughCarry(Cpu.registerA);\n            setCarryFlag(hasLowBit);\n            // Set all other flags to zero\n            setZeroFlag$$1(0);\n            setSubtractFlag(0);\n            setHalfCarryFlag(0);\n            return 4;\n        }\n    }\n    return -1;\n}\nfunction handleOpcode2x(opcode) {\n    switch (opcode) {\n        case 0x20: {\n            // JR NZ,r8\n            // 2  12/8\n            // NOTE: NZ stands for not [flag], so in this case, not zero flag\n            // Also, / means, if condition. so if met, 12 cycles, otherwise 8 cycles\n            if (getZeroFlag$$1() === 0) {\n                // 4 cycles\n                relativeJump(getDataByteOne());\n                // Relative Jump Funciton handles program counter\n            }\n            else {\n                Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            }\n            return 8;\n        }\n        case 0x21: {\n            // LD HL,d16\n            // 3  12\n            // 8 cycles\n            var sixteenBitDataByte = getConcatenatedDataByte();\n            Cpu.registerH = splitHighByte(sixteenBitDataByte);\n            Cpu.registerL = splitLowByte(sixteenBitDataByte);\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 2);\n            return 4;\n        }\n        case 0x22: {\n            // LD (HL+),A\n            // 1 8\n            var registerHL2 = concatenateBytes(Cpu.registerH, Cpu.registerL);\n            // 4 cycles\n            eightBitStoreSyncCycles(registerHL2, Cpu.registerA);\n            registerHL2 = u16Portable(registerHL2 + 1);\n            Cpu.registerH = splitHighByte(registerHL2);\n            Cpu.registerL = splitLowByte(registerHL2);\n            return 4;\n        }\n        case 0x23: {\n            // INC HL\n            // 1  8\n            var registerHL3 = concatenateBytes(Cpu.registerH, Cpu.registerL);\n            registerHL3 = u16Portable(registerHL3 + 1);\n            Cpu.registerH = splitHighByte(registerHL3);\n            Cpu.registerL = splitLowByte(registerHL3);\n            return 8;\n        }\n        case 0x24: {\n            // INC H\n            // 1  4\n            // Z 0 H -\n            var registerH = Cpu.registerH;\n            checkAndSetEightBitHalfCarryFlag(registerH, 1);\n            registerH = u8Portable(registerH + 1);\n            Cpu.registerH = registerH;\n            setZeroFlag$$1((registerH === 0));\n            setSubtractFlag(0);\n            return 4;\n        }\n        case 0x25: {\n            // DEC H\n            // 1  4\n            // Z 1 H -\n            var registerH = Cpu.registerH;\n            checkAndSetEightBitHalfCarryFlag(registerH, -1);\n            registerH = u8Portable(registerH - 1);\n            Cpu.registerH = registerH;\n            setZeroFlag$$1((registerH === 0));\n            setSubtractFlag(1);\n            return 4;\n        }\n        case 0x26: {\n            // LD H,d8\n            // 2 8\n            // 4 cycles\n            Cpu.registerH = getDataByteOne();\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 4;\n        }\n        case 0x27: {\n            // DAA\n            // 1 4\n            // Z - 0 C\n            var adjustedRegister = 0;\n            var adjustment = 0;\n            if (getHalfCarryFlag() > 0) {\n                adjustment = adjustment | 0x06;\n            }\n            if (getCarryFlag$$1() > 0) {\n                adjustment = adjustment | 0x60;\n            }\n            var registerA = Cpu.registerA;\n            if (getSubtractFlag() > 0) {\n                adjustedRegister = u8Portable(registerA - adjustment);\n            }\n            else {\n                if ((registerA & 0x0f) > 0x09) {\n                    adjustment = adjustment | 0x06;\n                }\n                if (registerA > 0x99) {\n                    adjustment = adjustment | 0x60;\n                }\n                adjustedRegister = u8Portable(registerA + adjustment);\n            }\n            // Now set our flags to the correct values\n            setZeroFlag$$1((adjustedRegister === 0));\n            setCarryFlag(((adjustment & 0x60) !== 0));\n            setHalfCarryFlag(0);\n            Cpu.registerA = adjustedRegister;\n            return 4;\n        }\n        case 0x28: {\n            // JR Z,r8\n            // 2  12/8\n            if (getZeroFlag$$1() > 0) {\n                // 4 cycles\n                relativeJump(getDataByteOne());\n                // Relative Jump funciton handles pogram counter\n            }\n            else {\n                Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            }\n            return 8;\n        }\n        case 0x29: {\n            // ADD HL,HL\n            // 1  8\n            // - 0 H C\n            var registerHL9 = concatenateBytes(Cpu.registerH, Cpu.registerL);\n            checkAndSetSixteenBitFlagsAddOverflow(registerHL9, registerHL9, false);\n            registerHL9 = u16Portable(registerHL9 * 2);\n            Cpu.registerH = splitHighByte(registerHL9);\n            Cpu.registerL = splitLowByte(registerHL9);\n            setSubtractFlag(0);\n            return 8;\n        }\n        case 0x2a: {\n            // LD A,(HL+)\n            // 1  8\n            var registerHLA = concatenateBytes(Cpu.registerH, Cpu.registerL);\n            // 4 cycles\n            Cpu.registerA = eightBitLoadSyncCycles(registerHLA);\n            registerHLA = u16Portable(registerHLA + 1);\n            Cpu.registerH = splitHighByte(registerHLA);\n            Cpu.registerL = splitLowByte(registerHLA);\n            return 4;\n        }\n        case 0x2b: {\n            // DEC HL\n            // 1 8\n            var registerHLB = concatenateBytes(Cpu.registerH, Cpu.registerL);\n            registerHLB = u16Portable(registerHLB - 1);\n            Cpu.registerH = splitHighByte(registerHLB);\n            Cpu.registerL = splitLowByte(registerHLB);\n            return 8;\n        }\n        case 0x2c: {\n            // INC L\n            // 1  4\n            // Z 0 H -\n            var registerL = Cpu.registerL;\n            checkAndSetEightBitHalfCarryFlag(registerL, 1);\n            registerL = u8Portable(registerL + 1);\n            Cpu.registerL = registerL;\n            setZeroFlag$$1((registerL === 0));\n            setSubtractFlag(0);\n            return 4;\n        }\n        case 0x2d: {\n            // DEC L\n            // 1  4\n            // Z 1 H -\n            var registerL = Cpu.registerL;\n            checkAndSetEightBitHalfCarryFlag(registerL, -1);\n            registerL = u8Portable(registerL - 1);\n            Cpu.registerL = registerL;\n            setZeroFlag$$1((registerL === 0));\n            setSubtractFlag(1);\n            return 4;\n        }\n        case 0x2e: {\n            // LD L,d8\n            // 2  8\n            // 4 cycles\n            Cpu.registerL = getDataByteOne();\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 4;\n        }\n        case 0x2f: {\n            // CPL\n            // 1 4\n            // - 1 1 -\n            Cpu.registerA = ~Cpu.registerA;\n            setSubtractFlag(1);\n            setHalfCarryFlag(1);\n            return 4;\n        }\n    }\n    return -1;\n}\nfunction handleOpcode3x(opcode) {\n    switch (opcode) {\n        case 0x30: {\n            // JR NC,r8\n            // 2 12 / 8\n            if (getCarryFlag$$1() === 0) {\n                // 4 cycles\n                relativeJump(getDataByteOne());\n                // Relative Jump function handles program counter\n            }\n            else {\n                Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            }\n            return 8;\n        }\n        case 0x31: {\n            // LD SP,d16\n            // 3 12\n            // 8 cycles\n            Cpu.stackPointer = getConcatenatedDataByte();\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 2);\n            return 4;\n        }\n        case 0x32: {\n            // LD (HL-),A\n            // 1 8\n            var registerHL2 = concatenateBytes(Cpu.registerH, Cpu.registerL);\n            // 4 cycles\n            eightBitStoreSyncCycles(registerHL2, Cpu.registerA);\n            registerHL2 = u16Portable(registerHL2 - 1);\n            Cpu.registerH = splitHighByte(registerHL2);\n            Cpu.registerL = splitLowByte(registerHL2);\n            return 4;\n        }\n        case 0x33: {\n            // INC SP\n            // 1 8\n            Cpu.stackPointer = u16Portable(Cpu.stackPointer + 1);\n            return 8;\n        }\n        case 0x34: {\n            // INC (HL)\n            // 1  12\n            // Z 0 H -\n            var registerHL4 = concatenateBytes(Cpu.registerH, Cpu.registerL);\n            // 4 cycles\n            var valueAtHL4 = eightBitLoadSyncCycles(registerHL4);\n            // Creating a varible for this to fix assemblyscript overflow bug\n            // Requires explicit casting\n            // https://github.com/AssemblyScript/assemblyscript/issues/26\n            var incrementer = 1;\n            checkAndSetEightBitHalfCarryFlag(valueAtHL4, incrementer);\n            valueAtHL4 = u8Portable(valueAtHL4 + incrementer);\n            setZeroFlag$$1((valueAtHL4 === 0));\n            setSubtractFlag(0);\n            // 4 cycles\n            eightBitStoreSyncCycles(registerHL4, valueAtHL4);\n            return 4;\n        }\n        case 0x35: {\n            // DEC (HL)\n            // 1  12\n            // Z 1 H -\n            var registerHL5 = concatenateBytes(Cpu.registerH, Cpu.registerL);\n            // 4 cycles\n            var valueAtHL5 = eightBitLoadSyncCycles(registerHL5);\n            // NOTE: This opcode may not overflow correctly,\n            // Please see previous opcode\n            checkAndSetEightBitHalfCarryFlag(valueAtHL5, -1);\n            valueAtHL5 = u8Portable(valueAtHL5 - 1);\n            setZeroFlag$$1((valueAtHL5 === 0));\n            setSubtractFlag(1);\n            // 4 cycles\n            eightBitStoreSyncCycles(registerHL5, valueAtHL5);\n            return 4;\n        }\n        case 0x36: {\n            // LD (HL),d8\n            // 2  12\n            // 8 cycles, 4 from store, 4 from data byte\n            eightBitStoreSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL), getDataByteOne());\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 4;\n        }\n        case 0x37: {\n            // SCF\n            // 1  4\n            // - 0 0 1\n            // Simply set the carry flag\n            setSubtractFlag(0);\n            setHalfCarryFlag(0);\n            setCarryFlag(1);\n            return 4;\n        }\n        case 0x38: {\n            // JR C,r8\n            // 2 12/8\n            if (getCarryFlag$$1() === 1) {\n                // 4 cycles\n                relativeJump(getDataByteOne());\n                // Relative Jump Funciton handles program counter\n            }\n            else {\n                Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            }\n            return 8;\n        }\n        case 0x39: {\n            // ADD HL,SP\n            // 1 8\n            // - 0 H C\n            var registerHL9 = concatenateBytes(Cpu.registerH, Cpu.registerL);\n            checkAndSetSixteenBitFlagsAddOverflow(registerHL9, Cpu.stackPointer, false);\n            var result = u16Portable((registerHL9 + Cpu.stackPointer));\n            Cpu.registerH = splitHighByte(result);\n            Cpu.registerL = splitLowByte(result);\n            setSubtractFlag(0);\n            return 8;\n        }\n        case 0x3a: {\n            // LD A,(HL-)\n            // 1 8\n            var registerHLA = concatenateBytes(Cpu.registerH, Cpu.registerL);\n            // 4 cycles\n            Cpu.registerA = eightBitLoadSyncCycles(registerHLA);\n            registerHLA = u16Portable(registerHLA - 1);\n            Cpu.registerH = splitHighByte(registerHLA);\n            Cpu.registerL = splitLowByte(registerHLA);\n            return 4;\n        }\n        case 0x3b: {\n            // DEC SP\n            // 1 8\n            Cpu.stackPointer = u16Portable(Cpu.stackPointer - 1);\n            return 8;\n        }\n        case 0x3c: {\n            // INC A\n            // 1  4\n            // Z 0 H -\n            var registerA = Cpu.registerA;\n            checkAndSetEightBitHalfCarryFlag(registerA, 1);\n            registerA = u8Portable(registerA + 1);\n            Cpu.registerA = registerA;\n            setZeroFlag$$1((registerA === 0));\n            setSubtractFlag(0);\n            return 4;\n        }\n        case 0x3d: {\n            // DEC A\n            // 1  4\n            // Z 1 H -\n            var registerA = Cpu.registerA;\n            checkAndSetEightBitHalfCarryFlag(registerA, -1);\n            registerA = u8Portable(registerA - 1);\n            Cpu.registerA = registerA;\n            setZeroFlag$$1((registerA === 0));\n            setSubtractFlag(1);\n            return 4;\n        }\n        case 0x3e: {\n            // LD A,d8\n            // 2 8\n            // 4 cycles\n            Cpu.registerA = getDataByteOne();\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 4;\n        }\n        case 0x3f: {\n            // CCF\n            // 1 4\n            // - 0 0 C\n            setSubtractFlag(0);\n            setHalfCarryFlag(0);\n            setCarryFlag((getCarryFlag$$1() <= 0));\n            return 4;\n        }\n    }\n    return -1;\n}\nfunction handleOpcode4x(opcode) {\n    switch (opcode) {\n        case 0x40:\n            // LD B,B\n            // 1 4\n            // Load B into B, Do nothing\n            return 4;\n        case 0x41:\n            // LD B,C\n            // 1 4\n            Cpu.registerB = Cpu.registerC;\n            return 4;\n        case 0x42:\n            // LD B,D\n            // 1 4\n            Cpu.registerB = Cpu.registerD;\n            return 4;\n        case 0x43:\n            // LD B,E\n            // 1 4\n            Cpu.registerB = Cpu.registerE;\n            return 4;\n        case 0x44:\n            // LD B,H\n            // 1 4\n            Cpu.registerB = Cpu.registerH;\n            return 4;\n        case 0x45:\n            // LD B,L\n            // 1 4\n            Cpu.registerB = Cpu.registerL;\n            return 4;\n        case 0x46:\n            // LD B,(HL)\n            // 1 8\n            // 4 cycles\n            Cpu.registerB = eightBitLoadSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL));\n            return 4;\n        case 0x47:\n            // LD B,A\n            // 1 4\n            Cpu.registerB = Cpu.registerA;\n            return 4;\n        case 0x48:\n            // LD C,B\n            // 1 4\n            Cpu.registerC = Cpu.registerB;\n            return 4;\n        case 0x49:\n            // LD C,C\n            // 1 4\n            // Do nothing\n            return 4;\n        case 0x4a:\n            // LD C,D\n            // 1 4\n            Cpu.registerC = Cpu.registerD;\n            return 4;\n        case 0x4b:\n            // LD C,E\n            // 1 4\n            Cpu.registerC = Cpu.registerE;\n            return 4;\n        case 0x4c:\n            // LD C,H\n            // 1 4\n            Cpu.registerC = Cpu.registerH;\n            return 4;\n        case 0x4d:\n            // LD C,L\n            // 1 4\n            Cpu.registerC = Cpu.registerL;\n            return 4;\n        case 0x4e:\n            // LD C,(HL)\n            // 1 8\n            // 4 cycles\n            Cpu.registerC = eightBitLoadSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL));\n            return 4;\n        case 0x4f:\n            // LD C,A\n            // 1 4\n            Cpu.registerC = Cpu.registerA;\n            return 4;\n    }\n    return -1;\n}\nfunction handleOpcode5x(opcode) {\n    switch (opcode) {\n        case 0x50:\n            // LD D,B\n            // 1 4\n            Cpu.registerD = Cpu.registerB;\n            return 4;\n        case 0x51:\n            // LD D,C\n            // 1 4\n            Cpu.registerD = Cpu.registerC;\n            return 4;\n        case 0x52:\n            // LD D,D\n            // 1 4\n            // Do Nothing\n            return 4;\n        case 0x53:\n            // LD D,E\n            // 1 4\n            Cpu.registerD = Cpu.registerE;\n            return 4;\n        case 0x54:\n            // LD D,H\n            // 1 4\n            Cpu.registerD = Cpu.registerH;\n            return 4;\n        case 0x55:\n            // LD D,L\n            // 1 4\n            Cpu.registerD = Cpu.registerL;\n            return 4;\n        case 0x56:\n            // LD D,(HL)\n            // 1 8\n            // 4 cycles\n            Cpu.registerD = eightBitLoadSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL));\n            return 4;\n        case 0x57:\n            // LD D,A\n            // 1 4\n            Cpu.registerD = Cpu.registerA;\n            return 4;\n        case 0x58:\n            // LD E,B\n            // 1 4\n            Cpu.registerE = Cpu.registerB;\n            return 4;\n        case 0x59:\n            // LD E,C\n            // 1 4\n            Cpu.registerE = Cpu.registerC;\n            return 4;\n        case 0x5a:\n            // LD E,D\n            // 1 4\n            Cpu.registerE = Cpu.registerD;\n            return 4;\n        case 0x5b:\n            // LD E,E\n            // 1 4\n            // Do Nothing\n            return 4;\n        case 0x5c:\n            // LD E,H\n            // 1 4\n            Cpu.registerE = Cpu.registerH;\n            return 4;\n        case 0x5d:\n            // LD E,L\n            // 1 4\n            Cpu.registerE = Cpu.registerL;\n            return 4;\n        case 0x5e:\n            // LD E,(HL)\n            // 1 8\n            // 4 cycles\n            Cpu.registerE = eightBitLoadSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL));\n            return 4;\n        case 0x5f:\n            // LD E,A\n            // 1 4\n            Cpu.registerE = Cpu.registerA;\n            return 4;\n    }\n    return -1;\n}\nfunction handleOpcode6x(opcode) {\n    switch (opcode) {\n        case 0x60:\n            // LD H,B\n            // 1 4\n            Cpu.registerH = Cpu.registerB;\n            return 4;\n        case 0x61:\n            // LD H,C\n            // 1 4\n            Cpu.registerH = Cpu.registerC;\n            return 4;\n        case 0x62:\n            // LD H,D\n            // 1 4\n            Cpu.registerH = Cpu.registerD;\n            return 4;\n        case 0x63:\n            // LD H,E\n            // 1 4\n            Cpu.registerH = Cpu.registerE;\n            return 4;\n        case 0x64:\n            // LD H,H\n            // 1 4\n            Cpu.registerH = Cpu.registerH;\n            return 4;\n        case 0x65:\n            // LD H,L\n            // 1 4\n            Cpu.registerH = Cpu.registerL;\n            return 4;\n        case 0x66:\n            // LD H,(HL)\n            // 1 8\n            // 4 cycles\n            Cpu.registerH = eightBitLoadSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL));\n            return 4;\n        case 0x67:\n            // LD H,A\n            // 1 4\n            Cpu.registerH = Cpu.registerA;\n            return 4;\n        case 0x68:\n            // LD L,B\n            // 1 4\n            Cpu.registerL = Cpu.registerB;\n            return 4;\n        case 0x69:\n            // LD L,C\n            // 1 4\n            Cpu.registerL = Cpu.registerC;\n            return 4;\n        case 0x6a:\n            // LD L,D\n            // 1 4\n            Cpu.registerL = Cpu.registerD;\n            return 4;\n        case 0x6b:\n            // LD L,E\n            // 1 4\n            Cpu.registerL = Cpu.registerE;\n            return 4;\n        case 0x6c:\n            // LD L,H\n            // 1 4\n            Cpu.registerL = Cpu.registerH;\n            return 4;\n        case 0x6d:\n            // LD L,L\n            // 1 4\n            Cpu.registerL = Cpu.registerL;\n            return 4;\n        case 0x6e:\n            // LD L,(HL)\n            // 1 8\n            // 4 cycles\n            Cpu.registerL = eightBitLoadSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL));\n            return 4;\n        case 0x6f:\n            // LD L,A\n            // 1 4\n            Cpu.registerL = Cpu.registerA;\n            return 4;\n    }\n    return -1;\n}\nfunction handleOpcode7x(opcode) {\n    switch (opcode) {\n        case 0x70:\n            // LD (HL),B\n            // 1 8\n            // 4 cycles\n            eightBitStoreSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL), Cpu.registerB);\n            return 4;\n        case 0x71:\n            // LD (HL),C\n            // 1 8\n            // 4 cycles\n            eightBitStoreSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL), Cpu.registerC);\n            return 4;\n        case 0x72:\n            // LD (HL),D\n            // 1 8\n            // 4 cycles\n            eightBitStoreSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL), Cpu.registerD);\n            return 4;\n        case 0x73:\n            // LD (HL),E\n            // 1 8\n            // 4 cycles\n            eightBitStoreSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL), Cpu.registerE);\n            return 4;\n        case 0x74:\n            // LD (HL),H\n            // 1 8\n            // 4 cycles\n            eightBitStoreSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL), Cpu.registerH);\n            return 4;\n        case 0x75:\n            // LD (HL),L\n            // 1 8\n            // 4 cycles\n            eightBitStoreSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL), Cpu.registerL);\n            return 4;\n        case 0x76:\n            // HALT\n            // 1 4\n            // Enter CPU very low power mode\n            // Meaning Don't Decode anymore opcodes until an interrupt occurs\n            // Still need to do timers and things\n            // Can't Halt during an HDMA\n            // https://gist.github.com/drhelius/3394856\n            if (!Memory.isHblankHdmaActive) {\n                Cpu.enableHalt();\n            }\n            return 4;\n        case 0x77:\n            // LD (HL),A\n            // 1 8\n            // 4 cycles\n            eightBitStoreSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL), Cpu.registerA);\n            return 4;\n        case 0x78:\n            // LD A,B\n            // 1 4\n            Cpu.registerA = Cpu.registerB;\n            return 4;\n        case 0x79:\n            // LD A,C\n            // 1 4\n            Cpu.registerA = Cpu.registerC;\n            return 4;\n        case 0x7a:\n            // LD A,D\n            // 1 4\n            Cpu.registerA = Cpu.registerD;\n            return 4;\n        case 0x7b:\n            // LD A,E\n            // 1 4\n            Cpu.registerA = Cpu.registerE;\n            return 4;\n        case 0x7c:\n            // LD A,H\n            // 1 4\n            Cpu.registerA = Cpu.registerH;\n            return 4;\n        case 0x7d:\n            // LD A,L\n            // 1 4\n            Cpu.registerA = Cpu.registerL;\n            return 4;\n        case 0x7e:\n            // LD A,(HL)\n            // 1 8\n            // NOTE: Thanks to @binji for catching that this should be 8 cycles, not 4\n            // 4 cycles\n            Cpu.registerA = eightBitLoadSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL));\n            return 4;\n        case 0x7f:\n            // LD A,A\n            // 1 4\n            // Do Nothing\n            return 4;\n    }\n    return -1;\n}\nfunction handleOpcode8x(opcode) {\n    switch (opcode) {\n        case 0x80:\n            // ADD A,B\n            // 1 4\n            // Z 0 H C\n            addARegister(Cpu.registerB);\n            return 4;\n        case 0x81:\n            // ADD A,C\n            // 1 4\n            // Z 0 H C\n            addARegister(Cpu.registerC);\n            return 4;\n        case 0x82:\n            // ADD A,D\n            // 1 4\n            // Z 0 H C\n            addARegister(Cpu.registerD);\n            return 4;\n        case 0x83:\n            // ADD A,E\n            // 1 4\n            // Z 0 H C\n            addARegister(Cpu.registerE);\n            return 4;\n        case 0x84:\n            // ADD A,H\n            // 1 4\n            // Z 0 H C\n            addARegister(Cpu.registerH);\n            return 4;\n        case 0x85:\n            // ADD A,L\n            // 1 4\n            // Z 0 H C\n            addARegister(Cpu.registerL);\n            return 4;\n        case 0x86:\n            // ADD A,(HL)\n            // 1 8\n            // Z 0 H C\n            // 4 cycles\n            var valueAtHL6 = eightBitLoadSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL));\n            addARegister(valueAtHL6);\n            return 4;\n        case 0x87:\n            // ADD A,A\n            // 1 4\n            // Z 0 H C\n            addARegister(Cpu.registerA);\n            return 4;\n        case 0x88:\n            // ADC A,B\n            // 1 4\n            // Z 0 H C\n            addAThroughCarryRegister(Cpu.registerB);\n            return 4;\n        case 0x89:\n            // ADC A,C\n            // 1 4\n            // Z 0 H C\n            addAThroughCarryRegister(Cpu.registerC);\n            return 4;\n        case 0x8a:\n            // ADC A,D\n            // 1 4\n            // Z 0 H C\n            addAThroughCarryRegister(Cpu.registerD);\n            return 4;\n        case 0x8b:\n            // ADC A,E\n            // 1 4\n            // Z 0 H C\n            addAThroughCarryRegister(Cpu.registerE);\n            return 4;\n        case 0x8c:\n            // ADC A,H\n            // 1 4\n            // Z 0 H C\n            addAThroughCarryRegister(Cpu.registerH);\n            return 4;\n        case 0x8d:\n            // ADC A,L\n            // 1 4\n            // Z 0 H C\n            addAThroughCarryRegister(Cpu.registerL);\n            return 4;\n        case 0x8e:\n            // ADC A,(HL)\n            // 1 8\n            // Z 0 H C\n            // 4 cycles\n            var valueAtHLE = eightBitLoadSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL));\n            addAThroughCarryRegister(valueAtHLE);\n            return 4;\n        case 0x8f:\n            // ADC A,A\n            // 1 4\n            // Z 0 H C\n            addAThroughCarryRegister(Cpu.registerA);\n            return 4;\n    }\n    return -1;\n}\nfunction handleOpcode9x(opcode) {\n    switch (opcode) {\n        case 0x90:\n            // SUB B\n            // 1  4\n            // Z 1 H C\n            subARegister(Cpu.registerB);\n            return 4;\n        case 0x91:\n            // SUB C\n            // 1  4\n            // Z 1 H C\n            subARegister(Cpu.registerC);\n            return 4;\n        case 0x92:\n            // SUB D\n            // 1  4\n            // Z 1 H C\n            subARegister(Cpu.registerD);\n            return 4;\n        case 0x93:\n            // SUB E\n            // 1  4\n            // Z 1 H C\n            subARegister(Cpu.registerE);\n            return 4;\n        case 0x94:\n            // SUB H\n            // 1  4\n            // Z 1 H C\n            subARegister(Cpu.registerH);\n            return 4;\n        case 0x95:\n            // SUB L\n            // 1  4\n            // Z 1 H C\n            subARegister(Cpu.registerL);\n            return 4;\n        case 0x96:\n            // SUB (HL)\n            // 1  8\n            // Z 1 H C\n            // 4 cycles\n            var valueAtHL6 = eightBitLoadSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL));\n            subARegister(valueAtHL6);\n            return 4;\n        case 0x97:\n            // SUB A\n            // 1  4\n            // Z 1 H C\n            subARegister(Cpu.registerA);\n            return 4;\n        case 0x98:\n            // SBC A,B\n            // 1  4\n            // Z 1 H C\n            subAThroughCarryRegister(Cpu.registerB);\n            return 4;\n        case 0x99:\n            // SBC A,C\n            // 1  4\n            // Z 1 H C\n            subAThroughCarryRegister(Cpu.registerC);\n            return 4;\n        case 0x9a:\n            // SBC A,D\n            // 1  4\n            // Z 1 H C\n            subAThroughCarryRegister(Cpu.registerD);\n            return 4;\n        case 0x9b:\n            // SBC A,E\n            // 1  4\n            // Z 1 H C\n            subAThroughCarryRegister(Cpu.registerE);\n            return 4;\n        case 0x9c:\n            // SBC A,H\n            // 1  4\n            // Z 1 H C\n            subAThroughCarryRegister(Cpu.registerH);\n            return 4;\n        case 0x9d:\n            // SBC A,L\n            // 1  4\n            // Z 1 H C\n            subAThroughCarryRegister(Cpu.registerL);\n            return 4;\n        case 0x9e:\n            // SBC A,(HL)\n            // 1  8\n            // Z 1 H C\n            // 4 cycles\n            var valueAtHLE = eightBitLoadSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL));\n            subAThroughCarryRegister(valueAtHLE);\n            return 4;\n        case 0x9f:\n            // SBC A,A\n            // 1  4\n            // Z 1 H C\n            subAThroughCarryRegister(Cpu.registerA);\n            return 4;\n    }\n    return -1;\n}\nfunction handleOpcodeAx(opcode) {\n    switch (opcode) {\n        case 0xa0:\n            // AND B\n            // 1  4\n            // Z 0 1 0\n            andARegister(Cpu.registerB);\n            return 4;\n        case 0xa1:\n            // AND C\n            // 1  4\n            // Z 0 1 0\n            andARegister(Cpu.registerC);\n            return 4;\n        case 0xa2:\n            // AND D\n            // 1  4\n            // Z 0 1 0\n            andARegister(Cpu.registerD);\n            return 4;\n        case 0xa3:\n            // AND E\n            // 1  4\n            // Z 0 1 0\n            andARegister(Cpu.registerE);\n            return 4;\n        case 0xa4:\n            // AND H\n            // 1  4\n            // Z 0 1 0\n            andARegister(Cpu.registerH);\n            return 4;\n        case 0xa5:\n            // AND L\n            // 1  4\n            // Z 0 1 0\n            andARegister(Cpu.registerL);\n            return 4;\n        case 0xa6:\n            // AND (HL)\n            // 1  8\n            // Z 0 1 0\n            // 4 cycles\n            var valueAtHL6 = eightBitLoadSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL));\n            andARegister(valueAtHL6);\n            return 4;\n        case 0xa7:\n            // AND A\n            // 1  4\n            // Z 0 1 0\n            // NOTE: & Yourself, does nothing\n            andARegister(Cpu.registerA);\n            return 4;\n        case 0xa8:\n            // XOR B\n            // 1  4\n            // Z 0 0 0\n            xorARegister(Cpu.registerB);\n            return 4;\n        case 0xa9:\n            // XOR C\n            // 1  4\n            // Z 0 0 0\n            xorARegister(Cpu.registerC);\n            return 4;\n        case 0xaa:\n            // XOR D\n            // 1  4\n            // Z 0 0 0\n            xorARegister(Cpu.registerD);\n            return 4;\n        case 0xab:\n            // XOR E\n            // 1  4\n            // Z 0 0 0\n            xorARegister(Cpu.registerE);\n            return 4;\n        case 0xac:\n            // XOR H\n            // 1  4\n            // Z 0 0 0\n            xorARegister(Cpu.registerH);\n            return 4;\n        case 0xad:\n            // XOR L\n            // 1  4\n            // Z 0 0 0\n            xorARegister(Cpu.registerL);\n            return 4;\n        case 0xae:\n            // XOR (HL)\n            // 1  8\n            // Z 0 0 0\n            // 4 cycles\n            var valueAtHLE = eightBitLoadSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL));\n            xorARegister(valueAtHLE);\n            return 4;\n        case 0xaf:\n            // XOR A\n            // 1  4\n            // Z 0 0 0\n            xorARegister(Cpu.registerA);\n            return 4;\n    }\n    return -1;\n}\nfunction handleOpcodeBx(opcode) {\n    switch (opcode) {\n        case 0xb0:\n            // OR B\n            // 1  4\n            // Z 0 0 0\n            orARegister(Cpu.registerB);\n            return 4;\n        case 0xb1:\n            // OR C\n            // 1  4\n            // Z 0 0 0\n            orARegister(Cpu.registerC);\n            return 4;\n        case 0xb2:\n            // OR D\n            // 1  4\n            // Z 0 0 0\n            orARegister(Cpu.registerD);\n            return 4;\n        case 0xb3:\n            // OR E\n            // 1  4\n            // Z 0 0 0\n            orARegister(Cpu.registerE);\n            return 4;\n        case 0xb4:\n            // OR H\n            // 1  4\n            // Z 0 0 0\n            orARegister(Cpu.registerH);\n            return 4;\n        case 0xb5:\n            // OR L\n            // 1  4\n            // Z 0 0 0\n            orARegister(Cpu.registerL);\n            return 4;\n        case 0xb6:\n            // OR (HL)\n            // 1  8\n            // Z 0 0 0\n            // 4 cycles\n            var valueAtHL6 = eightBitLoadSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL));\n            orARegister(valueAtHL6);\n            return 4;\n        case 0xb7:\n            // OR A\n            // 1  4\n            // Z 0 0 0\n            orARegister(Cpu.registerA);\n            return 4;\n        case 0xb8:\n            // CP B\n            // 1  4\n            // Z 1 H C\n            cpARegister(Cpu.registerB);\n            return 4;\n        case 0xb9:\n            // CP C\n            // 1  4\n            // Z 1 H C\n            cpARegister(Cpu.registerC);\n            return 4;\n        case 0xba:\n            // CP D\n            // 1  4\n            // Z 1 H C\n            cpARegister(Cpu.registerD);\n            return 4;\n        case 0xbb:\n            // CP E\n            // 1  4\n            // Z 1 H C\n            cpARegister(Cpu.registerE);\n            return 4;\n        case 0xbc:\n            // CP H\n            // 1  4\n            // Z 1 H C\n            cpARegister(Cpu.registerH);\n            return 4;\n        case 0xbd:\n            // CP L\n            // 1  4\n            // Z 1 H C\n            cpARegister(Cpu.registerL);\n            return 4;\n        case 0xbe:\n            // CP (HL)\n            // 1  8\n            // Z 1 H C\n            // 4 cycles\n            var valueAtHLE = eightBitLoadSyncCycles(concatenateBytes(Cpu.registerH, Cpu.registerL));\n            cpARegister(valueAtHLE);\n            return 4;\n        case 0xbf:\n            // CP A\n            // 1  4\n            // Z 1 H C\n            cpARegister(Cpu.registerA);\n            return 4;\n    }\n    return -1;\n}\nfunction handleOpcodeCx(opcode) {\n    switch (opcode) {\n        case 0xc0: {\n            // RET NZ\n            // 1  20/8\n            if (getZeroFlag$$1() === 0) {\n                // 8 cycles\n                var stackPointer = Cpu.stackPointer;\n                Cpu.programCounter = sixteenBitLoadSyncCycles(stackPointer);\n                Cpu.stackPointer = u16Portable(stackPointer + 2);\n                return 12;\n            }\n            else {\n                return 8;\n            }\n        }\n        case 0xc1: {\n            // POP BC\n            // 1  12\n            // 8 cycles\n            var registerBC1 = sixteenBitLoadSyncCycles(Cpu.stackPointer);\n            Cpu.stackPointer = u16Portable(Cpu.stackPointer + 2);\n            Cpu.registerB = splitHighByte(registerBC1);\n            Cpu.registerC = splitLowByte(registerBC1);\n            return 4;\n        }\n        case 0xc2: {\n            // JP NZ,a16\n            // 3  16/12\n            if (getZeroFlag$$1() === 0) {\n                // 8 cycles\n                Cpu.programCounter = getConcatenatedDataByte();\n                return 8;\n            }\n            else {\n                Cpu.programCounter = u16Portable(Cpu.programCounter + 2);\n                return 12;\n            }\n        }\n        case 0xc3: {\n            // JP a16\n            // 3  16\n            // 8 cycles\n            Cpu.programCounter = getConcatenatedDataByte();\n            return 8;\n        }\n        case 0xc4: {\n            // CALL NZ,a16\n            // 3  24/12\n            if (getZeroFlag$$1() === 0) {\n                var stackPointer = u16Portable(Cpu.stackPointer - 2);\n                Cpu.stackPointer = stackPointer;\n                // 8 cycles\n                sixteenBitStoreSyncCycles(stackPointer, u16Portable(Cpu.programCounter + 2));\n                // 8 cycles\n                Cpu.programCounter = getConcatenatedDataByte();\n                return 8;\n            }\n            else {\n                Cpu.programCounter = u16Portable(Cpu.programCounter + 2);\n                return 12;\n            }\n        }\n        case 0xc5: {\n            // PUSH BC\n            // 1  16\n            var stackPointer = u16Portable(Cpu.stackPointer - 2);\n            Cpu.stackPointer = stackPointer;\n            // 8 cycles\n            sixteenBitStoreSyncCycles(stackPointer, concatenateBytes(Cpu.registerB, Cpu.registerC));\n            return 8;\n        }\n        case 0xc6: {\n            // ADD A,d8\n            // 2 8\n            // Z 0 H C\n            // 4 cycles\n            addARegister(getDataByteOne());\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 4;\n        }\n        case 0xc7: {\n            // RST 00H\n            // 1 16\n            var stackPointer = u16Portable(Cpu.stackPointer - 2);\n            Cpu.stackPointer = stackPointer;\n            // 8 cycles\n            sixteenBitStoreSyncCycles(stackPointer, Cpu.programCounter);\n            Cpu.programCounter = 0x00;\n            return 8;\n        }\n        case 0xc8: {\n            // RET Z\n            // 1  20/8\n            if (getZeroFlag$$1() === 1) {\n                // 8 cycles\n                var stackPointer = Cpu.stackPointer;\n                Cpu.programCounter = sixteenBitLoadSyncCycles(stackPointer);\n                Cpu.stackPointer = u16Portable(stackPointer + 2);\n                return 12;\n            }\n            else {\n                return 8;\n            }\n        }\n        case 0xc9: {\n            // RET\n            // 1 16\n            // 8 cycles\n            var stackPointer = Cpu.stackPointer;\n            Cpu.programCounter = sixteenBitLoadSyncCycles(stackPointer);\n            Cpu.stackPointer = u16Portable(stackPointer + 2);\n            return 8;\n        }\n        case 0xca: {\n            // JP Z,a16\n            // 3 16/12\n            if (getZeroFlag$$1() === 1) {\n                // 8 cycles\n                Cpu.programCounter = getConcatenatedDataByte();\n                return 8;\n            }\n            else {\n                Cpu.programCounter = u16Portable(Cpu.programCounter + 2);\n                return 12;\n            }\n        }\n        case 0xcb: {\n            // PREFIX CB\n            // 1  4\n            // 4 cycles\n            var cbCycles = handleCbOpcode(getDataByteOne());\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return cbCycles;\n        }\n        case 0xcc: {\n            // CALL Z,a16\n            // 3  24/12\n            if (getZeroFlag$$1() === 1) {\n                var stackPointer = u16Portable(Cpu.stackPointer - 2);\n                Cpu.stackPointer = stackPointer;\n                // 8 cycles\n                sixteenBitStoreSyncCycles(stackPointer, Cpu.programCounter + 2);\n                // 8 cycles\n                Cpu.programCounter = getConcatenatedDataByte();\n                return 8;\n            }\n            else {\n                Cpu.programCounter = u16Portable(Cpu.programCounter + 2);\n                return 12;\n            }\n        }\n        case 0xcd: {\n            // CALL a16\n            // 3  24\n            var stackPointer = u16Portable(Cpu.stackPointer - 2);\n            Cpu.stackPointer = stackPointer;\n            // 8 cycles\n            sixteenBitStoreSyncCycles(stackPointer, u16Portable(Cpu.programCounter + 2));\n            // 8 cycles\n            Cpu.programCounter = getConcatenatedDataByte();\n            return 8;\n        }\n        case 0xce: {\n            // ADC A,d8\n            // 2  8\n            // Z 0 H C\n            // 4 cycles\n            addAThroughCarryRegister(getDataByteOne());\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 4;\n        }\n        case 0xcf: {\n            // RST 08H\n            // 1 16\n            var stackPointer = u16Portable(Cpu.stackPointer - 2);\n            Cpu.stackPointer = stackPointer;\n            // 8 cycles\n            sixteenBitStoreSyncCycles(stackPointer, Cpu.programCounter);\n            Cpu.programCounter = 0x08;\n            return 8;\n        }\n    }\n    return -1;\n}\nfunction handleOpcodeDx(opcode) {\n    switch (opcode) {\n        case 0xd0: {\n            // RET NC\n            // 1  20/8\n            if (getCarryFlag$$1() === 0) {\n                // 8 cycles\n                var stackPointer = Cpu.stackPointer;\n                Cpu.programCounter = sixteenBitLoadSyncCycles(stackPointer);\n                Cpu.stackPointer = u16Portable(stackPointer + 2);\n                return 12;\n            }\n            else {\n                return 8;\n            }\n        }\n        case 0xd1: {\n            // POP DE\n            // 1  12\n            // 8 cycles\n            var stackPointer = Cpu.stackPointer;\n            var registerDE1 = sixteenBitLoadSyncCycles(stackPointer);\n            Cpu.stackPointer = u16Portable(stackPointer + 2);\n            Cpu.registerD = splitHighByte(registerDE1);\n            Cpu.registerE = splitLowByte(registerDE1);\n            return 4;\n        }\n        case 0xd2: {\n            // JP NC,a16\n            // 3  16/12\n            if (getCarryFlag$$1() === 0) {\n                // 8 cycles\n                Cpu.programCounter = getConcatenatedDataByte();\n                return 8;\n            }\n            else {\n                Cpu.programCounter = u16Portable(Cpu.programCounter + 2);\n                return 12;\n            }\n        }\n        /* No Opcode for: 0xD3 */\n        case 0xd4: {\n            // CALL NC,a16\n            // 3  24/12\n            if (getCarryFlag$$1() === 0) {\n                var stackPointer = u16Portable(Cpu.stackPointer - 2);\n                Cpu.stackPointer = stackPointer;\n                // 8 cycles\n                sixteenBitStoreSyncCycles(stackPointer, Cpu.programCounter + 2);\n                // 8 cycles\n                Cpu.programCounter = getConcatenatedDataByte();\n                return 8;\n            }\n            else {\n                Cpu.programCounter = u16Portable(Cpu.programCounter + 2);\n                return 12;\n            }\n        }\n        case 0xd5: {\n            // PUSH DE\n            // 1 16\n            var stackPointer = u16Portable(Cpu.stackPointer - 2);\n            Cpu.stackPointer = stackPointer;\n            // 8 cycles\n            sixteenBitStoreSyncCycles(stackPointer, concatenateBytes(Cpu.registerD, Cpu.registerE));\n            return 8;\n        }\n        case 0xd6: {\n            // SUB d8\n            // 2  8\n            // Z 1 H C\n            // 4 cycles\n            subARegister(getDataByteOne());\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 4;\n        }\n        case 0xd7: {\n            // RST 10H\n            // 1 16\n            var stackPointer = u16Portable(Cpu.stackPointer - 2);\n            Cpu.stackPointer = stackPointer;\n            // 8 cycles\n            sixteenBitStoreSyncCycles(stackPointer, Cpu.programCounter);\n            Cpu.programCounter = 0x10;\n            return 8;\n        }\n        case 0xd8: {\n            // RET C\n            // 1  20/8\n            if (getCarryFlag$$1() === 1) {\n                var stackPointer = Cpu.stackPointer;\n                // 8 cycles\n                Cpu.programCounter = sixteenBitLoadSyncCycles(stackPointer);\n                Cpu.stackPointer = u16Portable(stackPointer + 2);\n                return 12;\n            }\n            else {\n                return 8;\n            }\n        }\n        case 0xd9: {\n            // RETI\n            // 1  16\n            var stackPointer = Cpu.stackPointer;\n            // 8 cycles\n            Cpu.programCounter = sixteenBitLoadSyncCycles(stackPointer);\n            // Enable interrupts\n            setInterrupts(true);\n            Cpu.stackPointer = u16Portable(stackPointer + 2);\n            return 8;\n        }\n        case 0xda: {\n            // JP C,a16\n            // 3 16/12\n            if (getCarryFlag$$1() === 1) {\n                // 8 cycles\n                Cpu.programCounter = getConcatenatedDataByte();\n                return 8;\n            }\n            else {\n                Cpu.programCounter = u16Portable(Cpu.programCounter + 2);\n                return 12;\n            }\n        }\n        /* No Opcode for: 0xDB */\n        case 0xdc: {\n            // CALL C,a16\n            // 3  24/12\n            if (getCarryFlag$$1() === 1) {\n                var stackPointer = u16Portable(Cpu.stackPointer - 2);\n                Cpu.stackPointer = stackPointer;\n                // 8 cycles\n                sixteenBitStoreSyncCycles(stackPointer, u16Portable(Cpu.programCounter + 2));\n                // 8 cycles\n                Cpu.programCounter = getConcatenatedDataByte();\n                return 8;\n            }\n            else {\n                Cpu.programCounter = u16Portable(Cpu.programCounter + 2);\n                return 12;\n            }\n        }\n        /* No Opcode for: 0xDD */\n        case 0xde: {\n            // SBC A,d8\n            // 2 8\n            // Z 1 H C\n            // 4 cycles\n            subAThroughCarryRegister(getDataByteOne());\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 4;\n        }\n        case 0xdf: {\n            // RST 18H\n            // 1 16\n            var stackPointer = u16Portable(Cpu.stackPointer - 2);\n            Cpu.stackPointer = stackPointer;\n            // 8 cycles\n            sixteenBitStoreSyncCycles(stackPointer, Cpu.programCounter);\n            Cpu.programCounter = 0x18;\n            return 8;\n        }\n    }\n    return -1;\n}\nfunction handleOpcodeEx(opcode) {\n    switch (opcode) {\n        case 0xe0: {\n            // LDH (a8),A\n            // 2  12\n            // Store value in high RAM ($FF00 + a8)\n            // 4 cycles\n            var largeDataByteOne = getDataByteOne();\n            // 4 cycles\n            eightBitStoreSyncCycles(0xff00 + largeDataByteOne, Cpu.registerA);\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 4;\n        }\n        case 0xe1: {\n            // POP HL\n            // 1  12\n            // 8 cycles\n            var stackPointer = Cpu.stackPointer;\n            var registerHL1 = sixteenBitLoadSyncCycles(stackPointer);\n            Cpu.stackPointer = u16Portable(stackPointer + 2);\n            Cpu.registerH = splitHighByte(registerHL1);\n            Cpu.registerL = splitLowByte(registerHL1);\n            return 4;\n        }\n        case 0xe2: {\n            // LD (C),A\n            // 1  8\n            // NOTE: Table says 2 Program counter,\n            // But stepping through the boot rom, should be one\n            // Also should change 0xF2\n            // Store value in high RAM ($FF00 + register c)\n            // 4 cycles\n            eightBitStoreSyncCycles(0xff00 + Cpu.registerC, Cpu.registerA);\n            return 4;\n        }\n        /* No Opcode for: 0xE3, 0xE4 */\n        case 0xe5: {\n            // PUSH HL\n            // 1 16\n            var stackPointer = u16Portable(Cpu.stackPointer - 2);\n            Cpu.stackPointer = stackPointer;\n            // 8 cycles\n            sixteenBitStoreSyncCycles(stackPointer, concatenateBytes(Cpu.registerH, Cpu.registerL));\n            return 8;\n        }\n        case 0xe6: {\n            // AND d8\n            // 2  8\n            // Z 0 1 0\n            // 4 cycles\n            andARegister(getDataByteOne());\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 4;\n        }\n        case 0xe7: {\n            // RST 20H\n            // 1 16\n            var stackPointer = u16Portable(Cpu.stackPointer - 2);\n            Cpu.stackPointer = stackPointer;\n            // 8 cycles\n            sixteenBitStoreSyncCycles(stackPointer, Cpu.programCounter);\n            Cpu.programCounter = 0x20;\n            return 8;\n        }\n        case 0xe8: {\n            // ADD SP, r8\n            // 2 16\n            // 0 0 H C\n            // NOTE: Discoved dataByte is signed\n            // 4 cycles\n            var signedDataByteOne = i8Portable(getDataByteOne());\n            checkAndSetSixteenBitFlagsAddOverflow(Cpu.stackPointer, signedDataByteOne, true);\n            Cpu.stackPointer = u16Portable(Cpu.stackPointer + signedDataByteOne);\n            setZeroFlag$$1(0);\n            setSubtractFlag(0);\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 12;\n        }\n        case 0xe9: {\n            // JP HL\n            // 1 4\n            Cpu.programCounter = concatenateBytes(Cpu.registerH, Cpu.registerL);\n            return 4;\n        }\n        case 0xea: {\n            // LD (a16),A\n            // 3 16\n            // 12 cycles, 4 from store, 8 from concatenated data byte\n            eightBitStoreSyncCycles(getConcatenatedDataByte(), Cpu.registerA);\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 2);\n            return 4;\n        }\n        /* No Opcode for: 0xEB, 0xEC, 0xED */\n        case 0xee: {\n            // XOR d8\n            // 2 8\n            // Z 0 0 0\n            // 4 cycles\n            xorARegister(getDataByteOne());\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 4;\n        }\n        case 0xef: {\n            // RST 28H\n            // 1 16\n            var stackPointer = u16Portable(Cpu.stackPointer - 2);\n            Cpu.stackPointer = stackPointer;\n            // 8 cycles\n            sixteenBitStoreSyncCycles(stackPointer, Cpu.programCounter);\n            Cpu.programCounter = 0x28;\n            return 8;\n        }\n    }\n    return -1;\n}\nfunction handleOpcodeFx(opcode) {\n    switch (opcode) {\n        case 0xf0: {\n            // LDH A,(a8)\n            // 2 12\n            // 4 cycles\n            var largeDataByteOne = getDataByteOne();\n            // 4 cycles\n            Cpu.registerA = u8Portable(eightBitLoadSyncCycles(0xff00 + largeDataByteOne));\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 4;\n        }\n        case 0xf1: {\n            // POP AF\n            // 1 12\n            // Z N H C (But No work require, flags are already set)\n            // 8 cycles\n            var stackPointer = Cpu.stackPointer;\n            var registerAF1 = sixteenBitLoadSyncCycles(stackPointer);\n            Cpu.stackPointer = u16Portable(stackPointer + 2);\n            Cpu.registerA = splitHighByte(registerAF1);\n            Cpu.registerF = splitLowByte(registerAF1);\n            return 4;\n        }\n        case 0xf2: {\n            // LD A,(C)\n            // 1 8\n            // 4 cycles\n            Cpu.registerA = u8Portable(eightBitLoadSyncCycles(0xff00 + Cpu.registerC));\n            return 4;\n        }\n        case 0xf3: {\n            // DI\n            // 1 4\n            setInterrupts(false);\n            return 4;\n        }\n        /* No Opcode for: 0xF4 */\n        case 0xf5: {\n            // PUSH AF\n            // 1 16\n            var stackPointer = u16Portable(Cpu.stackPointer - 2);\n            Cpu.stackPointer = stackPointer;\n            // 8 cycles\n            sixteenBitStoreSyncCycles(stackPointer, concatenateBytes(Cpu.registerA, Cpu.registerF));\n            return 8;\n        }\n        case 0xf6: {\n            // OR d8\n            // 2 8\n            // Z 0 0 0\n            // 4 cycles\n            orARegister(getDataByteOne());\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 4;\n        }\n        case 0xf7: {\n            // RST 30H\n            // 1 16\n            var stackPointer = u16Portable(Cpu.stackPointer - 2);\n            Cpu.stackPointer = stackPointer;\n            // 8 cycles\n            sixteenBitStoreSyncCycles(stackPointer, Cpu.programCounter);\n            Cpu.programCounter = 0x30;\n            return 8;\n        }\n        case 0xf8: {\n            // LD HL,SP+r8\n            // 2 12\n            // 0 0 H C\n            // NOTE: Discoved dataByte is signed\n            // 4 cycles\n            var signedDataByteOne = i8Portable(getDataByteOne());\n            var stackPointer = Cpu.stackPointer;\n            // First, let's handle flags\n            setZeroFlag$$1(0);\n            setSubtractFlag(0);\n            checkAndSetSixteenBitFlagsAddOverflow(stackPointer, signedDataByteOne, true);\n            var registerHL = u16Portable(stackPointer + signedDataByteOne);\n            Cpu.registerH = splitHighByte(registerHL);\n            Cpu.registerL = splitLowByte(registerHL);\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 8;\n        }\n        case 0xf9: {\n            // LD SP,HL\n            // 1 8\n            Cpu.stackPointer = concatenateBytes(Cpu.registerH, Cpu.registerL);\n            return 8;\n        }\n        case 0xfa: {\n            // LD A,(a16)\n            // 3 16\n            // 12 cycles, 4 from load, 8 from concatenated data byte\n            Cpu.registerA = eightBitLoadSyncCycles(getConcatenatedDataByte());\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 2);\n            return 4;\n        }\n        case 0xfb: {\n            // EI\n            // 1 4\n            setInterrupts(true);\n            return 4;\n        }\n        /* No Opcode for: 0xFC, 0xFD */\n        case 0xfe: {\n            // CP d8\n            // 2 8\n            // Z 1 H C\n            // 4 cycles\n            cpARegister(getDataByteOne());\n            Cpu.programCounter = u16Portable(Cpu.programCounter + 1);\n            return 4;\n        }\n        case 0xff: {\n            // RST 38H\n            // 1 16\n            var stackPointer = u16Portable(Cpu.stackPointer - 2);\n            Cpu.stackPointer = stackPointer;\n            // 8 cycles\n            sixteenBitStoreSyncCycles(stackPointer, Cpu.programCounter);\n            Cpu.programCounter = 0x38;\n            return 8;\n        }\n    }\n    return -1;\n}\n\n// NOTE: Code is very verbose, and will have some copy pasta'd lines.\n\n// Syncing and Tracking executed cycles\nvar Cycles = /** @class */ (function () {\n    function Cycles() {\n    }\n    // An even number below the max 32 bit integer\n    Cycles.cyclesPerCycleSet = 2000000000;\n    Cycles.cycleSets = 0;\n    Cycles.cycles = 0;\n    return Cycles;\n}());\nfunction getCyclesPerCycleSet() {\n    return Cycles.cyclesPerCycleSet;\n}\nfunction getCycleSets() {\n    return Cycles.cycleSets;\n}\nfunction getCycles() {\n    return Cycles.cycles;\n}\n// Inlined because closure compiler inlines\nfunction trackCyclesRan(numberOfCycles) {\n    var cycles = Cycles.cycles;\n    cycles += numberOfCycles;\n    if (cycles >= Cycles.cyclesPerCycleSet) {\n        Cycles.cycleSets += 1;\n        cycles -= Cycles.cyclesPerCycleSet;\n    }\n    Cycles.cycles = cycles;\n}\n// Inlined because closure compiler inlines\nfunction resetCycles() {\n    Cycles.cyclesPerCycleSet = 2000000000;\n    Cycles.cycleSets = 0;\n    Cycles.cycles = 0;\n}\n// Sync other GB Components with the number of cycles\nfunction syncCycles(numberOfCycles) {\n    // Check if we did a DMA TRansfer, if we did add the cycles\n    if (Memory.DMACycles > 0) {\n        numberOfCycles += Memory.DMACycles;\n        Memory.DMACycles = 0;\n    }\n    // Finally, Add our number of cycles to the CPU Cycles\n    Cpu.currentCycles += numberOfCycles;\n    // Check other Gameboy components\n    if (!Cpu.isStopped) {\n        if (Config.graphicsBatchProcessing) {\n            // Need to do this, since a lot of things depend on the scanline\n            // Batch processing will simply return if the number of cycles is too low\n            Graphics.currentCycles += numberOfCycles;\n            batchProcessGraphics();\n        }\n        else {\n            updateGraphics(numberOfCycles);\n        }\n        if (Config.audioBatchProcessing) {\n            Sound.currentCycles += numberOfCycles;\n        }\n        else {\n            updateSound(numberOfCycles);\n        }\n        updateSerial(numberOfCycles);\n    }\n    if (Config.timersBatchProcessing) {\n        // Batch processing will simply return if the number of cycles is too low\n        Timers.currentCycles += numberOfCycles;\n        batchProcessTimers();\n    }\n    else {\n        updateTimers(numberOfCycles);\n    }\n    trackCyclesRan(numberOfCycles);\n}\n\n// Functions involving executing/running the emulator after initializtion\nvar Execute = /** @class */ (function () {\n    function Execute() {\n    }\n    // An even number bewlow the max 32 bit integer\n    Execute.stepsPerStepSet = 2000000000;\n    Execute.stepSets = 0;\n    Execute.steps = 0;\n    // Response Codes from Execute Conditions\n    Execute.RESPONSE_CONDITION_ERROR = -1;\n    Execute.RESPONSE_CONDITION_FRAME = 0;\n    Execute.RESPONSE_CONDITION_AUDIO = 1;\n    Execute.RESPONSE_CONDITION_BREAKPOINT = 2;\n    return Execute;\n}());\nfunction getStepsPerStepSet() {\n    return Execute.stepsPerStepSet;\n}\nfunction getStepSets() {\n    return Execute.stepSets;\n}\nfunction getSteps() {\n    return Execute.steps;\n}\n// Inlined because closure compiler inlines\nfunction trackStepsRan(steps) {\n    var esteps = Execute.steps;\n    esteps += steps;\n    if (esteps >= Execute.stepsPerStepSet) {\n        Execute.stepSets += 1;\n        esteps -= Execute.stepsPerStepSet;\n    }\n    Execute.steps = esteps;\n}\n// Inlined because closure compiler inlines\nfunction resetSteps() {\n    Execute.stepsPerStepSet = 2000000000;\n    Execute.stepSets = 0;\n    Execute.steps = 0;\n}\n// // Public funciton to run frames until,\n// the specified number of frames have run or error.\n// Return values:\n// -1 = error\n// 0 = render a frame\nfunction executeMultipleFrames(numberOfFrames) {\n    var frameResponse = 0;\n    var framesRun = 0;\n    while (framesRun < numberOfFrames && frameResponse >= 0) {\n        frameResponse = executeFrame();\n        framesRun += 1;\n    }\n    if (frameResponse < 0) {\n        return frameResponse;\n    }\n    return 0;\n}\n// Public funciton to run opcodes until,\n// a frame is ready, or error.\n// Return values:\n// -1 = error\n// 0 = render a frame\nfunction executeFrame() {\n    return executeUntilCondition(true, -1);\n}\n// Public Function to run opcodes until,\n// a frame is ready, audio bufer is filled, or error\nfunction executeFrameAndCheckAudio(maxAudioBuffer) {\n    if (maxAudioBuffer === void 0) { maxAudioBuffer = 0; }\n    return executeUntilCondition(true, maxAudioBuffer);\n}\n// Base function that executes steps, and checks conditions\n// Return values:\nfunction executeUntilCondition(checkMaxCyclesPerFrame, maxAudioBuffer) {\n    if (checkMaxCyclesPerFrame === void 0) { checkMaxCyclesPerFrame = true; }\n    if (maxAudioBuffer === void 0) { maxAudioBuffer = -1; }\n    // Common tracking variables\n    var numberOfCycles = -1;\n    var audioBufferSize = 1024;\n    if (maxAudioBuffer > 0) {\n        audioBufferSize = maxAudioBuffer;\n    }\n    else if (maxAudioBuffer < 0) {\n        audioBufferSize = -1;\n    }\n    var errorCondition = false;\n    var frameCondition = false;\n    var audioBufferCondition = false;\n    while (!errorCondition && !frameCondition && !audioBufferCondition && !Breakpoints.reachedBreakpoint) {\n        numberOfCycles = executeStep();\n        // Error Condition\n        if (numberOfCycles < 0) {\n            errorCondition = true;\n        }\n        else if (Cpu.currentCycles >= Cpu.MAX_CYCLES_PER_FRAME()) {\n            frameCondition = true;\n        }\n        else if (audioBufferSize > -1 && getNumberOfSamplesInAudioBuffer() >= audioBufferSize) {\n            audioBufferCondition = true;\n        }\n    }\n    // Find our exit reason\n    if (frameCondition) {\n        // Render a frame\n        // Reset our currentCycles\n        Cpu.currentCycles -= Cpu.MAX_CYCLES_PER_FRAME();\n        return Execute.RESPONSE_CONDITION_FRAME;\n    }\n    if (audioBufferCondition) {\n        return Execute.RESPONSE_CONDITION_AUDIO;\n    }\n    if (Breakpoints.reachedBreakpoint) {\n        Breakpoints.reachedBreakpoint = false;\n        return Execute.RESPONSE_CONDITION_BREAKPOINT;\n    }\n    // TODO: Boot ROM handling\n    // There was an error, return -1, and push the program counter back to grab the error opcode\n    Cpu.programCounter = u16Portable(Cpu.programCounter - 1);\n    return -1;\n}\n// Function to execute an opcode, and update other gameboy hardware.\n// http://www.codeslinger.co.uk/pages/projects/gameboy/beginning.html\nfunction executeStep() {\n    // Set has started to 1 since we ran a emulation step\n    setHasCoreStarted(true);\n    // Check if we are in the halt bug\n    if (Cpu.isHaltBug) {\n        // Need to not increment program counter,\n        // thus, running the next opcode twice\n        // E.g\n        // 0x76 - halt\n        // FA 34 12 - ld a,(1234)\n        // Becomes\n        // FA FA 34 ld a,(34FA)\n        // 12 ld (de),a\n        var haltBugOpcode = eightBitLoadFromGBMemory(Cpu.programCounter);\n        // Execute opcode will handle the actual PC behavior\n        var haltBugCycles = executeOpcode$$1(haltBugOpcode);\n        syncCycles(haltBugCycles);\n        Cpu.exitHaltAndStop();\n    }\n    // Interrupts should be handled before reading an opcode\n    // https://github.com/Gekkio/mooneye-gb/blob/master/docs/accuracy.markdown#what-is-the-exact-timing-of-cpu-servicing-an-interrupt\n    var interruptCycles = checkInterrupts();\n    if (interruptCycles > 0) {\n        syncCycles(interruptCycles);\n    }\n    // Get the opcode, and additional bytes to be handled\n    // Number of cycles defaults to 4, because while we're halted, we run 4 cycles (according to matt :))\n    var numberOfCycles = 4;\n    var opcode = 0;\n    // If we are not halted or stopped, run instructions\n    // If we are halted, this will be skipped and just sync the 4 cycles\n    if (!Cpu.isHalted() && !Cpu.isStopped) {\n        opcode = eightBitLoadFromGBMemory(Cpu.programCounter);\n        numberOfCycles = executeOpcode$$1(opcode);\n    }\n    // blarggFixes, don't allow register F to have the bottom nibble\n    Cpu.registerF = Cpu.registerF & 0xf0;\n    // Check if there was an error decoding the opcode\n    if (numberOfCycles <= 0) {\n        return numberOfCycles;\n    }\n    // Sync other GB Components with the number of cycles\n    syncCycles(numberOfCycles);\n    // Update our steps\n    trackStepsRan(1);\n    // Check if we reached the CPU breakpoint\n    if (Cpu.programCounter === Breakpoints.programCounter) {\n        Breakpoints.reachedBreakpoint = true;\n    }\n    return numberOfCycles;\n}\n\n// Imports\n// Grow our memory to the specified size\nif (memory.size() < WASMBOY_WASM_PAGES) {\n    memory.grow(WASMBOY_WASM_PAGES - memory.size());\n}\n// Function to track if the core has started\nvar hasStarted = false;\nfunction setHasCoreStarted(value) {\n    hasStarted = value;\n}\nfunction hasCoreStarted() {\n    return hasStarted;\n}\n// Function to configure & initialize wasmboy\nfunction config(enableBootRom, useGbcWhenAvailable, audioBatchProcessing, graphicsBatchProcessing, timersBatchProcessing, graphicsDisableScanlineRendering, audioAccumulateSamples, tileRendering, tileCaching, enableAudioDebugging) {\n    // TODO: depending on the boot rom, initialization may be different\n    // From: http://www.codeslinger.co.uk/pages/projects/gameboy/hardware.html\n    // All values default to zero in memory, so not setting them yet\n    // log('initializing (includeBootRom=$0)', 1, enableBootRom);\n    Config.enableBootRom = enableBootRom > 0;\n    Config.useGbcWhenAvailable = useGbcWhenAvailable > 0;\n    Config.audioBatchProcessing = audioBatchProcessing > 0;\n    Config.graphicsBatchProcessing = graphicsBatchProcessing > 0;\n    Config.timersBatchProcessing = timersBatchProcessing > 0;\n    Config.graphicsDisableScanlineRendering = graphicsDisableScanlineRendering > 0;\n    Config.audioAccumulateSamples = audioAccumulateSamples > 0;\n    Config.tileRendering = tileRendering > 0;\n    Config.tileCaching = tileCaching > 0;\n    Config.enableAudioDebugging = enableAudioDebugging > 0;\n    initialize();\n}\n// Function to initiialize the core\nfunction initialize() {\n    // Initialization variables from BGB\n    // First, try to switch to Gameboy Color Mode\n    // Get our GBC support from the cartridge header\n    // http://gbdev.gg8.se/wiki/articles/The_Cartridge_Header\n    var gbcType = eightBitLoadFromGBMemory(0x0143);\n    // Detecting GBC http://bgb.bircd.org/pandocs.htm#cgbregisters\n    if (gbcType === 0xc0 || (Config.useGbcWhenAvailable && gbcType === 0x80)) {\n        Cpu.GBCEnabled = true;\n    }\n    else {\n        Cpu.GBCEnabled = false;\n    }\n    // Call our respective classes intialization\n    initializeCpu();\n    initializeCartridge();\n    initializeDma();\n    initializeGraphics();\n    initializePalette();\n    initializeSound();\n    initializeInterrupts();\n    initializeTimers();\n    initializeSerial();\n    // Various Other Registers\n    if (Cpu.GBCEnabled) {\n        // Various other registers\n        eightBitStoreIntoGBMemory(0xff70, 0xf8);\n        eightBitStoreIntoGBMemory(0xff4f, 0xfe);\n        eightBitStoreIntoGBMemory(0xff4d, 0x7e);\n        eightBitStoreIntoGBMemory(0xff00, 0xcf);\n        eightBitStoreIntoGBMemory(0xff0f, 0xe1);\n        // 0xFFFF = 0x00\n        // Undocumented from Pandocs\n        eightBitStoreIntoGBMemory(0xff6c, 0xfe);\n        eightBitStoreIntoGBMemory(0xff75, 0x8f);\n    }\n    else {\n        eightBitStoreIntoGBMemory(0xff70, 0xff);\n        eightBitStoreIntoGBMemory(0xff4f, 0xff);\n        eightBitStoreIntoGBMemory(0xff4d, 0xff);\n        eightBitStoreIntoGBMemory(0xff00, 0xcf);\n        eightBitStoreIntoGBMemory(0xff0f, 0xe1);\n        // 0xFFFF = 0x00\n    }\n    // Reset hasStarted, since we are now reset\n    setHasCoreStarted(false);\n    // Reset our cycles ran\n    resetCycles();\n    resetSteps();\n}\n// Function to return if we are currently playing a GBC ROM\nfunction isGBC() {\n    return Cpu.GBCEnabled;\n}\n// Function to return an address to store into save state memory\n// this is to regulate our 20 slots\n// https://docs.google.com/spreadsheets/d/17xrEzJk5-sCB9J2mMJcVnzhbE-XH_NvczVSQH9OHvRk/edit?usp=sharing\n// Inlined because closure compiler inlines\nfunction getSaveStateMemoryOffset(offset, saveStateSlot) {\n    // 50 bytes per save state memory partiton sli32\n    return WASMBOY_STATE_LOCATION + offset + 50 * saveStateSlot;\n}\n// Function to save state to memory for all of our classes\nfunction saveState() {\n    Cpu.saveState();\n    Graphics.saveState();\n    Interrupts.saveState();\n    Joypad.saveState();\n    Memory.saveState();\n    Timers.saveState();\n    Sound.saveState();\n    Channel1.saveState();\n    Channel2.saveState();\n    Channel3.saveState();\n    Channel4.saveState();\n    // Reset hasStarted, since we are now reset\n    setHasCoreStarted(false);\n    // Don't want to reset cycles here, as this does not reset the emulator\n}\n// Function to load state from memory for all of our classes\nfunction loadState() {\n    Cpu.loadState();\n    Graphics.loadState();\n    Interrupts.loadState();\n    Joypad.loadState();\n    Memory.loadState();\n    Timers.loadState();\n    Sound.loadState();\n    Channel1.loadState();\n    Channel2.loadState();\n    Channel3.loadState();\n    Channel4.loadState();\n    // Reset hasStarted, since we are now reset\n    setHasCoreStarted(false);\n    // Reset our cycles ran\n    resetCycles();\n    resetSteps();\n}\n\n// Functions to get information about the emulator for debugging purposes\nfunction getRegisterA() {\n    return Cpu.registerA;\n}\nfunction getRegisterB() {\n    return Cpu.registerB;\n}\nfunction getRegisterC() {\n    return Cpu.registerC;\n}\nfunction getRegisterD() {\n    return Cpu.registerD;\n}\nfunction getRegisterE() {\n    return Cpu.registerE;\n}\nfunction getRegisterH() {\n    return Cpu.registerH;\n}\nfunction getRegisterL() {\n    return Cpu.registerL;\n}\nfunction getRegisterF() {\n    return Cpu.registerF;\n}\nfunction getProgramCounter() {\n    return Cpu.programCounter;\n}\nfunction getStackPointer() {\n    return Cpu.stackPointer;\n}\nfunction getOpcodeAtProgramCounter() {\n    return eightBitLoadFromGBMemory(Cpu.programCounter);\n}\n\n// Functions to debug graphical output\n// Some Simple internal getters\nfunction getLY() {\n    return Graphics.scanlineRegister;\n}\n// TODO: Render by tile, rather than by pixel\nfunction drawBackgroundMapToWasmMemory(showColor) {\n    // http://www.codeslinger.co.uk/pages/projects/gameboy/graphics.html\n    // Bit 7 - LCD Display Enable (0=Off, 1=On)\n    // Bit 6 - Window Tile Map Display Select (0=9800-9BFF, 1=9C00-9FFF)\n    // Bit 5 - Window Display Enable (0=Off, 1=On)\n    // Bit 4 - BG & Window Tile Data Select (0=8800-97FF, 1=8000-8FFF)\n    // Bit 3 - BG Tile Map Display Select (0=9800-9BFF, 1=9C00-9FFF)\n    // Bit 2 - OBJ (Sprite) Size (0=8x8, 1=8x16)\n    // Bit 1 - OBJ (Sprite) Display Enable (0=Off, 1=On)\n    // Bit 0 - BG Display (for CGB see below) (0=Off, 1=On)\n    // Get our seleted tile data memory location\n    var tileDataMemoryLocation = Graphics.memoryLocationTileDataSelectZeroStart;\n    if (Lcd.bgWindowTileDataSelect) {\n        tileDataMemoryLocation = Graphics.memoryLocationTileDataSelectOneStart;\n    }\n    var tileMapMemoryLocation = Graphics.memoryLocationTileMapSelectZeroStart;\n    if (Lcd.bgTileMapDisplaySelect) {\n        tileMapMemoryLocation = Graphics.memoryLocationTileMapSelectOneStart;\n    }\n    for (var y = 0; y < 256; y++) {\n        for (var x = 0; x < 256; x++) {\n            // Get our current Y\n            var pixelYPositionInMap = y;\n            // Get our Current X position of our pixel on the on the 160x144 camera\n            // this is done by getting the current scroll X position,\n            // and adding it do what X Value the scanline is drawing on the camera.\n            var pixelXPositionInMap = x;\n            // Divide our pixel position by 8 to get our tile.\n            // Since, there are 256x256 pixels, and 32x32 tiles.\n            // 256 / 8 = 32.\n            // Also, bitshifting by 3, do do a division by 8\n            // Need to use u16s, as they will be used to compute an address, which will cause weird errors and overflows\n            var tileXPositionInMap = pixelXPositionInMap >> 3;\n            var tileYPositionInMap = pixelYPositionInMap >> 3;\n            // Get our tile address on the tileMap\n            // NOTE: (tileMap represents where each tile is displayed on the screen)\n            // NOTE: (tile map represents the entire map, now just what is within the \"camera\")\n            // For instance, if we have y pixel 144. 144 / 8 = 18. 18 * 32 = line address in map memory.\n            // And we have x pixel 160. 160 / 8 = 20.\n            // * 32, because remember, this is NOT only for the camera, the actual map is 32x32. Therefore, the next tile line of the map, is 32 byte offset.\n            // Think like indexing a 2d array, as a 1d array and it make sense :)\n            var tileMapAddress = tileMapMemoryLocation + tileYPositionInMap * 32 + tileXPositionInMap;\n            // Get the tile Id on the Tile Map\n            var tileIdFromTileMap = loadFromVramBank(tileMapAddress, 0);\n            // Now get our tileDataAddress for the corresponding tileID we found in the map\n            // Read the comments in _getTileDataAddress() to see what's going on.\n            // tl;dr if we had the tile map of \"a b c d\", and wanted tileId 2.\n            // This funcitons returns the start of memory locaiton for the tile 'c'.\n            var tileDataAddress = getTileDataAddress(tileDataMemoryLocation, tileIdFromTileMap);\n            // Now we can process the the individual bytes that represent the pixel on a tile\n            // Get the y pixel of the 8 by 8 tile.\n            // Simply modulo the scanline.\n            // For instance, let's say we are printing the first line of pixels on our camera,\n            // And the first line of pixels on our tile.\n            // yPixel = 1. 1 % 8 = 1.\n            // And for the last line\n            // yPixel = 144. 144 % 8 = 0.\n            // 0 Represents last line of pixels in a tile, 1 represents first. 1 2 3 4 5 6 7 0.\n            // Because remember, we are counting lines on the display NOT including zero\n            var pixelYInTile = pixelYPositionInMap % 8;\n            // Same logic as pixelYInTile.\n            // However, We need to reverse our byte,\n            // As pixel 0 is on byte 7, and pixel 1 is on byte 6, etc...\n            // Therefore, is pixelX was 2, then really is need to be 5\n            // So 2 - 7 = -5, * 1 = 5\n            // Or to simplify, 7 - 2 = 5 haha!\n            var pixelXInTile = pixelXPositionInMap % 8;\n            pixelXInTile = 7 - pixelXInTile;\n            // Get the GB Map Attributes\n            // Bit 0-2  Background Palette number  (BGP0-7)\n            // Bit 3    Tile VRAM Bank number      (0=Bank 0, 1=Bank 1)\n            // Bit 4    Not used\n            // Bit 5    Horizontal Flip            (0=Normal, 1=Mirror horizontally)\n            // Bit 6    Vertical Flip              (0=Normal, 1=Mirror vertically)\n            // Bit 7    BG-to-OAM Priority         (0=Use OAM priority bit, 1=BG Priority)\n            var bgMapAttributes = 0;\n            if (Cpu.GBCEnabled && showColor > 0) {\n                bgMapAttributes = loadFromVramBank(tileMapAddress, 1);\n            }\n            if (checkBitOnByte(6, bgMapAttributes)) {\n                // We are mirroring the tile, therefore, we need to opposite byte\n                // So if our pizel was 0 our of 8, it wild become 7 :)\n                // TODO: This may be wrong :p\n                pixelYInTile = 7 - pixelYInTile;\n            }\n            // Remember to represent a single line of 8 pixels on a tile, we need two bytes.\n            // Therefore, we need to times our modulo by 2, to get the correct line of pixels on the tile.\n            // But we need to load the time from a specific Vram bank\n            var vramBankId = 0;\n            if (checkBitOnByte(3, bgMapAttributes)) {\n                vramBankId = 1;\n            }\n            // Remember to represent a single line of 8 pixels on a tile, we need two bytes.\n            // Therefore, we need to times our modulo by 2, to get the correct line of pixels on the tile.\n            // Again, think like you had to map a 2d array as a 1d.\n            var byteOneForLineOfTilePixels = loadFromVramBank(tileDataAddress + pixelYInTile * 2, vramBankId);\n            var byteTwoForLineOfTilePixels = loadFromVramBank(tileDataAddress + pixelYInTile * 2 + 1, vramBankId);\n            // Now we can get the color for that pixel\n            // Colors are represented by getting X position of ByteTwo, and X positon of Byte One\n            // To Get the color Id.\n            // For example, the result of the color id is 0000 00[xPixelByteTwo][xPixelByteOne]\n            // See: How to draw a tile/sprite from memory: http://www.codeslinger.co.uk/pages/projects/gameboy/graphics.html\n            var paletteColorId = 0;\n            if (checkBitOnByte(pixelXInTile, byteTwoForLineOfTilePixels)) {\n                // Byte one represents the second bit in our color id, so bit shift\n                paletteColorId += 1;\n                paletteColorId = paletteColorId << 1;\n            }\n            if (checkBitOnByte(pixelXInTile, byteOneForLineOfTilePixels)) {\n                paletteColorId += 1;\n            }\n            // FINALLY, RENDER THAT PIXEL!\n            var pixelStart = (y * 256 + x) * 3;\n            if (Cpu.GBCEnabled && showColor > 0) {\n                // Finally lets add some, C O L O R\n                // Want the botom 3 bits\n                var bgPalette = bgMapAttributes & 0x07;\n                // Call the helper function to grab the correct color from the palette\n                var rgbColorPalette = getRgbColorFromPalette(bgPalette, paletteColorId, false);\n                // Split off into red green and blue\n                var red = getColorComponentFromRgb(0, rgbColorPalette);\n                var green = getColorComponentFromRgb(1, rgbColorPalette);\n                var blue = getColorComponentFromRgb(2, rgbColorPalette);\n                var offset = BACKGROUND_MAP_LOCATION + pixelStart;\n                store(offset, red);\n                store(offset + 1, green);\n                store(offset + 2, blue);\n            }\n            else {\n                // Only rendering camera for now, so coordinates are for the camera.\n                // Get the rgb value for the color Id, will be repeated into R, G, B (if not colorized)\n                var hexColor = getColorizedGbHexColorFromPalette(paletteColorId, Graphics.memoryLocationBackgroundPalette);\n                var offset = BACKGROUND_MAP_LOCATION + pixelStart;\n                // Red\n                store(offset + 0, getRedFromHexColor(hexColor));\n                // Green\n                store(offset + 1, getGreenFromHexColor(hexColor));\n                // Blue\n                store(offset + 2, getBlueFromHexColor(hexColor));\n            }\n        }\n    }\n}\nfunction drawTileDataToWasmMemory() {\n    for (var tileDataMapGridY = 0; tileDataMapGridY < 0x17; tileDataMapGridY++) {\n        for (var tileDataMapGridX = 0; tileDataMapGridX < 0x1f; tileDataMapGridX++) {\n            // Get Our VramBankID\n            var vramBankId = 0;\n            if (tileDataMapGridX > 0x0f) {\n                vramBankId = 1;\n            }\n            // Get our tile ID\n            var tileId = tileDataMapGridY;\n            if (tileDataMapGridY > 0x0f) {\n                tileId -= 0x0f;\n            }\n            tileId = tileId << 4;\n            if (tileDataMapGridX > 0x0f) {\n                tileId = tileId + (tileDataMapGridX - 0x0f);\n            }\n            else {\n                tileId = tileId + tileDataMapGridX;\n            }\n            // Finally get our tile Data location\n            var tileDataMemoryLocation = Graphics.memoryLocationTileDataSelectOneStart;\n            if (tileDataMapGridY > 0x0f) {\n                tileDataMemoryLocation = Graphics.memoryLocationTileDataSelectZeroStart;\n            }\n            // Let's see if we have C O L O R\n            // Set the map and sprite attributes to -1\n            // Meaning, we will draw monochrome\n            var paletteLocation = Graphics.memoryLocationBackgroundPalette;\n            var bgMapAttributes = -1;\n            var spriteAttributes = -1;\n            // Let's see if the tile is being used by a sprite\n            for (var spriteRow = 0; spriteRow < 8; spriteRow++) {\n                for (var spriteColumn = 0; spriteColumn < 5; spriteColumn++) {\n                    var spriteIndex = spriteColumn * 8 + spriteRow;\n                    // Sprites occupy 4 bytes in the sprite attribute table\n                    var spriteTableIndex = spriteIndex * 4;\n                    var spriteTileId = eightBitLoadFromGBMemory(Graphics.memoryLocationSpriteAttributesTable + spriteTableIndex + 2);\n                    if (tileId === spriteTileId) {\n                        var currentSpriteAttributes = eightBitLoadFromGBMemory(Graphics.memoryLocationSpriteAttributesTable + spriteTableIndex + 3);\n                        var spriteVramBankId = 0;\n                        if (Cpu.GBCEnabled && checkBitOnByte(3, currentSpriteAttributes)) {\n                            spriteVramBankId = 1;\n                        }\n                        if (spriteVramBankId === vramBankId) {\n                            spriteAttributes = currentSpriteAttributes;\n                            spriteRow = 8;\n                            spriteColumn = 5;\n                            // Set our paletteLocation\n                            paletteLocation = Graphics.memoryLocationSpritePaletteOne;\n                            if (checkBitOnByte(4, spriteAttributes)) {\n                                paletteLocation = Graphics.memoryLocationSpritePaletteTwo;\n                            }\n                        }\n                    }\n                }\n            }\n            // If we didn't find a sprite,\n            // Let's see if the tile is on the bg tile map\n            // If so, use that bg map for attributes\n            if (Cpu.GBCEnabled && spriteAttributes < 0) {\n                var tileMapMemoryLocation = Graphics.memoryLocationTileMapSelectZeroStart;\n                if (Lcd.bgTileMapDisplaySelect) {\n                    tileMapMemoryLocation = Graphics.memoryLocationTileMapSelectOneStart;\n                }\n                // Loop through the tileMap, and find if we have our current ID\n                var foundTileMapAddress = -1;\n                for (var x = 0; x < 32; x++) {\n                    for (var y = 0; y < 32; y++) {\n                        var tileMapAddress = tileMapMemoryLocation + y * 32 + x;\n                        var tileIdFromTileMap = loadFromVramBank(tileMapAddress, 0);\n                        // Check if we found our tileId\n                        if (tileId === tileIdFromTileMap) {\n                            foundTileMapAddress = tileMapAddress;\n                            x = 32;\n                            y = 32;\n                        }\n                    }\n                }\n                if (foundTileMapAddress >= 0) {\n                    bgMapAttributes = loadFromVramBank(foundTileMapAddress, 1);\n                }\n            }\n            // Draw each Y line of the tile\n            for (var tileLineY = 0; tileLineY < 8; tileLineY++) {\n                drawPixelsFromLineOfTile(tileId, // tileId\n                tileDataMemoryLocation, // Graphics.memoryLocationTileDataSelect\n                vramBankId, // Vram Bank\n                0, // Tile Line X Start\n                7, // Tile Line X End\n                tileLineY, // Tile Line Y\n                tileDataMapGridX * 8, // Output line X\n                tileDataMapGridY * 8 + tileLineY, // Output line Y\n                0x1f * 8, // Output Width\n                TILE_DATA_LOCATION, // Wasm Memory Start\n                false, // shouldRepresentMonochromeColorByColorId\n                paletteLocation, // paletteLocation\n                bgMapAttributes, // bgMapAttributes\n                spriteAttributes // spriteAttributes\n                );\n            }\n        }\n    }\n}\nfunction drawOamToWasmMemory() {\n    // Draw all 40 sprites\n    // Going to be like BGB and do 8 x 5 sprites\n    for (var spriteRow = 0; spriteRow < 8; spriteRow++) {\n        for (var spriteColumn = 0; spriteColumn < 5; spriteColumn++) {\n            var spriteIndex = spriteColumn * 8 + spriteRow;\n            // Sprites occupy 4 bytes in the sprite attribute table\n            var spriteTableIndex = spriteIndex * 4;\n            // Y positon is offset by 16, X position is offset by 8\n            var spriteYPosition = eightBitLoadFromGBMemory(Graphics.memoryLocationSpriteAttributesTable + spriteTableIndex);\n            var spriteXPosition = eightBitLoadFromGBMemory(Graphics.memoryLocationSpriteAttributesTable + spriteTableIndex + 1);\n            var spriteTileId = eightBitLoadFromGBMemory(Graphics.memoryLocationSpriteAttributesTable + spriteTableIndex + 2);\n            var tilesToDraw = 1;\n            if (Lcd.tallSpriteSize) {\n                // @binji says in 8x16 mode, even tileId always drawn first\n                // This will fix shantae sprites which always uses odd numbered indexes\n                // TODO: Do the actual Pandocs thing:\n                // \"In 8x16 mode, the lower bit of the tile number is ignored. Ie. the upper 8x8 tile is \"NN AND FEh\", and the lower 8x8 tile is \"NN OR 01h\".\"\n                // So just knock off the last bit? :)\n                if (spriteTileId % 2 === 1) {\n                    spriteTileId -= 1;\n                }\n                tilesToDraw += 1;\n            }\n            // Get our sprite attributes since we know we shall be drawing the tile\n            var spriteAttributes = eightBitLoadFromGBMemory(Graphics.memoryLocationSpriteAttributesTable + spriteTableIndex + 3);\n            // Find which VRAM Bank to load from\n            var vramBankId = 0;\n            if (Cpu.GBCEnabled && checkBitOnByte(3, spriteAttributes)) {\n                vramBankId = 1;\n            }\n            // Find which monochrome palette we should use\n            var paletteLocation = Graphics.memoryLocationSpritePaletteOne;\n            if (checkBitOnByte(4, spriteAttributes)) {\n                paletteLocation = Graphics.memoryLocationSpritePaletteTwo;\n            }\n            // Start Drawing our tiles\n            for (var i = 0; i < tilesToDraw; i++) {\n                // Draw each Y line of the tile\n                for (var tileLineY = 0; tileLineY < 8; tileLineY++) {\n                    drawPixelsFromLineOfTile(spriteTileId + i, // tileId\n                    Graphics.memoryLocationTileDataSelectOneStart, // Graphics.memoryLocationTileDataSelect\n                    vramBankId, // VRAM Bank\n                    0, // Tile Line X Start\n                    7, // Tile Line X End\n                    tileLineY, // Tile Line Y\n                    spriteRow * 8, // Output line X\n                    spriteColumn * 16 + tileLineY + i * 8, // Output line Y\n                    8 * 8, // Output Width\n                    OAM_TILES_LOCATION, // Wasm Memory Start\n                    false, // shouldRepresentMonochromeColorByColorId\n                    paletteLocation, // paletteLocation\n                    -1, // bgMapAttributes\n                    spriteAttributes // spriteAttributes\n                    );\n                }\n            }\n        }\n    }\n}\n\nfunction getDIV() {\n    return Timers.dividerRegister;\n}\nfunction getTIMA() {\n    return Timers.timerCounter;\n}\nfunction getTMA() {\n    return Timers.timerModulo;\n}\nfunction getTAC() {\n    var response = Timers.timerInputClock;\n    if (Timers.timerEnabled) {\n        response = setBitOnByte(2, response);\n    }\n    return response;\n}\n\n// Functions to debug internal gameboy memory\nfunction updateDebugGBMemory() {\n    for (var i = 0; i < DEBUG_GAMEBOY_MEMORY_SIZE; i++) {\n        store(DEBUG_GAMEBOY_MEMORY_LOCATION + i, eightBitLoadFromGBMemoryWithTraps(i));\n    }\n    // Since we are debugging, we don't want to be responsible for tripping the breakpoints\n    Breakpoints.reachedBreakpoint = false;\n}\n\n// Public Exports\n\nexport { config, hasCoreStarted, saveState, loadState, isGBC, getStepsPerStepSet, getStepSets, getSteps, executeMultipleFrames, executeFrame, executeFrameAndCheckAudio, executeUntilCondition, executeStep, getCyclesPerCycleSet, getCycleSets, getCycles, setJoypadState, getNumberOfSamplesInAudioBuffer, clearAudioBuffer, setManualColorizationPalette, WASMBOY_MEMORY_LOCATION, WASMBOY_MEMORY_SIZE, WASMBOY_WASM_PAGES, ASSEMBLYSCRIPT_MEMORY_LOCATION, ASSEMBLYSCRIPT_MEMORY_SIZE, WASMBOY_STATE_LOCATION, WASMBOY_STATE_SIZE, GAMEBOY_INTERNAL_MEMORY_LOCATION, GAMEBOY_INTERNAL_MEMORY_SIZE, VIDEO_RAM_LOCATION, VIDEO_RAM_SIZE, WORK_RAM_LOCATION, WORK_RAM_SIZE, OTHER_GAMEBOY_INTERNAL_MEMORY_LOCATION, OTHER_GAMEBOY_INTERNAL_MEMORY_SIZE, GRAPHICS_OUTPUT_LOCATION, GRAPHICS_OUTPUT_SIZE, GBC_PALETTE_LOCATION, GBC_PALETTE_SIZE, BG_PRIORITY_MAP_LOCATION, BG_PRIORITY_MAP_SIZE, FRAME_LOCATION, FRAME_SIZE, BACKGROUND_MAP_LOCATION, BACKGROUND_MAP_SIZE, TILE_DATA_LOCATION, TILE_DATA_SIZE, OAM_TILES_LOCATION, OAM_TILES_SIZE, AUDIO_BUFFER_LOCATION, AUDIO_BUFFER_SIZE, CHANNEL_1_BUFFER_LOCATION, CHANNEL_1_BUFFER_SIZE, CHANNEL_2_BUFFER_LOCATION, CHANNEL_2_BUFFER_SIZE, CHANNEL_3_BUFFER_LOCATION, CHANNEL_3_BUFFER_SIZE, CHANNEL_4_BUFFER_LOCATION, CHANNEL_4_BUFFER_SIZE, CARTRIDGE_RAM_LOCATION, CARTRIDGE_RAM_SIZE, CARTRIDGE_ROM_LOCATION, CARTRIDGE_ROM_SIZE, DEBUG_GAMEBOY_MEMORY_LOCATION, DEBUG_GAMEBOY_MEMORY_SIZE, getWasmBoyOffsetFromGameBoyOffset, setProgramCounterBreakpoint, resetProgramCounterBreakpoint, setReadGbMemoryBreakpoint, resetReadGbMemoryBreakpoint, setWriteGbMemoryBreakpoint, resetWriteGbMemoryBreakpoint, getRegisterA, getRegisterB, getRegisterC, getRegisterD, getRegisterE, getRegisterH, getRegisterL, getRegisterF, getProgramCounter, getStackPointer, getOpcodeAtProgramCounter, getLY, drawBackgroundMapToWasmMemory, drawTileDataToWasmMemory, drawOamToWasmMemory, getDIV, getTIMA, getTMA, getTAC, updateDebugGBMemory };\n","import * as WasmBoyCore from '../../dist/core/core.esm';\n\nconst getWasmBoyTsCore = async () => {\n  const response = {\n    instance: {\n      exports: WasmBoyCore\n    },\n    byteMemory: WasmBoyCore.memory.wasmByteMemory,\n    type: 'TypeScript'\n  };\n  return response;\n};\n\nexport default getWasmBoyTsCore;\n"],"names":["wasmboyMemorySize","wasmByteMemory","Uint8ClampedArray","memory","size","grow","load","offset","store","value","abs","Math","ceil","ASSEMBLYSCRIPT_MEMORY_LOCATION","ASSEMBLYSCRIPT_MEMORY_SIZE","WASMBOY_STATE_LOCATION","WASMBOY_STATE_SIZE","VIDEO_RAM_LOCATION","VIDEO_RAM_SIZE","WORK_RAM_LOCATION","WORK_RAM_SIZE","OTHER_GAMEBOY_INTERNAL_MEMORY_LOCATION","OTHER_GAMEBOY_INTERNAL_MEMORY_SIZE","GAMEBOY_INTERNAL_MEMORY_LOCATION","GAMEBOY_INTERNAL_MEMORY_SIZE","GBC_PALETTE_LOCATION","GBC_PALETTE_SIZE","BG_PRIORITY_MAP_LOCATION","BG_PRIORITY_MAP_SIZE","FRAME_LOCATION","FRAME_SIZE","BACKGROUND_MAP_LOCATION","BACKGROUND_MAP_SIZE","TILE_DATA_LOCATION","TILE_DATA_SIZE","OAM_TILES_LOCATION","OAM_TILES_SIZE","GRAPHICS_OUTPUT_LOCATION","GRAPHICS_OUTPUT_SIZE","CHANNEL_1_BUFFER_LOCATION","CHANNEL_1_BUFFER_SIZE","CHANNEL_2_BUFFER_LOCATION","CHANNEL_2_BUFFER_SIZE","CHANNEL_3_BUFFER_LOCATION","CHANNEL_3_BUFFER_SIZE","CHANNEL_4_BUFFER_LOCATION","CHANNEL_4_BUFFER_SIZE","AUDIO_BUFFER_LOCATION","AUDIO_BUFFER_SIZE","CARTRIDGE_RAM_LOCATION","CARTRIDGE_RAM_SIZE","CARTRIDGE_ROM_LOCATION","CARTRIDGE_ROM_SIZE","DEBUG_GAMEBOY_MEMORY_LOCATION","DEBUG_GAMEBOY_MEMORY_SIZE","WASMBOY_MEMORY_LOCATION","WASMBOY_MEMORY_SIZE","WASMBOY_WASM_PAGES","Config","enableBootRom","useGbcWhenAvailable","audioBatchProcessing","graphicsBatchProcessing","timersBatchProcessing","graphicsDisableScanlineRendering","audioAccumulateSamples","tileRendering","tileCaching","enableAudioDebugging","u8Portable","param","u16Portable","i8Portable","i32Portable","setFlagBit","flagBit","flagValue","bitwiseOperand","Cpu","registerF","setZeroFlag$$1","setSubtractFlag","setHalfCarryFlag","setCarryFlag","getZeroFlag$$1","getSubtractFlag","getHalfCarryFlag","getCarryFlag$$1","checkAndSetEightBitHalfCarryFlag","amountToAdd","result","checkAndSetEightBitCarryFlag","checkAndSetSixteenBitFlagsAddOverflow","valueOne","valueTwo","useStackPointerBits","signedValueOne","flagXor","halfCarryXor","halfCarryAnd","WasmBoyGBColors","bgWhite","bgLightGrey","bgDarkGrey","bgBlack","obj0White","obj0LightGrey","obj0DarkGrey","obj0Black","obj1White","obj1LightGrey","obj1DarkGrey","obj1Black","GreenColors","OrangeColors","BrownColors","InvertedColors","GrayscaleColors","PastelMixColors","DarkBrownColors","DarkGreenColors","DarkBlueColors","RedColors","BlueColors","YellowColors","Table00Entry08Colors","Table01Entry0BColors","Table01Entry10Colors","Table03Entry0AColors","Table05Entry00Colors","Table05Entry01Colors","Table05Entry02Colors","Table05Entry08Colors","Table05Entry09Colors","Table05Entry11Colors","Table05Entry14Colors","Table05Entry15Colors","Colors","initializeColors","setManualColorizationPalette","titleChecksum","i","eightBitLoadFromGBMemory","hash","setHashColorizationPalette","getRedFromHexColor","color","getGreenFromHexColor","getBlueFromHexColor","colorizationId","concatenateBytes","highByte","lowByte","splitHighByte","groupedByte","splitLowByte","rotateByteLeft","rotateByteLeftThroughCarry","rotateByteRight","rotateByteRightThroughCarry","setBitOnByte","bitPosition","byte","resetBitOnByte","checkBitOnByte","Palette","memoryLocationBackgroundPaletteIndex","memoryLocationBackgroundPaletteData","memoryLocationSpritePaletteIndex","memoryLocationSpritePaletteData","memoryLocationBackgroundPalette","memoryLocationSpritePaletteOne","memoryLocationSpritePaletteTwo","initializePalette","GBCEnabled","eightBitStoreIntoGBMemory","getMonochromeColorFromPalette","colorId","paletteMemoryLocation","shouldRepresentColorByColorId","rgbColor","getColorizedGbHexColorFromPalette","hexColor","writeColorPaletteToMemory","paletteIndex","isSprite","storePaletteByteInWasmMemory","incrementPaletteIndexIfSet","getRgbColorFromPalette","paletteId","paletteHighByte","loadPaletteByteFromWasmMemory","paletteLowByte","getColorComponentFromRgb","colorRgb","bitMask","colorValue","paletteIndexByte","addPriorityforPixel","x","y","hasGbcBgPriority","bgPriorityByte","getPixelStart","getPriorityforPixel","clearPriorityMap","TileCache","tileId","horizontalFlip","nextXIndexToPerformCacheCheck","resetTileCache","drawPixelsFromLineOfTile","tileDataMemoryLocation","vramBankId","tileLineXStart","tileLineXEnd","tileLineY","outputLineX","outputLineY","outputWidth","wasmMemoryStart","shouldRepresentMonochromeColorByColorId","paletteLocation","bgMapAttributes","spriteAttributes","pixelsDrawn","tileDataAddress","getTileDataAddress","byteOneForLineOfTilePixels","loadFromVramBank","byteTwoForLineOfTilePixels","iteratedOutputX","pixelXInTile","paletteColorId","red","green","blue","bgPalette","rgbColorPalette","Graphics","monochromeColor","pixelStart","getTilePixelStart","gbcBgPriority","tileIdFromTileMap","memoryLocationTileDataSelectZeroStart","isDutyCycleClockPositiveOrNegativeForWaveform","channelDuty","waveFormPositionOnDuty","Channel1","updateNRx0","NRx0SweepPeriod","NRx0Negate","NRx0SweepShift","updateNRx1","NRx1Duty","NRx1LengthLoad","lengthCounter","updateNRx2","NRx2StartingVolume","NRx2EnvelopeAddMode","NRx2EnvelopePeriod","isDacEnabled","updateNRx3","NRx3FrequencyLSB","frequency","NRx4FrequencyMSB","updateNRx4","NRx4LengthEnabled","saveState","storeBooleanDirectlyToWasmMemory","getSaveStateMemoryOffset","saveStateSlot","isEnabled","frequencyTimer","envelopeCounter","volume","dutyCycle","isSweepEnabled","sweepCounter","sweepShadowFrequency","loadState","loadBooleanDirectlyFromWasmMemory","initialize","memoryLocationNRx0","memoryLocationNRx1","memoryLocationNRx2","memoryLocationNRx3","memoryLocationNRx4","getSampleFromCycleCounter","accumulatedCycles","cycleCounter","getSample","resetTimer","GBCDoubleSpeed","numberOfCycles","overflowAmount","outputVolume","sample","trigger","calculateSweepAndCheckOverflow","willChannelUpdate","updateSweep","updateLength","updateEnvelope","setFrequency","passedFrequencyHighBits","passedFrequencyLowBits","register4","newRegister4","channelNumber","newFrequency","getNewFrequencyFromSweep","oldFrequency","Channel2","Channel3","NRx2VolumeCode","waveTablePosition","volumeCodeChanged","volumeCode","positionIndexToAdd","memoryLocationWaveSample","memoryLocationWaveTable","Channel4","divisorCode","NRx3ClockShift","NRx3WidthMode","NRx3DivisorCode","divisor","linearFeedbackShiftRegister","getNoiseChannelFrequencyPeriod","lfsrBitZero","lfsrBitOne","xorLfsrBitZeroOne","response","SoundAccumulator","channel1Sample","channel2Sample","channel3Sample","channel4Sample","channel1DacEnabled","channel2DacEnabled","channel3DacEnabled","channel4DacEnabled","leftChannelSampleUnsignedByte","rightChannelSampleUnsignedByte","mixerVolumeChanged","mixerEnabledChanged","needToRemixSamples","initializeSoundAccumulator","accumulateSound","channel1WillUpdate","didChannelDacChange","channel2WillUpdate","channel3WillUpdate","channel4WillUpdate","downSampleCycleCounter","Sound","downSampleCycleMultiplier","maxDownSampleCycles","mixChannelSamples","setLeftAndRightOutputForAudioQueue","audioQueueIndex","maxIndex","wasmBoyMemoryMaxBufferSize","channel1Enabled","channel2Enabled","channel3Enabled","channel4Enabled","batchProcessCycles","updateNR50","NR50LeftMixerVolume","NR50RightMixerVolume","updateNR51","NR51IsChannel4EnabledOnLeftOutput","NR51IsChannel3EnabledOnLeftOutput","NR51IsChannel2EnabledOnLeftOutput","NR51IsChannel1EnabledOnLeftOutput","NR51IsChannel4EnabledOnRightOutput","NR51IsChannel3EnabledOnRightOutput","NR51IsChannel2EnabledOnRightOutput","NR51IsChannel1EnabledOnRightOutput","updateNR52","NR52IsSoundEnabled","maxFrameSequenceCycles","CLOCK_SPEED","frameSequenceCycleCounter","frameSequencer","clearAudioBuffer","currentCycles","memoryLocationNR50","memoryLocationNR51","memoryLocationNR52","memoryLocationChannel3LoadRegisterStart","initializeSound","batchProcessAudio","updateSound","frameSequencerUpdated","updateFrameSequencer","calculateSound","getNumberOfSamplesInAudioBuffer","mixedSample","leftChannelSample","rightChannelSample","getSampleAsUnsignedByte","mixerVolume","precision","convertedSample","maxDivider","leftVolume","rightVolume","bufferLocation","audioQueueOffset","SoundRegisterWriteTraps","SoundRegisterReadTraps","registerNR52","Interrupts","updateInterruptEnabled","isVBlankInterruptEnabled","bitPositionVBlankInterrupt","isLcdInterruptEnabled","bitPositionLcdInterrupt","isTimerInterruptEnabled","bitPositionTimerInterrupt","isSerialInterruptEnabled","bitPositionSerialInterrupt","isJoypadInterruptEnabled","bitPositionJoypadInterrupt","interruptsEnabledValue","updateInterruptRequested","isVBlankInterruptRequested","isLcdInterruptRequested","isTimerInterruptRequested","isSerialInterruptRequested","isJoypadInterruptRequested","interruptsRequestedValue","areInterruptsPending","masterInterruptSwitch","masterInterruptSwitchDelay","memoryLocationInterruptEnabled","memoryLocationInterruptRequest","initializeInterrupts","checkInterrupts","isAnInterruptRequestedAndEnabledValue","wasInterruptHandled","isHaltNoJump","_handleInterrupt","interuptHandlerCycles","isHalted","exitHaltAndStop","setInterrupts","interruptRequest","stackPointer","sixteenBitStoreIntoGBMemory","programCounter","_requestInterrupt","requestVBlankInterrupt","requestLcdInterrupt","requestTimerInterrupt","requestJoypadInterrupt","requestSerialInterrupt","Timers","updateDividerRegister","oldDividerRegister","dividerRegister","memoryLocationDividerRegister","timerEnabled","_checkDividerRegisterFallingEdgeDetector","_incrementTimerCounter","updateTimerCounter","timerCounterWasReset","timerCounterOverflowDelay","timerCounter","updateTimerModulo","timerModulo","updateTimerControl","oldTimerEnabled","newTimerInputClock","oldTimerCounterMaskBit","_getTimerCounterMaskBit","timerInputClock","newTimerCounterMaskBit","shouldIncrementTimerCounter","memoryLocationTimerCounter","memoryLocationTimerModulo","memoryLocationTimerControl","timerCounterMask","initializeTimers","batchProcessTimers","updateTimers","cyclesIncreased","curDividerRegister","counter","newDividerRegister","timerCounterMaskBit","Serial","updateTransferControl","isShiftClockInternal","isClockSpeedFast","transferStartFlag","memoryLocationSerialTransferData","memoryLocationSerialTransferControl","numberOfBitsTransferred","initializeSerial","updateSerial","oldCycles","curCycles","_checkFallingEdgeDetector","transferData","transferControl","newCycles","maskBit","_getFallingEdgeMaskBit","Joypad","updateJoypad","joypadRegisterFlipped","isDpadType","isButtonType","memoryLocationJoypadRegister","up","down","left","right","a","b","select","start","getJoypadState","joypadRegister","setJoypadState","_pressJoypadButton","_releaseJoypadButton","buttonId","isStopped","isButtonStateChanging","_getJoypadButtonStateFromButtonId","_setJoypadButtonStateFromButtonId","isDpadTypeButton","shouldRequestInterrupt","isPressed","handleBanking","Memory","isRomOnly","isMBC1","isMBC2","romEnableByte","isRamBankingEnabled","isMBC5","currentRomBank","romBankLowerBits","isMBC3","isMBC1RomModeEnabled","romBankHigherBits","ramBankBits","currentRamBank","getRomBankAddress","gameboyOffset","switchableCartridgeRomLocation","getRamBankAddress","cartridgeRamLocation","initializeDma","startDmaTransfer","sourceAddressOffset","sourceAddress","spriteInformationByte","spriteInformationAddress","spriteInformationTableLocation","DMACycles","startHdmaTransfer","hdmaTriggerByteToBeWritten","isHblankHdmaActive","hdmaTriggerByte","memoryLocationHdmaTrigger","hdmaSource","getHdmaSourceFromMemory","hdmaDestination","getHdmaDestinationFromMemory","transferLength","hblankHdmaTransferLengthRemaining","hblankHdmaSource","hblankHdmaDestination","hdmaTransfer","updateHblankHdma","bytesToTransfer","remainingTransferLength","transferLengthAsByte","sourceByte","eightBitLoadFromGBMemoryWithTraps","hdmaDestinationWithWrapping","eightBitStoreIntoGBMemoryWithTraps","hdmaCycles","hdmaSourceHigh","memoryLocationHdmaSourceHigh","hdmaSourceLow","memoryLocationHdmaSourceLow","hdmaDestinationHigh","memoryLocationHdmaDestinationHigh","hdmaDestinationLow","memoryLocationHdmaDestinationLow","videoRamLocation","checkWriteTraps","memoryLocationSpeedSwitch","echoRamLocation","wramOffset","spriteInformationTableLocationEnd","Lcd","currentLcdMode","unusableMemoryLocation","unusableMemoryEndLocation","memoryLocationLcdControl","memoryLocationWindowX","updateLcdControl","memoryLocationLcdStatus","updateLcdStatus","memoryLocationScanlineRegister","scanlineRegister","memoryLocationCoincidenceCompare","coincidenceCompare","memoryLocationDmaTransfer","memoryLocationScrollX","scrollX","memoryLocationScrollY","scrollY","windowX","memoryLocationWindowY","windowY","memoryLocationGBCWRAMBank","memoryLocationGBCVRAMBank","getWasmBoyOffsetFromGameBoyOffset","gameboyOffsetHighByte","internalRamBankZeroLocation","wramBankId","Breakpoints","readGbMemory","writeGbMemory","reachedBreakpoint","setProgramCounterBreakpoint","breakpoint","resetProgramCounterBreakpoint","setReadGbMemoryBreakpoint","resetReadGbMemoryBreakpoint","setWriteGbMemoryBreakpoint","resetWriteGbMemoryBreakpoint","sixteenBitStoreIntoGBMemoryWithTraps","nextOffset","currentLcdStatus","valueNoBottomBits","lcdStatusOnlyBottomBits","wasLcdEnabled","enabled","windowTileMapDisplaySelect","windowDisplayEnabled","bgWindowTileDataSelect","bgTileMapDisplaySelect","tallSpriteSize","spriteDisplayEnable","bgDisplayEnabled","resetLcd","shouldBlankScreen","scanlineCycleCounter","lcdStatus","setLcdStatus","lcdMode","newLcdMode","MIN_CYCLES_SPRITES_LCD_MODE","checkCoincidence","renderBackground","tileMapMemoryLocation","pixelYPositionInMap","drawBackgroundWindowScanline","renderWindow","xOffset","iStart","tileYPositionInMap","pixelXPositionInMap","tileXPositionInMap","tileMapAddress","usedTileCache","drawLineOfTileFromTileCache","drawLineOfTileFromTileId","drawColorPixelFromTileId","drawMonochromePixelFromTileId","xPixel","yPixel","pixelYInTile","setPixelOnFrame","wasLastTileHorizontallyFlipped","isCurrentTileHorizontallyFlipped","tileCacheIndex","xPos","previousXPixel","previousTilePixelLocation","getRgbPixelStart","pixelPriority","xOffsetTileWidthRemainder","tileXStart","tileXEnd","renderSprites","useLargerSprites","spriteTableIndex","index","memoryLocationSpriteAttributesTable","spriteYPosition","spriteXPosition","spriteTileId","spriteHeight","isSpritePriorityBehindWindowAndBackground","flipSpriteY","flipSpriteX","currentSpriteLine","spriteTileAddressStart","memoryLocationTileDataSelectOneStart","spriteTileAddress","spriteDataByteOneForLineOfTilePixels","spriteDataByteTwoForLineOfTilePixels","tilePixel","spritePixelXInTile","spriteColorId","spriteXPixelLocationInCameraView","shouldShowFromLcdcPriority","shouldHideFromOamPriority","shouldHideFromBgPriority","bgColorFromPriorityByte","spritePaletteLocation","MAX_CYCLES_PER_SCANLINE","MIN_CYCLES_TRANSFER_DATA_LCD_MODE","memoryLocationTileMapSelectZeroStart","memoryLocationTileMapSelectOneStart","batchProcessGraphics","updateGraphics","initializeGraphics","_drawScanline","_renderEntireFrame","wasmBoyAddress","checkReadTraps","currentSpeedSwitchRegister","upperDividerRegisterBits","readTrapResult","sixteenBitLoadFromGBMemory","lowByteReadTrapResult","highByteReadTrapResult","cartridgeRomLocation","internalRamBankOneLocation","initializeCartridge","cartridgeType","MAX_CYCLES_PER_FRAME","enableHalt","isHaltNormal","haltTypeValue","isHaltBug","registerA","registerB","registerC","registerD","registerE","registerH","registerL","initializeCpu","addARegister","register","addAThroughCarryRegister","overflowedResult","subARegister","negativeRegister","subAThroughCarryRegister","carryRegisterCheck","andARegister","xorARegister","orARegister","cpARegister","tempResult","rotateRegisterLeft","rotateRegisterRight","rotateRegisterLeftThroughCarry","hasHighbit","rotateRegisterRightThroughCarry","hasLowBit","shiftLeftRegister","shiftRightArithmeticRegister","hasLowbit","swapNibblesOnRegister","highNibble","lowNibble","shiftRightLogicalRegister","testBitOnRegister","testByte","setBitOnRegister","bitValue","setByte","relativeJump","relativeJumpOffset","handleCbOpcode","cbOpcode","handledOpcode","instructionRegisterValue","instructionRegisterResult","registerNumber","eightBitLoadSyncCycles","opcodeHighNibble","eightBitStoreSyncCycles","executeOpcode$$1","opcode","handleOpcode0x","handleOpcode1x","handleOpcode2x","handleOpcode3x","handleOpcode4x","handleOpcode5x","handleOpcode6x","handleOpcode7x","handleOpcode8x","handleOpcode9x","handleOpcodeAx","handleOpcodeBx","handleOpcodeCx","handleOpcodeDx","handleOpcodeEx","handleOpcodeFx","syncCycles","sixteenBitLoadSyncCycles","sixteenBitStoreSyncCycles","getDataByteOne","getDataByteTwo","getConcatenatedDataByte","concatenatedDataByte","registerBC3","registerHL","registerBC9","registerBCB","speedSwitch","registerDE3","registerDE9","registerDEA","registerDEB","sixteenBitDataByte","registerHL2","registerHL3","adjustedRegister","adjustment","registerHL9","registerHLA","registerHLB","registerHL4","valueAtHL4","incrementer","registerHL5","valueAtHL5","valueAtHL6","valueAtHLE","registerBC1","cbCycles","registerDE1","largeDataByteOne","registerHL1","signedDataByteOne","registerAF1","Cycles","cyclesPerCycleSet","cycleSets","cycles","getCyclesPerCycleSet","getCycleSets","getCycles","trackCyclesRan","resetCycles","Execute","stepsPerStepSet","stepSets","steps","RESPONSE_CONDITION_ERROR","RESPONSE_CONDITION_FRAME","RESPONSE_CONDITION_AUDIO","RESPONSE_CONDITION_BREAKPOINT","getStepsPerStepSet","getStepSets","getSteps","trackStepsRan","esteps","resetSteps","executeMultipleFrames","numberOfFrames","frameResponse","framesRun","executeFrame","executeUntilCondition","executeFrameAndCheckAudio","maxAudioBuffer","checkMaxCyclesPerFrame","audioBufferSize","errorCondition","frameCondition","audioBufferCondition","executeStep","setHasCoreStarted","haltBugOpcode","haltBugCycles","interruptCycles","hasStarted","hasCoreStarted","config","gbcType","isGBC","getRegisterA","getRegisterB","getRegisterC","getRegisterD","getRegisterE","getRegisterH","getRegisterL","getRegisterF","getProgramCounter","getStackPointer","getOpcodeAtProgramCounter","getLY","drawBackgroundMapToWasmMemory","showColor","drawTileDataToWasmMemory","tileDataMapGridY","tileDataMapGridX","spriteRow","spriteColumn","spriteIndex","currentSpriteAttributes","spriteVramBankId","foundTileMapAddress","drawOamToWasmMemory","tilesToDraw","getDIV","getTIMA","getTMA","getTAC","updateDebugGBMemory","getWasmBoyTsCore","instance","exports","WasmBoyCore","byteMemory","type"],"mappings":"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"}