'use strict';var WasmBoyTsCore=function(){function fb(a,c){a=1<<a&255;b.registerF=0<c?b.registerF|a:b.registerF&(255^a);return b.registerF}function x(a){fb(7,a)}function q(a){fb(6,a)}function H(a){fb(5,a)}function K(a){fb(4,a)}function Ma(){return b.registerF>>7&1}function Q(){return b.registerF>>4&1}function N(a,c){0<=c?H(0!==((a&15)+(c&15)&16)):H((Math.abs(c)&15)>(a&15))}function qb(a,c){0<=c?K(a>(a+c&255)):K(Math.abs(c)>a)}function Qa(a,c,b){b?(a=a^c^a+c,H(0!==(a&16)),K(0!==(a&256))):(b=a+c&65535,
K(b<a),H(0!==((a^c^b)&4096)))}function Mb(a){switch(a){case 0:d.bgWhite=L.bgWhite;d.bgLightGrey=L.bgLightGrey;d.bgDarkGrey=L.bgDarkGrey;d.bgBlack=L.bgBlack;d.obj0White=L.obj0White;d.obj0LightGrey=L.obj0LightGrey;d.obj0DarkGrey=L.obj0DarkGrey;d.obj0Black=L.obj0Black;d.obj1White=L.obj1White;d.obj1LightGrey=L.obj1LightGrey;d.obj1DarkGrey=L.obj1DarkGrey;d.obj1Black=L.obj1Black;break;case 1:d.bgWhite=ba.bgWhite;d.bgLightGrey=ba.bgLightGrey;d.bgDarkGrey=ba.bgDarkGrey;d.bgBlack=ba.bgBlack;d.obj0White=ba.obj0White;
d.obj0LightGrey=ba.obj0LightGrey;d.obj0DarkGrey=ba.obj0DarkGrey;d.obj0Black=ba.obj0Black;d.obj1White=ba.obj1White;d.obj1LightGrey=ba.obj1LightGrey;d.obj1DarkGrey=ba.obj1DarkGrey;d.obj1Black=ba.obj1Black;break;case 2:d.bgWhite=ca.bgWhite;d.bgLightGrey=ca.bgLightGrey;d.bgDarkGrey=ca.bgDarkGrey;d.bgBlack=ca.bgBlack;d.obj0White=ca.obj0White;d.obj0LightGrey=ca.obj0LightGrey;d.obj0DarkGrey=ca.obj0DarkGrey;d.obj0Black=ca.obj0Black;d.obj1White=ca.obj1White;d.obj1LightGrey=ca.obj1LightGrey;d.obj1DarkGrey=
ca.obj1DarkGrey;d.obj1Black=ca.obj1Black;break;case 3:d.bgWhite=da.bgWhite;d.bgLightGrey=da.bgLightGrey;d.bgDarkGrey=da.bgDarkGrey;d.bgBlack=da.bgBlack;d.obj0White=da.obj0White;d.obj0LightGrey=da.obj0LightGrey;d.obj0DarkGrey=da.obj0DarkGrey;d.obj0Black=da.obj0Black;d.obj1White=da.obj1White;d.obj1LightGrey=da.obj1LightGrey;d.obj1DarkGrey=da.obj1DarkGrey;d.obj1Black=da.obj1Black;break;case 4:d.bgWhite=ea.bgWhite;d.bgLightGrey=ea.bgLightGrey;d.bgDarkGrey=ea.bgDarkGrey;d.bgBlack=ea.bgBlack;d.obj0White=
ea.obj0White;d.obj0LightGrey=ea.obj0LightGrey;d.obj0DarkGrey=ea.obj0DarkGrey;d.obj0Black=ea.obj0Black;d.obj1White=ea.obj1White;d.obj1LightGrey=ea.obj1LightGrey;d.obj1DarkGrey=ea.obj1DarkGrey;d.obj1Black=ea.obj1Black;break;case 5:d.bgWhite=fa.bgWhite;d.bgLightGrey=fa.bgLightGrey;d.bgDarkGrey=fa.bgDarkGrey;d.bgBlack=fa.bgBlack;d.obj0White=fa.obj0White;d.obj0LightGrey=fa.obj0LightGrey;d.obj0DarkGrey=fa.obj0DarkGrey;d.obj0Black=fa.obj0Black;d.obj1White=fa.obj1White;d.obj1LightGrey=fa.obj1LightGrey;d.obj1DarkGrey=
fa.obj1DarkGrey;d.obj1Black=fa.obj1Black;break;case 6:d.bgWhite=ha.bgWhite;d.bgLightGrey=ha.bgLightGrey;d.bgDarkGrey=ha.bgDarkGrey;d.bgBlack=ha.bgBlack;d.obj0White=ha.obj0White;d.obj0LightGrey=ha.obj0LightGrey;d.obj0DarkGrey=ha.obj0DarkGrey;d.obj0Black=ha.obj0Black;d.obj1White=ha.obj1White;d.obj1LightGrey=ha.obj1LightGrey;d.obj1DarkGrey=ha.obj1DarkGrey;d.obj1Black=ha.obj1Black;break;case 7:d.bgWhite=ia.bgWhite;d.bgLightGrey=ia.bgLightGrey;d.bgDarkGrey=ia.bgDarkGrey;d.bgBlack=ia.bgBlack;d.obj0White=
ia.obj0White;d.obj0LightGrey=ia.obj0LightGrey;d.obj0DarkGrey=ia.obj0DarkGrey;d.obj0Black=ia.obj0Black;d.obj1White=ia.obj1White;d.obj1LightGrey=ia.obj1LightGrey;d.obj1DarkGrey=ia.obj1DarkGrey;d.obj1Black=ia.obj1Black;break;case 8:d.bgWhite=ja.bgWhite;d.bgLightGrey=ja.bgLightGrey;d.bgDarkGrey=ja.bgDarkGrey;d.bgBlack=ja.bgBlack;d.obj0White=ja.obj0White;d.obj0LightGrey=ja.obj0LightGrey;d.obj0DarkGrey=ja.obj0DarkGrey;d.obj0Black=ja.obj0Black;d.obj1White=ja.obj1White;d.obj1LightGrey=ja.obj1LightGrey;d.obj1DarkGrey=
ja.obj1DarkGrey;d.obj1Black=ja.obj1Black;break;case 9:d.bgWhite=ka.bgWhite;d.bgLightGrey=ka.bgLightGrey;d.bgDarkGrey=ka.bgDarkGrey;d.bgBlack=ka.bgBlack;d.obj0White=ka.obj0White;d.obj0LightGrey=ka.obj0LightGrey;d.obj0DarkGrey=ka.obj0DarkGrey;d.obj0Black=ka.obj0Black;d.obj1White=ka.obj1White;d.obj1LightGrey=ka.obj1LightGrey;d.obj1DarkGrey=ka.obj1DarkGrey;d.obj1Black=ka.obj1Black;break;case 10:d.bgWhite=la.bgWhite;d.bgLightGrey=la.bgLightGrey;d.bgDarkGrey=la.bgDarkGrey;d.bgBlack=la.bgBlack;d.obj0White=
la.obj0White;d.obj0LightGrey=la.obj0LightGrey;d.obj0DarkGrey=la.obj0DarkGrey;d.obj0Black=la.obj0Black;d.obj1White=la.obj1White;d.obj1LightGrey=la.obj1LightGrey;d.obj1DarkGrey=la.obj1DarkGrey;d.obj1Black=la.obj1Black;break;case 11:d.bgWhite=ma.bgWhite;d.bgLightGrey=ma.bgLightGrey;d.bgDarkGrey=ma.bgDarkGrey;d.bgBlack=ma.bgBlack;d.obj0White=ma.obj0White;d.obj0LightGrey=ma.obj0LightGrey;d.obj0DarkGrey=ma.obj0DarkGrey;d.obj0Black=ma.obj0Black;d.obj1White=ma.obj1White;d.obj1LightGrey=ma.obj1LightGrey;d.obj1DarkGrey=
ma.obj1DarkGrey;d.obj1Black=ma.obj1Black;break;case 12:d.bgWhite=na.bgWhite,d.bgLightGrey=na.bgLightGrey,d.bgDarkGrey=na.bgDarkGrey,d.bgBlack=na.bgBlack,d.obj0White=na.obj0White,d.obj0LightGrey=na.obj0LightGrey,d.obj0DarkGrey=na.obj0DarkGrey,d.obj0Black=na.obj0Black,d.obj1White=na.obj1White,d.obj1LightGrey=na.obj1LightGrey,d.obj1DarkGrey=na.obj1DarkGrey,d.obj1Black=na.obj1Black}}function p(a,c){return(a&255)<<8|c&255}function F(a){return(a&65280)>>8}function E(a,c){return c&~(1<<a)}function l(a,c){return 0!=
(c&1<<a)}function gb(a,c){a=u(c)>>2*a&3;if(c===Sa.memoryLocationSpritePaletteOne)switch(c=d.obj0White,a){case 1:c=d.obj0LightGrey;break;case 2:c=d.obj0DarkGrey;break;case 3:c=d.obj0Black}else if(c===Sa.memoryLocationSpritePaletteTwo)switch(c=d.obj1White,a){case 1:c=d.obj1LightGrey;break;case 2:c=d.obj1DarkGrey;break;case 3:c=d.obj1Black}else switch(c=d.bgWhite,a){case 1:c=d.bgLightGrey;break;case 2:c=d.bgDarkGrey;break;case 3:c=d.bgBlack}return c}function hb(a,c,b){c=8*a+2*c;a=Nb(c+1,b);b=Nb(c,b);
return p(a,b)}function oa(a,c){a*=5;return 8*((c&31<<a)>>a)}function Nb(a,c){a&=63;c&&(a+=64);return e[Ta+a]}function ib(a,c,b,d){void 0===b&&(b=0);void 0===d&&(d=!1);b&=3;d&&(b|=4);e[Ua+(160*c+a)]=b}function rb(a,c,d,J,z,f,k,m,h,g,n,p,t,w){var Ra=0;c=$a(c,a);a=T(c+2*f,d);d=T(c+2*f+1,d);for(f=J;f<=z;++f)if(c=k+(f-J),c<h){var O=f;if(0>t||!l(5,t))O=7-O;var Pa=0;l(O,d)&&(Pa+=1,Pa<<=1);l(O,a)&&(Pa+=1);if(b.GBCEnabled&&(0<=t||0<=w)){O=0<=w;var aa=t&7;O&&(aa=w&7);var B=hb(aa,Pa,O);O=oa(0,B);aa=oa(1,B);
B=oa(2,B)}else if(0>=p&&(p=r.memoryLocationBackgroundPalette),n){aa=Pa;B=n;void 0===B&&(B=!1);O=aa;B||(O=u(p)>>(aa<<1)&3);aa=242;switch(O){case 1:aa=160;break;case 2:aa=88;break;case 3:aa=8}aa=O=B=aa}else B=gb(Pa,p),O=(B&16711680)>>16,aa=(B&65280)>>8,B&=255;var sb=3*(m*h+c);e[g+sb+0]=O;e[g+sb+1]=aa;e[g+sb+2]=B;O=!1;0<=t&&(O=l(7,t));ib(c,m,Pa,O);Ra++}return Ra}function $a(a,c){a===r.memoryLocationTileDataSelectZeroStart&&(c=l(7,c)?c-128:c+128);return a+16*c}function Ob(a,c){switch(a){case 1:return l(c,
129);case 2:return l(c,135);case 3:return l(c,126);default:return l(c,1)}}function tb(){var a=y.sweepShadowFrequency,c=a>>y.NRx0SweepShift;y.NRx0Negate?(y.sweepNegateShouldDisableChannelOnClear=!0,c=a-c):c=a+c;return c}function jb(a){switch(a){case y.channelNumber:a=y.isDacEnabled;var c=g.channel1DacEnabled!==a;g.channel1DacEnabled=a;return c;case A.channelNumber:return a=A.isDacEnabled,c=g.channel2DacEnabled!==a,g.channel2DacEnabled=a,c;case v.channelNumber:return a=v.isDacEnabled,c=g.channel3DacEnabled!==
a,g.channel3DacEnabled=a,c;case D.channelNumber:return a=D.isDacEnabled,c=g.channel4DacEnabled!==a,g.channel4DacEnabled=a,c}return!1}function ab(){for(var a=m.batchProcessCycles(),c=m.currentCycles;c>=a;)Pb(a),c-=a;m.currentCycles=c}function Pb(a){var c=m.maxFrameSequenceCycles();var b=m.frameSequenceCycleCounter+a;if(b>=c){m.frameSequenceCycleCounter=b-c;c=m.frameSequencer+1&7;switch(c){case 0:y.updateLength();A.updateLength();v.updateLength();D.updateLength();break;case 2:y.updateLength();A.updateLength();
v.updateLength();D.updateLength();y.updateSweep();break;case 4:y.updateLength();A.updateLength();v.updateLength();D.updateLength();break;case 6:y.updateLength();A.updateLength();v.updateLength();D.updateLength();y.updateSweep();break;case 7:y.updateEnvelope(),A.updateEnvelope(),D.updateEnvelope()}m.frameSequencer=c;c=!0}else m.frameSequenceCycleCounter=b,c=!1;if(M.audioAccumulateSamples&&!c){c=y.willChannelUpdate(a)||jb(y.channelNumber);b=A.willChannelUpdate(a)||jb(A.channelNumber);var d=v.willChannelUpdate(a)||
jb(v.channelNumber),e=D.willChannelUpdate(a)||jb(D.channelNumber);c&&(g.channel1Sample=y.getSampleFromCycleCounter());b&&(g.channel2Sample=A.getSampleFromCycleCounter());d&&(g.channel3Sample=v.getSampleFromCycleCounter());e&&(g.channel4Sample=D.getSampleFromCycleCounter());if(c||b||d||e)g.needToRemixSamples=!0;c=m.downSampleCycleCounter;c+=a;a=m.maxDownSampleCycles();c>=a&&(c-=a,g.needToRemixSamples||g.mixerVolumeChanged||g.mixerEnabledChanged?Va(g.channel1Sample,g.channel2Sample,g.channel3Sample,
g.channel4Sample):m.downSampleCycleCounter=c,Wa(g.leftChannelSampleUnsignedByte+1,g.rightChannelSampleUnsignedByte+1,kb),a=m.audioQueueIndex+1,a>=(m.wasmBoyMemoryMaxBufferSize>>1|0)-1&&--a,m.audioQueueIndex=a);m.downSampleCycleCounter=c}else{c=y.getSample(a)|0;b=A.getSample(a)|0;d=v.getSample(a)|0;e=D.getSample(a)|0;g.channel1Sample=c;g.channel2Sample=b;g.channel3Sample=d;g.channel4Sample=e;a=m.downSampleCycleCounter+a;if(a>=m.maxDownSampleCycles()){a-=m.maxDownSampleCycles();var f=Va(c,b,d,e),l=
F(f);Wa(l+1,(f&255)+1,kb);M.enableAudioDebugging&&(f=Va(c,15,15,15),l=F(f),Wa(l+1,(f&255)+1,ub),f=Va(15,b,15,15),l=F(f),Wa(l+1,(f&255)+1,vb),f=Va(15,15,d,15),l=F(f),Wa(l+1,(f&255)+1,wb),f=Va(15,15,15,e),l=F(f),Wa(l+1,(f&255)+1,xb));c=m.audioQueueIndex+1;c>=(m.wasmBoyMemoryMaxBufferSize>>1|0)-1&&--c;m.audioQueueIndex=c}m.downSampleCycleCounter=a}}function Qb(){return m.audioQueueIndex}function Rb(){m.audioQueueIndex=0}function Va(a,c,b,d){void 0===a&&(a=15);void 0===c&&(c=15);void 0===b&&(b=15);void 0===
d&&(d=15);g.mixerVolumeChanged=!1;var e=0+(m.NR51IsChannel1EnabledOnLeftOutput?a:15);e+=m.NR51IsChannel2EnabledOnLeftOutput?c:15;e+=m.NR51IsChannel3EnabledOnLeftOutput?b:15;e+=m.NR51IsChannel4EnabledOnLeftOutput?d:15;a=0+(m.NR51IsChannel1EnabledOnRightOutput?a:15);a+=m.NR51IsChannel2EnabledOnRightOutput?c:15;a+=m.NR51IsChannel3EnabledOnRightOutput?b:15;a+=m.NR51IsChannel4EnabledOnRightOutput?d:15;g.mixerEnabledChanged=!1;g.needToRemixSamples=!1;c=Sb(e,m.NR50LeftMixerVolume+1);b=Sb(a,m.NR50RightMixerVolume+
1);g.leftChannelSampleUnsignedByte=c;g.rightChannelSampleUnsignedByte=b;return p(c,b)}function Sb(a,c){if(60===a)return 127;a=1E5*(a-60)*c>>3;a=(a/1E5|0)+60;a=1E5*a/(12E6/254|0)|0;return a|=0}function Wa(a,c,b){b+=m.audioQueueIndex<<1;e[b+0]=a+1;e[b+1]=c+1}function cc(a){switch(a){case y.memoryLocationNRx0:return a=u(y.memoryLocationNRx0),a|128;case A.memoryLocationNRx0:return a=u(A.memoryLocationNRx0),a|255;case v.memoryLocationNRx0:return a=u(v.memoryLocationNRx0),a|127;case D.memoryLocationNRx0:return a=
u(D.memoryLocationNRx0),a|255;case m.memoryLocationNR50:return a=u(m.memoryLocationNR50),a|0;case y.memoryLocationNRx1:return a=u(y.memoryLocationNRx1),a|63;case A.memoryLocationNRx1:return a=u(A.memoryLocationNRx1),a|63;case v.memoryLocationNRx1:return a=u(v.memoryLocationNRx1),a|255;case D.memoryLocationNRx1:return a=u(D.memoryLocationNRx1),a|255;case m.memoryLocationNR51:return a=u(m.memoryLocationNR51),a|0;case y.memoryLocationNRx2:return a=u(y.memoryLocationNRx2),a|0;case A.memoryLocationNRx2:return a=
u(A.memoryLocationNRx2),a|0;case v.memoryLocationNRx2:return a=u(v.memoryLocationNRx2),a|159;case D.memoryLocationNRx2:return a=u(D.memoryLocationNRx2),a|0;case m.memoryLocationNR52:return a=0,a=m.NR52IsSoundEnabled?a|128:E(7,a),a=y.isEnabled?a|1:E(0,a),a=A.isEnabled?a|2:E(1,a),a=v.isEnabled?a|4:E(2,a),a=D.isEnabled?a|8:E(3,a),a|112;case y.memoryLocationNRx3:return a=u(y.memoryLocationNRx3),a|255;case A.memoryLocationNRx3:return a=u(A.memoryLocationNRx3),a|255;case v.memoryLocationNRx3:return a=u(v.memoryLocationNRx3),
a|255;case D.memoryLocationNRx3:return a=u(D.memoryLocationNRx3),a|0;case y.memoryLocationNRx4:return a=u(y.memoryLocationNRx4),a|191;case A.memoryLocationNRx4:return a=u(A.memoryLocationNRx4),a|191;case v.memoryLocationNRx4:return a=u(v.memoryLocationNRx4),a|191;case D.memoryLocationNRx4:return a=u(D.memoryLocationNRx4),a|191}return-1}function bb(a){lb(!1);var c=u(n.memoryLocationInterruptRequest);c=E(a,c);n.interruptsRequestedValue=c;f(n.memoryLocationInterruptRequest,c);b.stackPointer-=2;b.isHalted();
c=b.stackPointer;var d=b.programCounter,e=F(d);f(c+0,d&255);f(c+1,e);switch(a){case n.bitPositionVBlankInterrupt:n.isVBlankInterruptRequested=!1;b.programCounter=64;break;case n.bitPositionLcdInterrupt:n.isLcdInterruptRequested=!1;b.programCounter=72;break;case n.bitPositionTimerInterrupt:n.isTimerInterruptRequested=!1;b.programCounter=80;break;case n.bitPositionSerialInterrupt:n.isSerialInterruptRequested=!1;b.programCounter=88;break;case n.bitPositionJoypadInterrupt:n.isJoypadInterruptRequested=
!1,b.programCounter=96}}function Xa(a){var c=u(n.memoryLocationInterruptRequest);c|=1<<a;n.interruptsRequestedValue=c;f(n.memoryLocationInterruptRequest,c)}function lb(a){a?n.masterInterruptSwitchDelay=!0:n.masterInterruptSwitch=!1}function yb(a){for(var c=0;c<a;){var b=t.dividerRegister,d=b;c+=4;d+=4;d&=65535;t.dividerRegister=d;if(t.timerEnabled){var e=t.timerCounterWasReset;t.timerCounterOverflowDelay?(t.timerCounter=t.timerModulo,n.isTimerInterruptRequested=!0,Xa(n.bitPositionTimerInterrupt),
t.timerCounterOverflowDelay=!1,t.timerCounterWasReset=!0):e&&(t.timerCounterWasReset=!1);Tb(b,d)&&zb()}}}function zb(){var a=t.timerCounter;255<++a&&(t.timerCounterOverflowDelay=!0,a=0);t.timerCounter=a}function Tb(a,c){var b=Ab(t.timerInputClock);return l(b,a)&&!l(b,c)}function Ab(a){switch(a){case 0:return 9;case 1:return 3;case 2:return 5;case 3:return 7}return 0}function Na(a){var c=b.isStopped=!1;dc(a)||(c=!0);Ca(a,!0);c&&(c=!1,3>=a&&(c=!0),a=!1,C.isDpadType&&c&&(a=!0),C.isButtonType&&!c&&(a=
!0),a&&(n.isJoypadInterruptRequested=!0,Xa(n.bitPositionJoypadInterrupt)))}function dc(a){switch(a){case 0:return C.up;case 1:return C.right;case 2:return C.down;case 3:return C.left;case 4:return C.a;case 5:return C.b;case 6:return C.select;case 7:return C.start;default:return!1}}function Ca(a,c){switch(a){case 0:C.up=c;break;case 1:C.right=c;break;case 2:C.down=c;break;case 3:C.left=c;break;case 4:C.a=c;break;case 5:C.b=c;break;case 6:C.select=c;break;case 7:C.start=c}}function Ub(a,c,d){for(var e=
0;e<d;++e){for(var Ra=Bb(a+e),f=c+e;40959<f;)f-=8192;Cb(f,Ra)}k.DMACycles+=(32<<b.GBCDoubleSpeed)*(d>>4)}function Db(a,c){if(a===b.memoryLocationSpeedSwitch)return f(b.memoryLocationSpeedSwitch,c&1),!1;if(b.BootROMEnabled&&a===b.memoryLocationBootROMSwitch)return b.BootROMEnabled=!1,b.programCounter=255,!0;var d=k.videoRamLocation,J=k.spriteInformationTableLocation;if(a<d){if(!k.isRomOnly){d=k.isMBC1;var z=k.isMBC2;if(8191>=a){if(!z||l(4,c))c&=15,0===c?k.isRamBankingEnabled=!1:10===c&&(k.isRamBankingEnabled=
!0)}else 16383>=a?(J=k.isMBC5,!J||12287>=a?(a=k.currentRomBank,z&&(a=c&15),d?(c&=31,a&=224):k.isMBC3?(c&=127,a&=128):J&&(a&=0),k.currentRomBank=a|c):k.currentRomBank=p(0<c,k.currentRomBank&255)):!z&&24575>=a?d&&k.isMBC1RomModeEnabled?(a=k.currentRomBank&31,k.currentRomBank=a|c&224):(c=k.isMBC5?c&15:c&3,k.currentRamBank=c):!z&&32767>=a&&d&&(k.isMBC1RomModeEnabled=l(0,c))}return!1}if(a>=d&&a<k.cartridgeRamLocation)return!0;if(a>=k.echoRamLocation&&a<J)return f(a-8192,c),!0;if(a>=J&&a<=k.spriteInformationTableLocationEnd)return 2<=
w.currentLcdMode;if(a>=k.unusableMemoryLocation&&a<=k.unusableMemoryEndLocation)return!1;if(a===V.memoryLocationSerialTransferControl)return V.updateTransferControl(c);if(65296<=a&&65318>=a){ab();if(a===m.memoryLocationNR52||m.NR52IsSoundEnabled){switch(a){case y.memoryLocationNRx0:y.updateNRx0(c);break;case v.memoryLocationNRx0:v.updateNRx0(c);break;case y.memoryLocationNRx1:y.updateNRx1(c);break;case A.memoryLocationNRx1:A.updateNRx1(c);break;case v.memoryLocationNRx1:v.updateNRx1(c);break;case D.memoryLocationNRx1:D.updateNRx1(c);
break;case y.memoryLocationNRx2:y.updateNRx2(c);break;case A.memoryLocationNRx2:A.updateNRx2(c);break;case v.memoryLocationNRx2:v.volumeCodeChanged=!0;v.updateNRx2(c);break;case D.memoryLocationNRx2:D.updateNRx2(c);break;case y.memoryLocationNRx3:y.updateNRx3(c);break;case A.memoryLocationNRx3:A.updateNRx3(c);break;case v.memoryLocationNRx3:v.updateNRx3(c);break;case D.memoryLocationNRx3:D.updateNRx3(c);break;case y.memoryLocationNRx4:y.updateNRx4(c);break;case A.memoryLocationNRx4:A.updateNRx4(c);
break;case v.memoryLocationNRx4:v.updateNRx4(c);break;case D.memoryLocationNRx4:D.updateNRx4(c);break;case m.memoryLocationNR50:m.updateNR50(c);g.mixerVolumeChanged=!0;break;case m.memoryLocationNR51:m.updateNR51(c);g.mixerEnabledChanged=!0;break;case m.memoryLocationNR52:a=m.NR52IsSoundEnabled;!a&&l(7,c)&&(m.frameSequencer=7,y.waveFormPositionOnDuty=0,A.waveFormPositionOnDuty=0);if(a&&!l(7,c))for(a=65296;65318>a;++a)Cb(a,0);m.updateNR52(c)}c=!0}else c=!1;return c}if(65328<=a&&65343>=a)return ab(),
v.isEnabled?(v.handleWaveRamWrite(c),!1):!0;if(a>=w.memoryLocationLcdControl&&a<=r.memoryLocationWindowX){if(a===w.memoryLocationLcdControl)return w.updateLcdControl(c),!0;if(a===w.memoryLocationLcdStatus)return w.updateLcdStatus(c),!1;if(a===r.memoryLocationScanlineRegister)return r.scanlineRegister=0,f(a,0),!1;if(a===w.memoryLocationCoincidenceCompare)return w.coincidenceCompare=c,!0;if(a===r.memoryLocationDmaTransfer){c<<=8;for(a=0;159>=a;++a)d=u(c+a),f(k.spriteInformationTableLocation+a,d);k.DMACycles=
644;return!0}switch(a){case r.memoryLocationScrollX:r.scrollX=c;break;case r.memoryLocationScrollY:r.scrollY=c;break;case r.memoryLocationWindowX:r.windowX=c;break;case r.memoryLocationWindowY:r.windowY=c}return!0}if(a===k.memoryLocationHdmaTrigger)return b.GBCEnabled&&(k.isHblankHdmaActive&&!l(7,c)?(k.isHblankHdmaActive=!1,c=u(k.memoryLocationHdmaTrigger),f(k.memoryLocationHdmaTrigger,c|128)):(a=u(k.memoryLocationHdmaSourceHigh),d=u(k.memoryLocationHdmaSourceLow),a=p(a,d)&65520,d=u(k.memoryLocationHdmaDestinationHigh),
J=u(k.memoryLocationHdmaDestinationLow),d=p(d,J),d=(d&8176)+k.videoRamLocation,J=E(7,c),J=J+1<<4,l(7,c)?(k.isHblankHdmaActive=!0,k.hblankHdmaTransferLengthRemaining=J,k.hblankHdmaSource=a,k.hblankHdmaDestination=d,f(k.memoryLocationHdmaTrigger,E(7,c))):(Ub(a,d,J),f(k.memoryLocationHdmaTrigger,255)))),!1;if((a===k.memoryLocationGBCWRAMBank||a===k.memoryLocationGBCVRAMBank)&&k.isHblankHdmaActive&&(d=k.hblankHdmaSource,16384<=d&&32767>=d||53248<=d&&57343>=d))return!1;if(a>=Sa.memoryLocationBackgroundPaletteIndex&&
a<=Sa.memoryLocationSpritePaletteData){d=Sa.memoryLocationSpritePaletteData;if(a===Sa.memoryLocationBackgroundPaletteData||a===d)J=u(a-1),J=E(6,J),z=J&63,a===d&&(z+=64),e[Ta+z]=c,c=J,--a,l(7,c)&&f(a,c+1|128);return!0}if(a>=t.memoryLocationDividerRegister&&a<=t.memoryLocationTimerControl){yb(t.currentCycles);t.currentCycles=0;switch(a){case t.memoryLocationDividerRegister:return t.updateDividerRegister(),!1;case t.memoryLocationTimerCounter:t.updateTimerCounter(c);break;case t.memoryLocationTimerModulo:t.updateTimerModulo(c);
break;case t.memoryLocationTimerControl:t.updateTimerControl(c)}return!0}a===C.memoryLocationJoypadRegister&&C.updateJoypad(c);if(a===n.memoryLocationInterruptRequest)return n.updateInterruptRequested(c),!0;a===n.memoryLocationInterruptEnabled&&n.updateInterruptEnabled(c);return!0}function Eb(a){switch(a>>12){case 0:if(b.BootROMEnabled)if(b.GBCEnabled){if(256>a||511<a&&2304>a)return a+mb}else if(!b.GBCEnabled&&256>a)return a+mb;case 1:case 2:case 3:return a+nb;case 4:case 5:case 6:case 7:var c=k.currentRomBank;
k.isMBC5||0!==c||(c=1);return 16384*c+(a-k.switchableCartridgeRomLocation)+nb;case 8:case 9:return c=0,b.GBCEnabled&&(c=u(k.memoryLocationGBCVRAMBank)&1),a-k.videoRamLocation+2048+8192*c;case 10:case 11:return 8192*k.currentRamBank+(a-k.cartridgeRamLocation)+Fb;case 12:return a-k.internalRamBankZeroLocation+18432;case 13:return c=0,b.GBCEnabled&&(c=u(k.memoryLocationGBCWRAMBank)&7),a-k.internalRamBankZeroLocation+18432+4096*((1>c?1:c)-1);default:return a-k.echoRamLocation+51200}}function f(a,c){a=
Eb(a);e[a]=c}function Cb(a,c){a===W.writeGbMemory&&(W.reachedBreakpoint=!0);Db(a,c)&&f(a,c)}function Vb(a){r.scanlineCycleCounter=0;r.scanlineRegister=0;f(r.memoryLocationScanlineRegister,0);var c=u(w.memoryLocationLcdStatus);c=E(1,c);c=E(0,c);w.currentLcdMode=0;f(w.memoryLocationLcdStatus,c);if(a)for(a=0;93184>a;++a)e[Ya+a]=255}function Wb(a,c){0!==a&&1!==a||r.scanlineRegister!==w.coincidenceCompare?c=E(2,c):(c|=4,l(6,c)&&(n.isLcdInterruptRequested=!0,Xa(n.bitPositionLcdInterrupt)));return c}function Xb(a,
c,d,J,f,k){for(var Ra=J>>3;160>f;++f){var z=f+k;256<=z&&(z-=256);var m=d+(Ra<<5)+(z>>3),h=T(m,0),g=!1;if(M.tileCaching){var n=f;var p=a,t=z,w=m,v=h,B=0,q=Za.nextXIndexToPerformCacheCheck;if(0<p&&8<n&&v===Za.tileId&&n===q){v=l(5,u(w-1));w=l(5,u(w));for(var y=0;8>y;++y){v!==w&&(y=7-y);var x=n+y;if(160>=x){var A=n-(8-y),C=Ya+3*(160*p+x);Y(x,p,0,e[C]);Y(x,p,1,e[C]);Y(x,p,2,e[C]);A=e[Ua+(160*p+A)];ib(x,p,E(2,A),l(2,A));B++}}}else Za.tileId=v;n>=q&&(q=n+8,p=t&7|0,n<p&&(q+=p));Za.nextXIndexToPerformCacheCheck=
q;n=B;0<n&&(f+=n-1,g=!0)}M.tileRendering&&!g?(g=f,n=a,p=z,z=c,B=J&7|0,q=0,0==g&&(q=p-(p>>3<<3)),p=7,160<g+8&&(p=160-g),t=-1,v=0,b.GBCEnabled&&(t=T(m,1),v=l(3,t)|0,l(6,t)&&(B=7-B)),n=rb(h,z,v,q,p,B,g,n,160,Ya,!1,0,t,-1),0<n&&(f+=n-1)):g||(b.GBCEnabled?(g=f,n=a,q=J,B=$a(c,h),h=T(m,1),q=q&7|0,l(6,h)&&(q=7-q),p=l(3,h)|0,m=T(B+2*q,p),B=T(B+2*q+1,p),q=z&7|0,l(5,h)||(q=7-q),z=0,l(q,B)&&(z=z+1<<1),l(q,m)&&(z+=1),q=hb(h&7,z,!1),m=oa(0,q),B=oa(1,q),q=oa(2,q),Y(g,n,0,m),Y(g,n,1,B),Y(g,n,2,q),ib(g,n,z,l(7,h))):
(m=f,g=a,B=J,n=$a(c,h),B=B&7|0,h=T(n+2*B,0),n=T(n+2*B+1,0),B=z&7|0,B=7-B,z=0,l(B,n)&&(z=z+1<<1),l(B,h)&&(z+=1),h=gb(z,r.memoryLocationBackgroundPalette),Y(m,g,0,(h&16711680)>>16),Y(m,g,1,(h&65280)>>8),Y(m,g,2,h&255),ib(m,g,z)))}}function Yb(a){if(w.enabled)for(r.scanlineCycleCounter+=a,a=M.graphicsDisableScanlineRendering;r.scanlineCycleCounter>=r.MAX_CYCLES_PER_SCANLINE();){r.scanlineCycleCounter-=r.MAX_CYCLES_PER_SCANLINE();var c=r.scanlineRegister;if(144===c){if(a)for(var b=0;144>=b;++b)Gb(b);
else Gb(c);for(b=0;144>b;++b)for(var d=0;160>d;++d)e[Ua+(160*b+d)]=0;Za.tileId=-1;Za.nextXIndexToPerformCacheCheck=-1}else 144>c&&(a||Gb(c));c=153<c?0:c+1;r.scanlineRegister=c}if(w.enabled){c=r.scanlineRegister;b=w.currentLcdMode;a=0;if(144<=c)a=1;else{d=r.scanlineCycleCounter;var z=r.MIN_CYCLES_SPRITES_LCD_MODE();d>=z?a=2:d>=z&&(a=3)}if(b!==a){c=u(w.memoryLocationLcdStatus);w.currentLcdMode=a;b=!1;switch(a){case 0:c=E(0,c);c=E(1,c);b=l(3,c);break;case 1:c=E(1,c);c|=1;b=l(4,c);break;case 2:c=E(0,
c);c|=2;b=l(5,c);break;case 3:c|=3}b&&(n.isLcdInterruptRequested=!0,Xa(n.bitPositionLcdInterrupt));0===a&&k.isHblankHdmaActive&&(d=16,b=k.hblankHdmaTransferLengthRemaining,b<d&&(d=b),Ub(k.hblankHdmaSource,k.hblankHdmaDestination,d),k.hblankHdmaSource+=d,k.hblankHdmaDestination+=d,b-=d,k.hblankHdmaTransferLengthRemaining=b,d=k.memoryLocationHdmaTrigger,0>=b?(k.isHblankHdmaActive=!1,f(d,255)):f(d,E(7,(b>>4)-1)));1===a&&(n.isVBlankInterruptRequested=!0,Xa(n.bitPositionVBlankInterrupt));c=Wb(a,c);f(w.memoryLocationLcdStatus,
c)}else 153===c&&(c=u(w.memoryLocationLcdStatus),c=Wb(a,c),f(w.memoryLocationLcdStatus,c))}}function Gb(a){var c=r.memoryLocationTileDataSelectZeroStart;w.bgWindowTileDataSelect&&(c=r.memoryLocationTileDataSelectOneStart);if(b.GBCEnabled||w.bgDisplayEnabled){var d=r.memoryLocationTileMapSelectZeroStart;w.bgTileMapDisplaySelect&&(d=r.memoryLocationTileMapSelectOneStart);Xb(a,c,d,a+r.scrollY&255,0,r.scrollX)}if(w.windowDisplayEnabled){d=r.memoryLocationTileMapSelectZeroStart;w.windowTileMapDisplaySelect&&
(d=r.memoryLocationTileMapSelectOneStart);var f=r.windowX,z=r.windowY;a<z||(f-=7,Xb(a,c,d,a-z,f,-f|0))}if(w.spriteDisplayEnable)for(c=w.tallSpriteSize,d=39;0<=d;--d){z=4*d;var m=r.memoryLocationSpriteAttributesTable+z,k=u(m+0);f=u(m+1);var h=u(m+2);k-=16;f-=8;var n=8;c&&(n=16,h-=h&1);if(a>=k&&a<k+n){z=u(r.memoryLocationSpriteAttributesTable+z+3);m=l(7,z);var g=l(6,z),p=l(5,z);k=a-k;g&&(k=n-k,--k);k<<=1;h=$a(r.memoryLocationTileDataSelectOneStart,h);h+=k;n=b.GBCEnabled&&l(3,z);k=T(h+0,n);h=T(h+1,n);
for(n=7;0<=n;--n){g=n;p&&(g-=7,g=-g);var q=0;l(g,h)&&(q=q+1<<1);l(g,k)&&(q+=1);if(0!==q&&(g=f+(7-n),0<=g&&160>=g)){var t=b.GBCEnabled&&!w.bgDisplayEnabled,v=!1,y=!1;if(!t){var x=e[Ua+(160*a+g)],A=x&3;m&&0<A?v=!0:b.GBCEnabled&&l(2,x)&&0<A&&(y=!0)}if(t||!v&&!y)b.GBCEnabled?(v=hb(z&7,q,!0),q=oa(0,v),t=oa(1,v),v=oa(2,v),Y(g,a,0,q),Y(g,a,1,t),Y(g,a,2,v)):(t=r.memoryLocationSpritePaletteOne,l(4,z)&&(t=r.memoryLocationSpritePaletteTwo),q=gb(q,t),Y(g,a,0,(q&16711680)>>16),Y(g,a,1,(q&65280)>>8),Y(g,a,2,q&
255))}}}}}function Y(a,b,d,f){e[Ya+3*(160*b+a)+d]=f}function T(a,b){return e[a-k.videoRamLocation+2048+8192*(b&1)]}function Hb(a){var c=k.videoRamLocation;return a<c||a>=c&&a<k.cartridgeRamLocation?-1:a>=k.echoRamLocation&&a<k.spriteInformationTableLocation?u(a-8192):a>=k.spriteInformationTableLocation&&a<=k.spriteInformationTableLocationEnd?2>w.currentLcdMode?255:-1:a===b.memoryLocationSpeedSwitch?(a=255,c=u(b.memoryLocationSpeedSwitch),l(0,c)||(a=E(0,a)),b.GBCDoubleSpeed||(a=E(7,a)),a):a===r.memoryLocationScanlineRegister?
(f(a,r.scanlineRegister),r.scanlineRegister):65296<=a&&65318>=a?(ab(),cc(a)):65319<=a&&65327>=a?255:65328<=a&&65343>=a?(ab(),v.isEnabled?v.handleWaveRamRead():-1):a===t.memoryLocationDividerRegister?(c=F(t.dividerRegister),f(a,c),c):a===t.memoryLocationTimerCounter?(f(a,t.timerCounter),t.timerCounter):a===n.memoryLocationInterruptRequest?224|n.interruptsRequestedValue:a===C.memoryLocationJoypadRegister?(a=C.joypadRegisterFlipped,C.isDpadType?(a=C.up?E(2,a):a|4,a=C.right?E(0,a):a|1,a=C.down?E(3,a):
a|8,a=C.left?E(1,a):a|2):C.isButtonType&&(a=C.a?E(0,a):a|1,a=C.b?E(1,a):a|2,a=C.select?E(2,a):a|4,a=C.start?E(3,a):a|8),a|240):-1}function u(a){return e[Eb(a)]}function Bb(a){a===W.readGbMemory&&(W.reachedBreakpoint=!0);var b=Hb(a);return-1===b?u(a):b}function h(a){return 0<e[a]}function Da(a){var c=b.registerA;N(c,a);qb(c,a);c=c+a&255;b.registerA=c;x(0===c);q(0)}function Ea(a){var c=b.registerA,d=c+a+Q()&255;H(0!=((c^a^d)&16));a=c+a+Q()&65535;K(0<(a&256));b.registerA=d;x(0===d);q(0)}function Fa(a){var c=
-1*a;var d=b.registerA;N(d,c);qb(d,c);d=d-a&255;b.registerA=d;x(0===d);q(1)}function Ga(a){var c=b.registerA,d=c-a-Q()&255;H(0!=((c^a^d)&16));a=c-a-Q()&65535;K(0<(a&256));b.registerA=d;x(0===d);q(1)}function Ha(a){a&=b.registerA;b.registerA=a;x(0===a);q(0);H(1);K(0)}function Ia(a){a=(b.registerA^a)&255;b.registerA=a;x(0===a);q(0);H(0);K(0)}function Ja(a){a|=b.registerA;b.registerA=a;x(0===a);q(0);H(0);K(0)}function Ka(a){var c=b.registerA;a*=-1;N(c,a);qb(c,a);x(0===c+a);q(1)}function Oa(a,b){x(0===
(b&1<<a));q(0);H(1);return b}function X(a,b,d){return 0<b?d|1<<a:d&~(1<<a)}function cb(a){var c=b.programCounter;c=(c+(a<<24>>24)&65535)+1&65535;b.programCounter=c}function Zb(a){var c=b.programCounter;c=c+1&65535;b.isHaltBug&&(c=c-1&65535);b.programCounter=c;switch((a&240)>>4){case 0:return ec(a);case 1:return fc(a);case 2:return gc(a);case 3:return hc(a);case 4:return ic(a);case 5:return jc(a);case 6:return kc(a);case 7:return lc(a);case 8:return mc(a);case 9:return nc(a);case 10:return oc(a);case 11:return pc(a);
case 12:return qc(a);case 13:return rc(a);case 14:return sc(a);default:return tc(a)}}function I(a){La(4);return Bb(a)}function P(a,b){La(4);Cb(a,b)}function Ba(a){La(8);var b=Hb(a);b=-1===b?u(a):b;a+=1;var d=Hb(a);a=-1===d?u(a):d;return p(a,b)}function R(a,b){La(8);var c=F(b);b&=255;Db(a,b)&&f(a,b);a+=1;Db(a,c)&&f(a,c)}function G(){La(4);return u(b.programCounter)}function U(){La(4);var a=u(b.programCounter+1&65535);return p(a,G())}function ec(a){switch(a){case 0:return 4;case 1:return a=U(),b.registerB=
F(a),b.registerC=a&255,b.programCounter=b.programCounter+2&65535,4;case 2:return P(p(b.registerB,b.registerC),b.registerA),4;case 3:return a=p(b.registerB,b.registerC),a++,b.registerB=F(a),b.registerC=a&255,8;case 4:return a=b.registerB,N(a,1),a=a+1&255,b.registerB=a,x(0===a),q(0),4;case 5:return a=b.registerB,N(a,-1),a=a-1&255,b.registerB=a,x(0===a),q(1),4;case 6:return b.registerB=G(),b.programCounter=b.programCounter+1&65535,4;case 7:return a=b.registerA,K(128===(a&128)),b.registerA=(a<<1|a>>7)&
255,x(0),q(0),H(0),4;case 8:return R(U(),b.stackPointer),b.programCounter=b.programCounter+2&65535,4;case 9:a=p(b.registerH,b.registerL);var c=p(b.registerB,b.registerC);Qa(a,c,!1);a=a+c&65535;b.registerH=F(a);b.registerL=a&255;q(0);return 8;case 10:return b.registerA=I(p(b.registerB,b.registerC)),4;case 11:return a=p(b.registerB,b.registerC),a=a-1&65535,b.registerB=F(a),b.registerC=a&255,8;case 12:return a=b.registerC,N(a,1),a=a+1&255,b.registerC=a,x(0===a),q(0),4;case 13:return a=b.registerC,N(a,
-1),a=a-1&255,b.registerC=a,x(0===a),q(1),4;case 14:return b.registerC=G(),b.programCounter=b.programCounter+1&65535,4;case 15:return a=b.registerA,K(0<(a&1)),b.registerA=(a>>1|a<<7)&255,x(0),q(0),H(0),4}return-1}function fc(a){switch(a){case 16:if(b.GBCEnabled&&(a=I(b.memoryLocationSpeedSwitch),l(0,a)))return a=E(0,a),l(7,a)?(b.GBCDoubleSpeed=!1,a=E(7,a)):(b.GBCDoubleSpeed=!0,a|=128),P(b.memoryLocationSpeedSwitch,a),68;b.isStopped=!0;b.programCounter=b.programCounter+1&65535;return 4;case 17:return a=
U(),b.registerD=F(a),b.registerE=a&255,b.programCounter=b.programCounter+2&65535,4;case 18:return P(p(b.registerD,b.registerE),b.registerA),4;case 19:return a=p(b.registerD,b.registerE),a=a+1&65535,b.registerD=F(a),b.registerE=a&255,8;case 20:return a=b.registerD,N(a,1),b.registerD=a+1&255,x(0===b.registerD),q(0),4;case 21:return a=b.registerD,N(a,-1),b.registerD=a-1&255,x(0===b.registerD),q(1),4;case 22:return b.registerD=G(),b.programCounter=b.programCounter+1&65535,4;case 23:return a=128===(b.registerA&
128),b.registerA=(b.registerA<<1|Q())&255,K(a),x(0),q(0),H(0),4;case 24:return cb(G()),8;case 25:a=p(b.registerH,b.registerL);var c=p(b.registerD,b.registerE);Qa(a,c,!1);a=a+c&65535;b.registerH=F(a);b.registerL=a&255;q(0);return 8;case 26:return a=p(b.registerD,b.registerE),b.registerA=I(a),4;case 27:return a=p(b.registerD,b.registerE),a=a-1&65535,b.registerD=F(a),b.registerE=a&255,8;case 28:return a=b.registerE,N(a,1),a=a+1&255,b.registerE=a,x(0===a),q(0),4;case 29:return a=b.registerE,N(a,-1),a=
a-1&255,b.registerE=a,x(0===a),q(1),4;case 30:return b.registerE=G(),b.programCounter=b.programCounter+1&65535,4;case 31:return a=1===(b.registerA&1),b.registerA=(b.registerA>>1|Q()<<7)&255,K(a),x(0),q(0),H(0),4}return-1}function gc(a){switch(a){case 32:return 0===Ma()?cb(G()):b.programCounter=b.programCounter+1&65535,8;case 33:return a=U(),b.registerH=F(a),b.registerL=a&255,b.programCounter=b.programCounter+2&65535,4;case 34:return a=p(b.registerH,b.registerL),P(a,b.registerA),a=a+1&65535,b.registerH=
F(a),b.registerL=a&255,4;case 35:return a=p(b.registerH,b.registerL),a=a+1&65535,b.registerH=F(a),b.registerL=a&255,8;case 36:return a=b.registerH,N(a,1),a=a+1&255,b.registerH=a,x(0===a),q(0),4;case 37:return a=b.registerH,N(a,-1),a=a-1&255,b.registerH=a,x(0===a),q(1),4;case 38:return b.registerH=G(),b.programCounter=b.programCounter+1&65535,4;case 39:a=0;0<(b.registerF>>5&1)&&(a|=6);0<Q()&&(a|=96);var c=b.registerA;0<(b.registerF>>6&1)?c=c-a&255:(9<(c&15)&&(a|=6),153<c&&(a|=96),c=c+a&255);x(0===
c);K(0!==(a&96));H(0);b.registerA=c;return 4;case 40:return 0<Ma()?cb(G()):b.programCounter=b.programCounter+1&65535,8;case 41:return a=p(b.registerH,b.registerL),Qa(a,a,!1),a=2*a&65535,b.registerH=F(a),b.registerL=a&255,q(0),8;case 42:return a=p(b.registerH,b.registerL),b.registerA=I(a),a=a+1&65535,b.registerH=F(a),b.registerL=a&255,4;case 43:return a=p(b.registerH,b.registerL),a=a-1&65535,b.registerH=F(a),b.registerL=a&255,8;case 44:return a=b.registerL,N(a,1),a=a+1&255,b.registerL=a,x(0===a),q(0),
4;case 45:return a=b.registerL,N(a,-1),a=a-1&255,b.registerL=a,x(0===a),q(1),4;case 46:return b.registerL=G(),b.programCounter=b.programCounter+1&65535,4;case 47:return b.registerA=~b.registerA,q(1),H(1),4}return-1}function hc(a){switch(a){case 48:return 0===Q()?cb(G()):b.programCounter=b.programCounter+1&65535,8;case 49:return b.stackPointer=U(),b.programCounter=b.programCounter+2&65535,4;case 50:return a=p(b.registerH,b.registerL),P(a,b.registerA),a=a-1&65535,b.registerH=F(a),b.registerL=a&255,
4;case 51:return b.stackPointer=b.stackPointer+1&65535,8;case 52:a=p(b.registerH,b.registerL);var c=I(a);N(c,1);c=c+1&255;x(0===c);q(0);P(a,c);return 4;case 53:return a=p(b.registerH,b.registerL),c=I(a),N(c,-1),c=c-1&255,x(0===c),q(1),P(a,c),4;case 54:return P(p(b.registerH,b.registerL),G()),b.programCounter=b.programCounter+1&65535,4;case 55:return q(0),H(0),K(1),4;case 56:return 1===Q()?cb(G()):b.programCounter=b.programCounter+1&65535,8;case 57:return a=p(b.registerH,b.registerL),Qa(a,b.stackPointer,
!1),a=a+b.stackPointer&65535,b.registerH=F(a),b.registerL=a&255,q(0),8;case 58:return a=p(b.registerH,b.registerL),b.registerA=I(a),a=a-1&65535,b.registerH=F(a),b.registerL=a&255,4;case 59:return b.stackPointer=b.stackPointer-1&65535,8;case 60:return a=b.registerA,N(a,1),a=a+1&255,b.registerA=a,x(0===a),q(0),4;case 61:return a=b.registerA,N(a,-1),a=a-1&255,b.registerA=a,x(0===a),q(1),4;case 62:return b.registerA=G(),b.programCounter=b.programCounter+1&65535,4;case 63:return q(0),H(0),K(0>=Q()),4}return-1}
function ic(a){switch(a){case 64:return 4;case 65:return b.registerB=b.registerC,4;case 66:return b.registerB=b.registerD,4;case 67:return b.registerB=b.registerE,4;case 68:return b.registerB=b.registerH,4;case 69:return b.registerB=b.registerL,4;case 70:return b.registerB=I(p(b.registerH,b.registerL)),4;case 71:return b.registerB=b.registerA,4;case 72:return b.registerC=b.registerB,4;case 73:return 4;case 74:return b.registerC=b.registerD,4;case 75:return b.registerC=b.registerE,4;case 76:return b.registerC=
b.registerH,4;case 77:return b.registerC=b.registerL,4;case 78:return b.registerC=I(p(b.registerH,b.registerL)),4;case 79:return b.registerC=b.registerA,4}return-1}function jc(a){switch(a){case 80:return b.registerD=b.registerB,4;case 81:return b.registerD=b.registerC,4;case 82:return 4;case 83:return b.registerD=b.registerE,4;case 84:return b.registerD=b.registerH,4;case 85:return b.registerD=b.registerL,4;case 86:return b.registerD=I(p(b.registerH,b.registerL)),4;case 87:return b.registerD=b.registerA,
4;case 88:return b.registerE=b.registerB,4;case 89:return b.registerE=b.registerC,4;case 90:return b.registerE=b.registerD,4;case 91:return 4;case 92:return b.registerE=b.registerH,4;case 93:return b.registerE=b.registerL,4;case 94:return b.registerE=I(p(b.registerH,b.registerL)),4;case 95:return b.registerE=b.registerA,4}return-1}function kc(a){switch(a){case 96:return b.registerH=b.registerB,4;case 97:return b.registerH=b.registerC,4;case 98:return b.registerH=b.registerD,4;case 99:return b.registerH=
b.registerE,4;case 100:return b.registerH=b.registerH,4;case 101:return b.registerH=b.registerL,4;case 102:return b.registerH=I(p(b.registerH,b.registerL)),4;case 103:return b.registerH=b.registerA,4;case 104:return b.registerL=b.registerB,4;case 105:return b.registerL=b.registerC,4;case 106:return b.registerL=b.registerD,4;case 107:return b.registerL=b.registerE,4;case 108:return b.registerL=b.registerH,4;case 109:return b.registerL=b.registerL,4;case 110:return b.registerL=I(p(b.registerH,b.registerL)),
4;case 111:return b.registerL=b.registerA,4}return-1}function lc(a){switch(a){case 112:return P(p(b.registerH,b.registerL),b.registerB),4;case 113:return P(p(b.registerH,b.registerL),b.registerC),4;case 114:return P(p(b.registerH,b.registerL),b.registerD),4;case 115:return P(p(b.registerH,b.registerL),b.registerE),4;case 116:return P(p(b.registerH,b.registerL),b.registerH),4;case 117:return P(p(b.registerH,b.registerL),b.registerL),4;case 118:return k.isHblankHdmaActive||b.enableHalt(),4;case 119:return P(p(b.registerH,
b.registerL),b.registerA),4;case 120:return b.registerA=b.registerB,4;case 121:return b.registerA=b.registerC,4;case 122:return b.registerA=b.registerD,4;case 123:return b.registerA=b.registerE,4;case 124:return b.registerA=b.registerH,4;case 125:return b.registerA=b.registerL,4;case 126:return b.registerA=I(p(b.registerH,b.registerL)),4;case 127:return 4}return-1}function mc(a){switch(a){case 128:return Da(b.registerB),4;case 129:return Da(b.registerC),4;case 130:return Da(b.registerD),4;case 131:return Da(b.registerE),
4;case 132:return Da(b.registerH),4;case 133:return Da(b.registerL),4;case 134:return a=I(p(b.registerH,b.registerL)),Da(a),4;case 135:return Da(b.registerA),4;case 136:return Ea(b.registerB),4;case 137:return Ea(b.registerC),4;case 138:return Ea(b.registerD),4;case 139:return Ea(b.registerE),4;case 140:return Ea(b.registerH),4;case 141:return Ea(b.registerL),4;case 142:return a=I(p(b.registerH,b.registerL)),Ea(a),4;case 143:return Ea(b.registerA),4}return-1}function nc(a){switch(a){case 144:return Fa(b.registerB),
4;case 145:return Fa(b.registerC),4;case 146:return Fa(b.registerD),4;case 147:return Fa(b.registerE),4;case 148:return Fa(b.registerH),4;case 149:return Fa(b.registerL),4;case 150:return a=I(p(b.registerH,b.registerL)),Fa(a),4;case 151:return Fa(b.registerA),4;case 152:return Ga(b.registerB),4;case 153:return Ga(b.registerC),4;case 154:return Ga(b.registerD),4;case 155:return Ga(b.registerE),4;case 156:return Ga(b.registerH),4;case 157:return Ga(b.registerL),4;case 158:return a=I(p(b.registerH,b.registerL)),
Ga(a),4;case 159:return Ga(b.registerA),4}return-1}function oc(a){switch(a){case 160:return Ha(b.registerB),4;case 161:return Ha(b.registerC),4;case 162:return Ha(b.registerD),4;case 163:return Ha(b.registerE),4;case 164:return Ha(b.registerH),4;case 165:return Ha(b.registerL),4;case 166:return a=I(p(b.registerH,b.registerL)),Ha(a),4;case 167:return Ha(b.registerA),4;case 168:return Ia(b.registerB),4;case 169:return Ia(b.registerC),4;case 170:return Ia(b.registerD),4;case 171:return Ia(b.registerE),
4;case 172:return Ia(b.registerH),4;case 173:return Ia(b.registerL),4;case 174:return a=I(p(b.registerH,b.registerL)),Ia(a),4;case 175:return Ia(b.registerA),4}return-1}function pc(a){switch(a){case 176:return Ja(b.registerB),4;case 177:return Ja(b.registerC),4;case 178:return Ja(b.registerD),4;case 179:return Ja(b.registerE),4;case 180:return Ja(b.registerH),4;case 181:return Ja(b.registerL),4;case 182:return a=I(p(b.registerH,b.registerL)),Ja(a),4;case 183:return Ja(b.registerA),4;case 184:return Ka(b.registerB),
4;case 185:return Ka(b.registerC),4;case 186:return Ka(b.registerD),4;case 187:return Ka(b.registerE),4;case 188:return Ka(b.registerH),4;case 189:return Ka(b.registerL),4;case 190:return a=I(p(b.registerH,b.registerL)),Ka(a),4;case 191:return Ka(b.registerA),4}return-1}function qc(a){switch(a){case 192:return 0===Ma()?(a=b.stackPointer,b.programCounter=Ba(a),b.stackPointer=a+2&65535,12):8;case 193:return a=Ba(b.stackPointer),b.stackPointer=b.stackPointer+2&65535,b.registerB=F(a),b.registerC=a&255,
4;case 194:if(0===Ma())return b.programCounter=U(),8;b.programCounter=b.programCounter+2&65535;return 12;case 195:return b.programCounter=U(),8;case 196:if(0===Ma())return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter+2&65535),b.programCounter=U(),8;b.programCounter=b.programCounter+2&65535;return 12;case 197:return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,p(b.registerB,b.registerC)),8;case 198:return Da(G()),b.programCounter=b.programCounter+1&65535,4;case 199:return a=b.stackPointer-
2&65535,b.stackPointer=a,R(a,b.programCounter),b.programCounter=0,8;case 200:return 1===Ma()?(a=b.stackPointer,b.programCounter=Ba(a),b.stackPointer=a+2&65535,12):8;case 201:return a=b.stackPointer,b.programCounter=Ba(a),b.stackPointer=a+2&65535,8;case 202:if(1===Ma())return b.programCounter=U(),8;b.programCounter=b.programCounter+2&65535;return 12;case 203:var c=G();a=-1;var d=!1,e=0,f=0,l=c&7;switch(l){case 0:e=b.registerB;break;case 1:e=b.registerC;break;case 2:e=b.registerD;break;case 3:e=b.registerE;
break;case 4:e=b.registerH;break;case 5:e=b.registerL;break;case 6:e=I(p(b.registerH,b.registerL));break;case 7:e=b.registerA}var g=(c&240)>>4;switch(g){case 0:7>=c?(c=e,K(128===(c&128)),c=(c<<1|c>>7)&255,x(0===c),q(0),H(0),f=c,d=!0):15>=c&&(c=e,K(0<(c&1)),c=(c>>1|c<<7)&255,x(0===c),q(0),H(0),f=c,d=!0);break;case 1:23>=c?(c=e,d=128===(c&128),c=(c<<1|Q())&255,K(d),x(0===c),q(0),H(0),f=c,d=!0):31>=c&&(c=e,d=1===(c&1),c=(c>>1|Q()<<7)&255,K(d),x(0===c),q(0),H(0),f=c,d=!0);break;case 2:39>=c?(c=e,d=128===
(c&128),c=c<<1&255,K(d),x(0===c),q(0),H(0),f=c,d=!0):47>=c&&(c=e,d=128===(c&128),e=1===(c&1),c=c>>1&255,d&&(c|=128),x(0===c),q(0),H(0),K(e),f=c,d=!0);break;case 3:55>=c?(c=e,c=((c&15)<<4|(c&240)>>4)&255,x(0===c),q(0),H(0),K(0),f=c,d=!0):63>=c&&(c=e,d=1===(c&1),c=c>>1&255,x(0===c),q(0),H(0),K(d),f=c,d=!0);break;case 4:71>=c?(f=Oa(0,e),d=!0):79>=c&&(f=Oa(1,e),d=!0);break;case 5:87>=c?(f=Oa(2,e),d=!0):95>=c&&(f=Oa(3,e),d=!0);break;case 6:103>=c?(f=Oa(4,e),d=!0):111>=c&&(f=Oa(5,e),d=!0);break;case 7:119>=
c?(f=Oa(6,e),d=!0):127>=c&&(f=Oa(7,e),d=!0);break;case 8:135>=c?(f=X(0,0,e),d=!0):143>=c&&(f=X(1,0,e),d=!0);break;case 9:151>=c?(f=X(2,0,e),d=!0):159>=c&&(f=X(3,0,e),d=!0);break;case 10:167>=c?(f=X(4,0,e),d=!0):175>=c&&(f=X(5,0,e),d=!0);break;case 11:183>=c?(f=X(6,0,e),d=!0):191>=c&&(f=X(7,0,e),d=!0);break;case 12:199>=c?(f=X(0,1,e),d=!0):207>=c&&(f=X(1,1,e),d=!0);break;case 13:215>=c?(f=X(2,1,e),d=!0):223>=c&&(f=X(3,1,e),d=!0);break;case 14:231>=c?(f=X(4,1,e),d=!0):239>=c&&(f=X(5,1,e),d=!0);break;
case 15:247>=c?(f=X(6,1,e),d=!0):255>=c&&(f=X(7,1,e),d=!0)}switch(l){case 0:b.registerB=f;break;case 1:b.registerC=f;break;case 2:b.registerD=f;break;case 3:b.registerE=f;break;case 4:b.registerH=f;break;case 5:b.registerL=f;break;case 6:(4>g||7<g)&&P(p(b.registerH,b.registerL),f);break;case 7:b.registerA=f}d&&(a=4);b.programCounter=b.programCounter+1&65535;return a;case 204:if(1===Ma())return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter+2),b.programCounter=U(),8;b.programCounter=
b.programCounter+2&65535;return 12;case 205:return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter+2&65535),b.programCounter=U(),8;case 206:return Ea(G()),b.programCounter=b.programCounter+1&65535,4;case 207:return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter),b.programCounter=8}return-1}function rc(a){switch(a){case 208:return 0===Q()?(a=b.stackPointer,b.programCounter=Ba(a),b.stackPointer=a+2&65535,12):8;case 209:a=b.stackPointer;var c=Ba(a);b.stackPointer=a+2&65535;
b.registerD=F(c);b.registerE=c&255;return 4;case 210:if(0===Q())return b.programCounter=U(),8;b.programCounter=b.programCounter+2&65535;return 12;case 212:if(0===Q())return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter+2),b.programCounter=U(),8;b.programCounter=b.programCounter+2&65535;return 12;case 213:return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,p(b.registerD,b.registerE)),8;case 214:return Fa(G()),b.programCounter=b.programCounter+1&65535,4;case 215:return a=b.stackPointer-
2&65535,b.stackPointer=a,R(a,b.programCounter),b.programCounter=16,8;case 216:return 1===Q()?(a=b.stackPointer,b.programCounter=Ba(a),b.stackPointer=a+2&65535,12):8;case 217:return a=b.stackPointer,b.programCounter=Ba(a),lb(!0),b.stackPointer=a+2&65535,8;case 218:if(1===Q())return b.programCounter=U(),8;b.programCounter=b.programCounter+2&65535;return 12;case 220:if(1===Q())return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter+2&65535),b.programCounter=U(),8;b.programCounter=b.programCounter+
2&65535;return 12;case 222:return Ga(G()),b.programCounter=b.programCounter+1&65535,4;case 223:return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter),b.programCounter=24,8}return-1}function sc(a){switch(a){case 224:return a=G(),P(65280+a,b.registerA),b.programCounter=b.programCounter+1&65535,4;case 225:a=b.stackPointer;var c=Ba(a);b.stackPointer=a+2&65535;b.registerH=F(c);b.registerL=c&255;return 4;case 226:return P(65280+b.registerC,b.registerA),4;case 229:return a=b.stackPointer-
2&65535,b.stackPointer=a,R(a,p(b.registerH,b.registerL)),8;case 230:return Ha(G()),b.programCounter=b.programCounter+1&65535,4;case 231:return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter),b.programCounter=32,8;case 232:return a=G()<<24>>24,Qa(b.stackPointer,a,!0),b.stackPointer=b.stackPointer+a&65535,x(0),q(0),b.programCounter=b.programCounter+1&65535,12;case 233:return b.programCounter=p(b.registerH,b.registerL),4;case 234:return P(U(),b.registerA),b.programCounter=b.programCounter+
2&65535,4;case 238:return Ia(G()),b.programCounter=b.programCounter+1&65535,4;case 239:return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter),b.programCounter=40,8}return-1}function tc(a){switch(a){case 240:return a=G(),b.registerA=I(65280+a)&255,b.programCounter=b.programCounter+1&65535,4;case 241:a=b.stackPointer;var c=Ba(a);b.stackPointer=a+2&65535;b.registerA=F(c);b.registerF=c&255;return 4;case 242:return b.registerA=I(65280+b.registerC)&255,4;case 243:return lb(!1),4;case 245:return a=
b.stackPointer-2&65535,b.stackPointer=a,R(a,p(b.registerA,b.registerF)),8;case 246:return Ja(G()),b.programCounter=b.programCounter+1&65535,4;case 247:return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter),b.programCounter=48,8;case 248:return c=G()<<24>>24,a=b.stackPointer,x(0),q(0),Qa(a,c,!0),a=a+c&65535,b.registerH=F(a),b.registerL=a&255,b.programCounter=b.programCounter+1&65535,8;case 249:return b.stackPointer=p(b.registerH,b.registerL),8;case 250:return b.registerA=I(U()),b.programCounter=
b.programCounter+2&65535,4;case 251:return lb(!0),4;case 254:return Ka(G()),b.programCounter=b.programCounter+1&65535,4;case 255:return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter),b.programCounter=56,8}return-1}function La(a){0<k.DMACycles&&(a+=k.DMACycles,k.DMACycles=0);b.currentCycles+=a;if(!b.isStopped){if(M.graphicsBatchProcessing){r.currentCycles+=a;for(var c=r.batchProcessCycles();r.currentCycles>=c;)Yb(c),r.currentCycles-=c}else Yb(a);M.audioBatchProcessing?(m.currentCycles+=
a,ab()):Pb(a);c=a;if(V.transferStartFlag)for(var d=0;d<c;){var e=V.currentCycles,g=e;d+=4;g+=4;65535<g&&(g-=65536);V.currentCycles=g;var h=V.isClockSpeedFast?2:7;l(h,e)&&!l(h,g)&&(e=V.memoryLocationSerialTransferData,g=u(e),g=(g<<1)+1,g&=255,f(e,g),e=V.numberOfBitsTransferred,8===++e?(V.numberOfBitsTransferred=0,n.isSerialInterruptRequested=!0,Xa(n.bitPositionSerialInterrupt),e=V.memoryLocationSerialTransferControl,g=u(e),f(e,E(7,g)),V.transferStartFlag=!1):V.numberOfBitsTransferred=e)}}M.timersBatchProcessing?
(t.currentCycles+=a,yb(t.currentCycles),t.currentCycles=0):yb(a);c=Z.cycles;c+=a;c>=Z.cyclesPerCycleSet&&(Z.cycleSets+=1,c-=Z.cyclesPerCycleSet);Z.cycles=c}function $b(){return Ib(!0,-1)}function Ib(a,c){void 0===c&&(c=-1);a=1024;0<c?a=c:0>c&&(a=-1);for(var d=!1,e=!1,f=!1;!(d||e||f||W.reachedBreakpoint);)c=ac(),0>c?d=!0:b.currentCycles>=b.MAX_CYCLES_PER_FRAME()?e=!0:-1<a&&Qb()>=a&&(f=!0);if(e)return b.currentCycles-=b.MAX_CYCLES_PER_FRAME(),S.RESPONSE_CONDITION_FRAME;if(f)return S.RESPONSE_CONDITION_AUDIO;
if(W.reachedBreakpoint)return W.reachedBreakpoint=!1,S.RESPONSE_CONDITION_BREAKPOINT;b.programCounter=b.programCounter-1&65535;return-1}function ac(){db=!0;if(b.isHaltBug){var a=u(b.programCounter);a=Zb(a);La(a);b.exitHaltAndStop()}n.masterInterruptSwitchDelay&&(n.masterInterruptSwitch=!0,n.masterInterruptSwitchDelay=!1);if(0<(n.interruptsEnabledValue&n.interruptsRequestedValue&31)){a=!1;n.masterInterruptSwitch&&!b.isHaltNoJump&&(n.isVBlankInterruptEnabled&&n.isVBlankInterruptRequested?(bb(n.bitPositionVBlankInterrupt),
a=!0):n.isLcdInterruptEnabled&&n.isLcdInterruptRequested?(bb(n.bitPositionLcdInterrupt),a=!0):n.isTimerInterruptEnabled&&n.isTimerInterruptRequested?(bb(n.bitPositionTimerInterrupt),a=!0):n.isSerialInterruptEnabled&&n.isSerialInterruptRequested?(bb(n.bitPositionSerialInterrupt),a=!0):n.isJoypadInterruptEnabled&&n.isJoypadInterruptRequested&&(bb(n.bitPositionJoypadInterrupt),a=!0));var c=0;a&&(c=20,b.isHalted()&&(b.exitHaltAndStop(),c+=4));b.isHalted()&&b.exitHaltAndStop();a=c}else a=0;0<a&&La(a);
a=4;b.isHalted()||b.isStopped||(a=u(b.programCounter),a=Zb(a));b.registerF&=240;if(0>=a)return a;La(a);c=S.steps;c+=1;c>=S.stepsPerStepSet&&(S.stepSets+=1,c-=S.stepsPerStepSet);S.steps=c;b.programCounter===W.programCounter&&(W.reachedBreakpoint=!0);return a}let e=new Uint8ClampedArray(9109504),eb={size:()=>9109504,grow:()=>{},wasmByteMemory:e};var uc=65536,Ta=67584,Ua=Ta+128,Ya=Ua+23552,ob=Ya+93184,Jb=ob+196608,pb=Jb+147456,vc=Ta,wc=pb-Ta+15360,ub=pb+15360,vb=ub+131072,wb=vb+131072,xb=wb+131072,kb=
xb+131072,Fb=kb+131072,mb=Fb+131072,nb=mb+2560,Kb=nb+8258560,bc=Kb+65535+1,Lb=Math.ceil(bc/1024/64)+1,M=function(){function a(){}a.enableBootRom=!1;a.useGbcWhenAvailable=!0;a.audioBatchProcessing=!1;a.graphicsBatchProcessing=!1;a.timersBatchProcessing=!1;a.graphicsDisableScanlineRendering=!1;a.audioAccumulateSamples=!1;a.tileRendering=!1;a.tileCaching=!1;a.enableAudioDebugging=!1;return a}(),L=function(){function a(){}a.bgWhite=15921906;a.bgLightGrey=10526880;a.bgDarkGrey=5789784;a.bgBlack=526344;
a.obj0White=15921906;a.obj0LightGrey=10526880;a.obj0DarkGrey=5789784;a.obj0Black=526344;a.obj1White=15921906;a.obj1LightGrey=10526880;a.obj1DarkGrey=5789784;a.obj1Black=526344;return a}(),ea=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=5439232;a.bgDarkGrey=16728576;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=5439232;a.obj0DarkGrey=16728576;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=5439232;a.obj1DarkGrey=16728576;a.obj1Black=0;return a}(),ja=function(){function a(){}a.bgWhite=
16777215;a.bgLightGrey=16776960;a.bgDarkGrey=16711680;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16776960;a.obj0DarkGrey=16711680;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=16776960;a.obj1DarkGrey=16711680;a.obj1Black=0;return a}(),ba=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=16756067;a.bgDarkGrey=8663296;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16756067;a.obj0DarkGrey=8663296;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=16756067;a.obj1DarkGrey=8663296;
a.obj1Black=0;return a}(),ha=function(){function a(){}a.bgWhite=0;a.bgLightGrey=33924;a.bgDarkGrey=16768512;a.bgBlack=16777215;a.obj0White=0;a.obj0LightGrey=33924;a.obj0DarkGrey=16768512;a.obj0Black=16777215;a.obj1White=0;a.obj1LightGrey=33924;a.obj1DarkGrey=16768512;a.obj1Black=16777215;return a}(),na=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=10855845;a.bgDarkGrey=5395026;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=10855845;a.obj0DarkGrey=5395026;a.obj0Black=0;a.obj1White=16777215;
a.obj1LightGrey=10855845;a.obj1DarkGrey=5395026;a.obj1Black=0;return a}(),ia=function(){function a(){}a.bgWhite=16777125;a.bgLightGrey=16749716;a.bgDarkGrey=9737471;a.bgBlack=0;a.obj0White=16777125;a.obj0LightGrey=16749716;a.obj0DarkGrey=9737471;a.obj0Black=0;a.obj1White=16777125;a.obj1LightGrey=16749716;a.obj1DarkGrey=9737471;a.obj1Black=0;return a}(),da=function(){function a(){}a.bgWhite=16770757;a.bgLightGrey=13540484;a.bgDarkGrey=8678185;a.bgBlack=5910792;a.obj0White=16777215;a.obj0LightGrey=
16756067;a.obj0DarkGrey=8663296;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=16756067;a.obj1DarkGrey=8663296;a.obj1Black=0;return a}(),fa=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=8126257;a.bgDarkGrey=25541;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16745604;a.obj0DarkGrey=9714234;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=16745604;a.obj1DarkGrey=9714234;a.obj1Black=0;return a}(),ma=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=9211102;a.bgDarkGrey=
5395084;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16745604;a.obj0DarkGrey=9714234;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=16756067;a.obj1DarkGrey=8663296;a.obj1Black=0;return a}(),ca=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=16745604;a.bgDarkGrey=9714234;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=8126257;a.obj0DarkGrey=33792;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=6530559;a.obj1DarkGrey=255;a.obj1Black=0;return a}(),la=function(){function a(){}a.bgWhite=
16777215;a.bgLightGrey=6530559;a.bgDarkGrey=255;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16745604;a.obj0DarkGrey=9714234;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=8126257;a.obj1DarkGrey=33792;a.obj1Black=0;return a}(),ka=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=16776960;a.bgDarkGrey=8079872;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=6530559;a.obj0DarkGrey=255;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=8126257;a.obj1DarkGrey=33792;a.obj1Black=0;return a}(),
pa=function(){function a(){}a.bgWhite=10853631;a.bgLightGrey=16776960;a.bgDarkGrey=25344;a.bgBlack=0;a.obj0White=10853631;a.obj0LightGrey=16776960;a.obj0DarkGrey=25344;a.obj0Black=0;a.obj1White=10853631;a.obj1LightGrey=16776960;a.obj1DarkGrey=25344;a.obj1Black=0;return a}(),qa=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=6530559;a.bgDarkGrey=255;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16745604;a.obj0DarkGrey=9714234;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=6530559;
a.obj1DarkGrey=255;a.obj1Black=0;return a}(),ra=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=16745604;a.bgDarkGrey=9714234;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=8126257;a.obj0DarkGrey=33792;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=16745604;a.obj1DarkGrey=9714234;a.obj1Black=0;return a}(),sa=function(){function a(){}a.bgWhite=11908607;a.bgLightGrey=16777108;a.bgDarkGrey=11360834;a.bgBlack=0;a.obj0White=0;a.obj0LightGrey=16777215;a.obj0DarkGrey=16745604;a.obj0Black=
9714234;a.obj1White=0;a.obj1LightGrey=16777215;a.obj1DarkGrey=16745604;a.obj1Black=9714234;return a}(),ta=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=11382148;a.bgDarkGrey=4354939;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16741120;a.obj0DarkGrey=9716224;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=5946879;a.obj1DarkGrey=16711680;a.obj1Black=255;return a}(),ua=function(){function a(){}a.bgWhite=16777116;a.bgLightGrey=9745919;a.bgDarkGrey=6526067;a.bgBlack=14906;a.obj0White=
16762178;a.obj0LightGrey=16766464;a.obj0DarkGrey=9714176;a.obj0Black=4849664;a.obj1White=16777215;a.obj1LightGrey=16745604;a.obj1DarkGrey=9714234;a.obj1Black=0;return a}(),va=function(){function a(){}a.bgWhite=7077632;a.bgLightGrey=16777215;a.bgDarkGrey=16732746;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16777215;a.obj0DarkGrey=6530559;a.obj0Black=255;a.obj1White=16777215;a.obj1LightGrey=16756067;a.obj1DarkGrey=8663296;a.obj1Black=0;return a}(),wa=function(){function a(){}a.bgWhite=10853631;
a.bgLightGrey=16776960;a.bgDarkGrey=25344;a.bgBlack=0;a.obj0White=16737106;a.obj0LightGrey=14024704;a.obj0DarkGrey=6488064;a.obj0Black=0;a.obj1White=255;a.obj1LightGrey=16777215;a.obj1DarkGrey=16777083;a.obj1Black=34047;return a}(),xa=function(){function a(){}a.bgWhite=16777166;a.bgLightGrey=6549487;a.bgDarkGrey=10257457;a.bgBlack=5921370;a.obj0White=16777215;a.obj0LightGrey=16741120;a.obj0DarkGrey=9716224;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=6530559;a.obj1DarkGrey=255;a.obj1Black=0;
return a}(),ya=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=16745604;a.bgDarkGrey=9714234;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=65280;a.obj0DarkGrey=3245056;a.obj0Black=18944;a.obj1White=16777215;a.obj1LightGrey=6530559;a.obj1DarkGrey=255;a.obj1Black=0;return a}(),za=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=6530559;a.bgDarkGrey=255;a.bgBlack=0;a.obj0White=16776960;a.obj0LightGrey=16711680;a.obj0DarkGrey=6488064;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=
8126257;a.obj1DarkGrey=33792;a.obj1Black=0;return a}(),Aa=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=11382148;a.bgDarkGrey=4354939;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16756067;a.obj0DarkGrey=16756067;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=6530559;a.obj1DarkGrey=255;a.obj1Black=0;return a}(),d=function(){function a(){}a.bgWhite=L.bgWhite;a.bgLightGrey=L.bgLightGrey;a.bgDarkGrey=L.bgDarkGrey;a.bgBlack=L.bgBlack;a.obj0White=L.obj0White;a.obj0LightGrey=L.obj0LightGrey;
a.obj0DarkGrey=L.obj0DarkGrey;a.obj0Black=L.obj0Black;a.obj1White=L.obj1White;a.obj1LightGrey=L.obj1LightGrey;a.obj1DarkGrey=L.obj1DarkGrey;a.obj1Black=L.obj1Black;return a}(),Sa=function(){function a(){}a.memoryLocationBackgroundPaletteIndex=65384;a.memoryLocationBackgroundPaletteData=65385;a.memoryLocationSpritePaletteIndex=65386;a.memoryLocationSpritePaletteData=65387;a.memoryLocationBackgroundPalette=65351;a.memoryLocationSpritePaletteOne=65352;a.memoryLocationSpritePaletteTwo=65353;return a}(),
Za=function(){function a(){}a.tileId=-1;a.horizontalFlip=!1;a.nextXIndexToPerformCacheCheck=-1;return a}(),y=function(){function a(){}a.updateNRx0=function(b){var c=a.NRx0Negate;a.NRx0SweepPeriod=(b&112)>>4;a.NRx0Negate=l(3,b);a.NRx0SweepShift=b&7;c&&!a.NRx0Negate&&a.sweepNegateShouldDisableChannelOnClear&&(a.isEnabled=!1)};a.updateNRx1=function(b){a.NRx1Duty=b>>6&3;a.NRx1LengthLoad=b&63;a.lengthCounter=a.MAX_LENGTH-a.NRx1LengthLoad};a.updateNRx2=function(b){a.isEnabled&&(0===a.NRx2EnvelopePeriod&&
a.isEnvelopeAutomaticUpdating&&(a.volume=a.volume+1&15),a.NRx2EnvelopeAddMode!==l(3,b)&&(a.volume=16-a.volume&15));a.NRx2StartingVolume=b>>4&15;a.NRx2EnvelopeAddMode=l(3,b);a.NRx2EnvelopePeriod=b&7;b=0<(b&248);a.isDacEnabled=b;b||(a.isEnabled=!1)};a.updateNRx3=function(b){a.NRx3FrequencyLSB=b;a.frequency=a.NRx4FrequencyMSB<<8|b};a.updateNRx4=function(b){var c=b&7;a.NRx4FrequencyMSB=c;a.frequency=c<<8|a.NRx3FrequencyLSB;c=1===(m.frameSequencer&1);var d=!a.NRx4LengthEnabled&&l(6,b);!c&&0<a.lengthCounter&&
d&&(--a.lengthCounter,l(7,b)||0!==a.lengthCounter||(a.isEnabled=!1));a.NRx4LengthEnabled=l(6,b);l(7,b)&&(a.trigger(),!c&&a.lengthCounter===a.MAX_LENGTH&&a.NRx4LengthEnabled&&--a.lengthCounter)};a.saveState=function(){e[1024+50*a.saveStateSlot]=a.cycleCounter;e[1028+50*a.saveStateSlot]=a.NRx0SweepPeriod;e[1029+50*a.saveStateSlot]=a.NRx0Negate;e[1030+50*a.saveStateSlot]=a.NRx0SweepShift;e[1031+50*a.saveStateSlot]=a.NRx1Duty;e[1033+50*a.saveStateSlot]=a.NRx1LengthLoad;e[1034+50*a.saveStateSlot]=a.NRx2StartingVolume;
e[1035+50*a.saveStateSlot]=a.NRx2EnvelopeAddMode;e[1036+50*a.saveStateSlot]=a.NRx2EnvelopePeriod;e[1037+50*a.saveStateSlot]=a.NRx3FrequencyLSB;e[1038+50*a.saveStateSlot]=a.NRx4LengthEnabled;e[1039+50*a.saveStateSlot]=a.NRx4FrequencyMSB;e[1040+50*a.saveStateSlot]=a.isEnabled;e[1041+50*a.saveStateSlot]=a.isDacEnabled;e[1042+50*a.saveStateSlot]=a.frequency;e[1046+50*a.saveStateSlot]=a.frequencyTimer;e[1050+50*a.saveStateSlot]=a.envelopeCounter;e[1054+50*a.saveStateSlot]=a.isEnvelopeAutomaticUpdating;
e[1055+50*a.saveStateSlot]=a.lengthCounter;e[1059+50*a.saveStateSlot]=a.volume;e[1063+50*a.saveStateSlot]=a.dutyCycle;e[1064+50*a.saveStateSlot]=a.waveFormPositionOnDuty;e[1065+50*a.saveStateSlot]=a.isSweepEnabled;e[1066+50*a.saveStateSlot]=a.sweepCounter;e[1070+50*a.saveStateSlot]=a.sweepShadowFrequency;e[1073+50*a.saveStateSlot]=a.sweepNegateShouldDisableChannelOnClear};a.loadState=function(){a.cycleCounter=e[1024+50*a.cycleCounter];a.NRx0SweepPeriod=e[1028+50*a.saveStateSlot];a.NRx0Negate=h(1029+
50*a.saveStateSlot);a.NRx0SweepShift=e[1030+50*a.saveStateSlot];a.NRx1Duty=e[1031+50*a.saveStateSlot];a.NRx1LengthLoad=e[1033+50*a.saveStateSlot];a.NRx2StartingVolume=e[1034+50*a.saveStateSlot];a.NRx2EnvelopeAddMode=h(1035+50*a.saveStateSlot);a.NRx2EnvelopePeriod=e[1036+50*a.saveStateSlot];a.NRx3FrequencyLSB=e[1037+50*a.saveStateSlot];a.NRx4LengthEnabled=h(1038+50*a.saveStateSlot);a.NRx4FrequencyMSB=e[1039+50*a.saveStateSlot];a.isEnabled=h(1040+50*a.saveStateSlot);a.isDacEnabled=h(1041+50*a.saveStateSlot);
a.frequency=e[1042+50*a.saveStateSlot];a.frequencyTimer=e[1046+50*a.saveStateSlot];a.envelopeCounter=e[1050+50*a.saveStateSlot];a.isEnvelopeAutomaticUpdating=h(1054+50*a.saveStateSlot);a.lengthCounter=e[1055+50*a.saveStateSlot];a.volume=e[1059+50*a.saveStateSlot];a.dutyCycle=e[1063+50*a.saveStateSlot];a.waveFormPositionOnDuty=e[1064+50*a.saveStateSlot];a.isSweepEnabled=h(1065+50*a.saveStateSlot);a.sweepCounter=e[1066+50*a.saveStateSlot];a.sweepShadowFrequency=e[1070+50*a.saveStateSlot];a.sweepNegateShouldDisableChannelOnClear=
h(1073+50*a.saveStateSlot)};a.initialize=function(){f(a.memoryLocationNRx0,128);f(a.memoryLocationNRx1,191);f(a.memoryLocationNRx2,243);f(a.memoryLocationNRx3,193);f(a.memoryLocationNRx4,191);b.BootROMEnabled&&(f(a.memoryLocationNRx1,63),f(a.memoryLocationNRx2,0),f(a.memoryLocationNRx3,0),f(a.memoryLocationNRx4,184))};a.getSampleFromCycleCounter=function(){var b=a.cycleCounter;a.cycleCounter=0;return a.getSample(b)};a.resetTimer=function(){var c=2048-a.frequency<<2;b.GBCDoubleSpeed&&(c<<=2);a.frequencyTimer=
c};a.getSample=function(b){var c=a.frequencyTimer;for(c-=b;0>=c;)b=Math.abs(c),a.resetTimer(),c=a.frequencyTimer,c-=b,a.waveFormPositionOnDuty=a.waveFormPositionOnDuty+1&7;a.frequencyTimer=c;if(a.isEnabled&&a.isDacEnabled)c=a.volume&15;else return 15;b=1;Ob(a.NRx1Duty,a.waveFormPositionOnDuty)||(b=-b);return b*c+15};a.trigger=function(){a.isEnabled=!0;0===a.lengthCounter&&(a.lengthCounter=a.MAX_LENGTH);a.resetTimer();a.envelopeCounter=0===a.NRx2EnvelopePeriod?8:a.NRx2EnvelopePeriod;a.isEnvelopeAutomaticUpdating=
!0;a.volume=a.NRx2StartingVolume;a.sweepShadowFrequency=a.frequency;a.sweepCounter=0===a.NRx0SweepPeriod?8:a.NRx0SweepPeriod;a.isSweepEnabled=0<a.NRx0SweepPeriod||0<a.NRx0SweepShift;a.sweepNegateShouldDisableChannelOnClear=!1;var b;if(b=0<a.NRx0SweepShift)b=2047<tb()?!0:!1;b&&(a.isEnabled=!1);a.isDacEnabled||(a.isEnabled=!1)};a.willChannelUpdate=function(b){b=a.cycleCounter+b;a.cycleCounter=b;return!(0<a.frequencyTimer-b)};a.updateSweep=function(){if(a.isEnabled&&a.isSweepEnabled){var b=a.sweepCounter-
1;0>=b?0===a.NRx0SweepPeriod?a.sweepCounter=8:(a.sweepCounter=a.NRx0SweepPeriod,b=tb(),2047<b&&(a.isEnabled=!1),0<a.NRx0SweepShift&&(a.setFrequency(b),2047<tb()&&(a.isEnabled=!1))):a.sweepCounter=b}};a.updateLength=function(){var b=a.lengthCounter;0<b&&a.NRx4LengthEnabled&&(--b,0===b&&(a.isEnabled=!1));a.lengthCounter=b};a.updateEnvelope=function(){var b=a.envelopeCounter-1;if(0>=b)if(0===a.NRx2EnvelopePeriod)b=8;else if(b=a.NRx2EnvelopePeriod,0!==b&&a.isEnvelopeAutomaticUpdating){var d=a.volume;
d=a.NRx2EnvelopeAddMode?d+1:d-1;d&=15;15>d?a.volume=d:a.isEnvelopeAutomaticUpdating=!1}a.envelopeCounter=b};a.setFrequency=function(b){a.sweepShadowFrequency=b;var c=b>>8&7;b&=255;var d=u(a.memoryLocationNRx4)&248|c;f(a.memoryLocationNRx3,b);f(a.memoryLocationNRx4,d);a.NRx3FrequencyLSB=b;a.NRx4FrequencyMSB=c;a.frequency=a.NRx4FrequencyMSB<<8|a.NRx3FrequencyLSB};a.cycleCounter=0;a.MAX_LENGTH=64;a.memoryLocationNRx0=65296;a.NRx0SweepPeriod=0;a.NRx0Negate=!1;a.NRx0SweepShift=0;a.memoryLocationNRx1=65297;
a.NRx1Duty=0;a.NRx1LengthLoad=0;a.memoryLocationNRx2=65298;a.NRx2StartingVolume=0;a.NRx2EnvelopeAddMode=!1;a.NRx2EnvelopePeriod=0;a.memoryLocationNRx3=65299;a.NRx3FrequencyLSB=0;a.memoryLocationNRx4=65300;a.NRx4LengthEnabled=!1;a.NRx4FrequencyMSB=0;a.channelNumber=1;a.isEnabled=!1;a.isDacEnabled=!1;a.frequency=0;a.frequencyTimer=0;a.envelopeCounter=0;a.isEnvelopeAutomaticUpdating=!1;a.lengthCounter=0;a.volume=0;a.dutyCycle=0;a.waveFormPositionOnDuty=0;a.isSweepEnabled=!1;a.sweepCounter=0;a.sweepShadowFrequency=
0;a.sweepNegateShouldDisableChannelOnClear=!1;a.saveStateSlot=7;return a}(),A=function(){function a(){}a.updateNRx1=function(b){a.NRx1Duty=b>>6&3;a.NRx1LengthLoad=b&63;a.lengthCounter=a.MAX_LENGTH-a.NRx1LengthLoad};a.updateNRx2=function(b){a.isEnabled&&(0===a.NRx2EnvelopePeriod&&a.isEnvelopeAutomaticUpdating&&(a.volume=a.volume+1&15),a.NRx2EnvelopeAddMode!==l(3,b)&&(a.volume=16-a.volume&15));a.NRx2StartingVolume=b>>4&15;a.NRx2EnvelopeAddMode=l(3,b);a.NRx2EnvelopePeriod=b&7;b=0<(b&248);a.isDacEnabled=
b;b||(a.isEnabled=b)};a.updateNRx3=function(b){a.NRx3FrequencyLSB=b;a.frequency=a.NRx4FrequencyMSB<<8|b};a.updateNRx4=function(b){var c=b&7;a.NRx4FrequencyMSB=c;a.frequency=c<<8|a.NRx3FrequencyLSB;c=1===(m.frameSequencer&1);var d=!a.NRx4LengthEnabled&&l(6,b);!c&&0<a.lengthCounter&&d&&(--a.lengthCounter,l(7,b)||0!==a.lengthCounter||(a.isEnabled=!1));a.NRx4LengthEnabled=l(6,b);l(7,b)&&(a.trigger(),!c&&a.lengthCounter===a.MAX_LENGTH&&a.NRx4LengthEnabled&&--a.lengthCounter)};a.saveState=function(){e[1024+
50*a.saveStateSlot]=a.cycleCounter;e[1031+50*a.saveStateSlot]=a.NRx1Duty;e[1032+50*a.saveStateSlot]=a.NRx1LengthLoad;e[1034+50*a.saveStateSlot]=a.NRx2StartingVolume;e[1035+50*a.saveStateSlot]=a.NRx2EnvelopeAddMode;e[1036+50*a.saveStateSlot]=a.NRx2EnvelopePeriod;e[1037+50*a.saveStateSlot]=a.NRx3FrequencyLSB;e[1038+50*a.saveStateSlot]=a.NRx4LengthEnabled;e[1039+50*a.saveStateSlot]=a.NRx4FrequencyMSB;e[1040+50*a.saveStateSlot]=a.isEnabled;e[1041+50*a.saveStateSlot]=a.isDacEnabled;e[1042+50*a.saveStateSlot]=
a.frequency;e[1046+50*a.saveStateSlot]=a.frequencyTimer;e[1050+50*a.saveStateSlot]=a.envelopeCounter;e[1054+50*a.saveStateSlot]=a.isEnvelopeAutomaticUpdating;e[1055+50*a.saveStateSlot]=a.lengthCounter;e[1059+50*a.saveStateSlot]=a.volume;e[1063+50*a.saveStateSlot]=a.dutyCycle;e[1064+50*a.saveStateSlot]=a.waveFormPositionOnDuty};a.loadState=function(){a.cycleCounter=e[1024+50*a.cycleCounter];a.NRx1Duty=e[1031+50*a.saveStateSlot];a.NRx1LengthLoad=e[1032+50*a.saveStateSlot];a.NRx2StartingVolume=e[1034+
50*a.saveStateSlot];a.NRx2EnvelopeAddMode=h(1035+50*a.saveStateSlot);a.NRx2EnvelopePeriod=e[1036+50*a.saveStateSlot];a.NRx3FrequencyLSB=e[1037+50*a.saveStateSlot];a.NRx4LengthEnabled=h(1038+50*a.saveStateSlot);a.NRx4FrequencyMSB=e[1039+50*a.saveStateSlot];a.isEnabled=h(1040+50*a.saveStateSlot);a.isDacEnabled=h(1041+50*a.saveStateSlot);a.frequency=e[1042+50*a.saveStateSlot];a.frequencyTimer=e[1046+50*a.saveStateSlot];a.envelopeCounter=e[1050+50*a.saveStateSlot];a.isEnvelopeAutomaticUpdating=h(1054+
50*a.saveStateSlot);a.lengthCounter=e[1055+50*a.saveStateSlot];a.volume=e[1059+50*a.saveStateSlot];a.dutyCycle=e[1063+50*a.saveStateSlot];a.waveFormPositionOnDuty=e[1064+50*a.saveStateSlot]};a.initialize=function(){f(a.memoryLocationNRx1-1,255);f(a.memoryLocationNRx1,63);f(a.memoryLocationNRx2,0);f(a.memoryLocationNRx3,0);f(a.memoryLocationNRx4,184)};a.getSampleFromCycleCounter=function(){var b=a.cycleCounter;a.cycleCounter=0;return a.getSample(b)};a.resetTimer=function(){a.frequencyTimer=2048-a.frequency<<
2<<b.GBCDoubleSpeed};a.getSample=function(b){var c=a.frequencyTimer;for(c-=b;0>=c;)b=Math.abs(c),a.resetTimer(),c=a.frequencyTimer,c-=b,a.waveFormPositionOnDuty=a.waveFormPositionOnDuty+1&7;a.frequencyTimer=c;if(a.isEnabled&&a.isDacEnabled)c=a.volume&15;else return 15;b=1;Ob(a.NRx1Duty,a.waveFormPositionOnDuty)||(b=-b);return b*c+15};a.trigger=function(){a.isEnabled=!0;0===a.lengthCounter&&(a.lengthCounter=a.MAX_LENGTH);a.resetTimer();a.envelopeCounter=0===a.NRx2EnvelopePeriod?8:a.NRx2EnvelopePeriod;
a.isEnvelopeAutomaticUpdating=!0;a.volume=a.NRx2StartingVolume;a.isDacEnabled||(a.isEnabled=!1)};a.willChannelUpdate=function(b){b=a.cycleCounter+b;a.cycleCounter=b;return!(0<a.frequencyTimer-b)};a.updateLength=function(){var b=a.lengthCounter;0<b&&a.NRx4LengthEnabled&&--b;0===b&&(a.isEnabled=!1);a.lengthCounter=b};a.updateEnvelope=function(){var b=a.envelopeCounter-1;if(0>=b)if(0===a.NRx2EnvelopePeriod)b=8;else if(b=a.NRx2EnvelopePeriod,0!==b&&a.isEnvelopeAutomaticUpdating){var d=a.volume;d=a.NRx2EnvelopeAddMode?
d+1:d-1;d&=15;15>d?a.volume=d:a.isEnvelopeAutomaticUpdating=!1}a.envelopeCounter=b};a.setFrequency=function(b){var c=b>>8;b&=255;var d=u(a.memoryLocationNRx4)&248|c;f(a.memoryLocationNRx3,b);f(a.memoryLocationNRx4,d);a.NRx3FrequencyLSB=b;a.NRx4FrequencyMSB=c;a.frequency=c<<8|b};a.cycleCounter=0;a.MAX_LENGTH=64;a.memoryLocationNRx0=65301;a.memoryLocationNRx1=65302;a.NRx1Duty=0;a.NRx1LengthLoad=0;a.memoryLocationNRx2=65303;a.NRx2StartingVolume=0;a.NRx2EnvelopeAddMode=!1;a.NRx2EnvelopePeriod=0;a.memoryLocationNRx3=
65304;a.NRx3FrequencyLSB=0;a.memoryLocationNRx4=65305;a.NRx4LengthEnabled=!1;a.NRx4FrequencyMSB=0;a.channelNumber=2;a.isEnabled=!1;a.isDacEnabled=!1;a.frequency=0;a.frequencyTimer=0;a.envelopeCounter=0;a.isEnvelopeAutomaticUpdating=!1;a.lengthCounter=0;a.volume=0;a.dutyCycle=0;a.waveFormPositionOnDuty=0;a.saveStateSlot=8;return a}(),v=function(){function a(){}a.updateNRx0=function(b){b=l(7,b);!a.isDacEnabled&&b&&(a.sampleBuffer=0);a.isDacEnabled=b;b||(a.isEnabled=b)};a.updateNRx1=function(b){a.NRx1LengthLoad=
b;a.lengthCounter=a.MAX_LENGTH-a.NRx1LengthLoad};a.updateNRx2=function(b){a.NRx2VolumeCode=b>>5&15};a.updateNRx3=function(b){a.NRx3FrequencyLSB=b;a.frequency=a.NRx4FrequencyMSB<<8|b};a.updateNRx4=function(b){var c=b&7;a.NRx4FrequencyMSB=c;a.frequency=c<<8|a.NRx3FrequencyLSB;c=1===(m.frameSequencer&1);if(!c){var d=!a.NRx4LengthEnabled&&l(6,b);0<a.lengthCounter&&d&&(--a.lengthCounter,l(7,b)||0!==a.lengthCounter||(a.isEnabled=!1))}a.NRx4LengthEnabled=l(6,b);l(7,b)&&(a.trigger(),!c&&a.lengthCounter===
a.MAX_LENGTH&&a.NRx4LengthEnabled&&--a.lengthCounter)};a.saveState=function(){e[1024+50*a.saveStateSlot]=a.cycleCounter;e[1032+50*a.saveStateSlot]=a.NRx1LengthLoad;e[1034+50*a.saveStateSlot]=a.NRx2VolumeCode;e[1036+50*a.saveStateSlot]=a.NRx3FrequencyLSB;e[1037+50*a.saveStateSlot]=a.NRx4LengthEnabled;e[1038+50*a.saveStateSlot]=a.NRx4FrequencyMSB;e[1039+50*a.saveStateSlot]=a.isEnabled;e[1040+50*a.saveStateSlot]=a.isDacEnabled;e[1041+50*a.saveStateSlot]=a.frequency;e[1045+50*a.saveStateSlot]=a.frequencyTimer;
e[1049+50*a.saveStateSlot]=a.lengthCounter;e[1057+50*a.saveStateSlot]=a.waveTablePosition;e[1061+50*a.saveStateSlot]=a.volumeCode;e[1062+50*a.saveStateSlot]=a.volumeCodeChanged;e[1063+50*a.saveStateSlot]=a.sampleBuffer};a.loadState=function(){a.cycleCounter=e[1024+50*a.cycleCounter];a.NRx1LengthLoad=e[1032+50*a.saveStateSlot];a.NRx2VolumeCode=e[1034+50*a.saveStateSlot];a.NRx3FrequencyLSB=e[1036+50*a.saveStateSlot];a.NRx4LengthEnabled=h(1037+50*a.saveStateSlot);a.NRx4FrequencyMSB=e[1038+50*a.saveStateSlot];
a.isEnabled=h(1039+50*a.saveStateSlot);a.isDacEnabled=h(1040+50*a.saveStateSlot);a.frequency=e[1041+50*a.saveStateSlot];a.frequencyTimer=e[1045+50*a.saveStateSlot];a.lengthCounter=e[1049+50*a.saveStateSlot];a.waveTablePosition=e[1057+50*a.saveStateSlot];a.volumeCode=e[1061+50*a.saveStateSlot];a.volumeCodeChanged=h(1062+50*a.saveStateSlot);a.sampleBuffer=e[1063+50*a.saveStateSlot]};a.handleWaveRamRead=function(){return u(v.memoryLocationWaveTable+(v.waveTablePosition>>1|0))};a.handleWaveRamWrite=function(b){f(a.memoryLocationWaveTable+
(a.waveTablePosition>>1|0),b)};a.initialize=function(){f(a.memoryLocationNRx0,127);f(a.memoryLocationNRx1,255);f(a.memoryLocationNRx2,159);f(a.memoryLocationNRx3,0);f(a.memoryLocationNRx4,184);a.volumeCodeChanged=!0};a.getSampleFromCycleCounter=function(){var b=a.cycleCounter;a.cycleCounter=0;return a.getSample(b)};a.resetTimer=function(){a.frequencyTimer=2048-a.frequency<<1<<b.GBCDoubleSpeed};a.getSample=function(b){if(!a.isEnabled||!a.isDacEnabled)return 15;var c=a.volumeCode;a.volumeCodeChanged&&
(c=u(a.memoryLocationNRx2),c=c>>5&15,a.volumeCode=c,a.volumeCodeChanged=!1);var d=v.sampleBuffer;d>>=(0===(v.waveTablePosition&1))<<2;d&=15;var e=0;switch(c){case 0:d>>=4;break;case 1:e=1;break;case 2:d>>=1;e=2;break;default:d>>=2,e=4}d=(0<e?d/e:0)+15;c=a.frequencyTimer;for(c-=b;0>=c;){b=Math.abs(c);a.resetTimer();c=a.frequencyTimer;c-=b;b=v.waveTablePosition;for(b+=1;32<=b;)b-=32;v.waveTablePosition=b;v.sampleBuffer=u(v.memoryLocationWaveTable+(v.waveTablePosition>>1|0))}a.frequencyTimer=c;return d};
a.trigger=function(){a.isEnabled=!0;0===a.lengthCounter&&(a.lengthCounter=a.MAX_LENGTH);a.resetTimer();a.frequencyTimer+=6;a.waveTablePosition=0;a.isDacEnabled||(a.isEnabled=!1)};a.willChannelUpdate=function(b){a.cycleCounter+=b;return!(!a.volumeCodeChanged&&0<a.frequencyTimer-a.cycleCounter)};a.updateLength=function(){var b=a.lengthCounter;0<b&&a.NRx4LengthEnabled&&--b;0===b&&(a.isEnabled=!1);a.lengthCounter=b};a.cycleCounter=0;a.MAX_LENGTH=256;a.memoryLocationNRx0=65306;a.memoryLocationNRx1=65307;
a.NRx1LengthLoad=0;a.memoryLocationNRx2=65308;a.NRx2VolumeCode=0;a.memoryLocationNRx3=65309;a.NRx3FrequencyLSB=0;a.memoryLocationNRx4=65310;a.NRx4LengthEnabled=!1;a.NRx4FrequencyMSB=0;a.memoryLocationWaveTable=65328;a.channelNumber=3;a.isEnabled=!1;a.isDacEnabled=!1;a.frequency=0;a.frequencyTimer=0;a.lengthCounter=0;a.waveTablePosition=0;a.volumeCode=0;a.volumeCodeChanged=!1;a.sampleBuffer=0;a.saveStateSlot=9;return a}(),D=function(){function a(){}a.updateNRx1=function(b){a.NRx1LengthLoad=b&63;a.lengthCounter=
a.MAX_LENGTH-a.NRx1LengthLoad};a.updateNRx2=function(b){a.isEnabled&&(0===a.NRx2EnvelopePeriod&&a.isEnvelopeAutomaticUpdating&&(a.volume=a.volume+1&15),a.NRx2EnvelopeAddMode!==l(3,b)&&(a.volume=16-a.volume&15));a.NRx2StartingVolume=b>>4&15;a.NRx2EnvelopeAddMode=l(3,b);a.NRx2EnvelopePeriod=b&7;b=0<(b&248);a.isDacEnabled=b;b||(a.isEnabled=b)};a.updateNRx3=function(b){var c=b&7;a.NRx3ClockShift=b>>4;a.NRx3WidthMode=l(3,b);a.NRx3DivisorCode=c;c<<=1;1>c&&(c=1);a.divisor=c<<3};a.updateNRx4=function(b){var c=
1===(m.frameSequencer&1),d=!a.NRx4LengthEnabled&&l(6,b);!c&&0<a.lengthCounter&&d&&(--a.lengthCounter,l(7,b)||0!==a.lengthCounter||(a.isEnabled=!1));a.NRx4LengthEnabled=l(6,b);l(7,b)&&(a.trigger(),!c&&a.lengthCounter===a.MAX_LENGTH&&a.NRx4LengthEnabled&&--a.lengthCounter)};a.saveState=function(){e[1024+50*a.saveStateSlot]=a.cycleCounter;e[1028+50*a.saveStateSlot]=a.NRx1LengthLoad;e[1030+50*a.saveStateSlot]=a.NRx2StartingVolume;e[1031+50*a.saveStateSlot]=a.NRx2EnvelopeAddMode;e[1032+50*a.saveStateSlot]=
a.NRx2EnvelopePeriod;e[1033+50*a.saveStateSlot]=a.NRx3ClockShift;e[1034+50*a.saveStateSlot]=a.NRx3WidthMode;e[1035+50*a.saveStateSlot]=a.NRx3DivisorCode;e[1037+50*a.saveStateSlot]=a.NRx4LengthEnabled;e[1039+50*a.saveStateSlot]=a.isEnabled;e[1040+50*a.saveStateSlot]=a.isDacEnabled;e[1045+50*a.saveStateSlot]=a.frequencyTimer;e[1049+50*a.saveStateSlot]=a.envelopeCounter;e[1053+50*a.saveStateSlot]=a.isEnvelopeAutomaticUpdating;e[1054+50*a.saveStateSlot]=a.lengthCounter;e[1058+50*a.saveStateSlot]=a.volume;
e[1062+50*a.saveStateSlot]=a.linearFeedbackShiftRegister};a.loadState=function(){a.cycleCounter=e[1024+50*a.cycleCounter];a.NRx1LengthLoad=e[1028+50*a.saveStateSlot];a.NRx2StartingVolume=e[1030+50*a.saveStateSlot];a.NRx2EnvelopeAddMode=h(1031+50*a.saveStateSlot);a.NRx2EnvelopePeriod=e[1032+50*a.saveStateSlot];a.NRx3ClockShift=e[1033+50*a.saveStateSlot];a.NRx3WidthMode=h(1034+50*a.saveStateSlot);a.NRx3DivisorCode=e[1035+50*a.saveStateSlot];a.NRx4LengthEnabled=h(1037+50*a.saveStateSlot);a.isEnabled=
h(1039+50*a.saveStateSlot);a.isDacEnabled=h(1040+50*a.saveStateSlot);a.frequencyTimer=e[1045+50*a.saveStateSlot];a.envelopeCounter=e[1049+50*a.saveStateSlot];a.isEnvelopeAutomaticUpdating=h(1053+50*a.saveStateSlot);a.lengthCounter=e[1054+50*a.saveStateSlot];a.volume=e[1058+50*a.saveStateSlot];a.linearFeedbackShiftRegister=e[1062+50*a.saveStateSlot]};a.initialize=function(){f(a.memoryLocationNRx1-1,255);f(a.memoryLocationNRx1,255);f(a.memoryLocationNRx2,0);f(a.memoryLocationNRx3,0);f(a.memoryLocationNRx4,
191)};a.getSampleFromCycleCounter=function(){var b=a.cycleCounter;a.cycleCounter=0;return a.getSample(b)};a.getSample=function(b){var c=a.frequencyTimer;c-=b;if(0>=c){b=Math.abs(c);c=a.getNoiseChannelFrequencyPeriod();c-=b;b=a.linearFeedbackShiftRegister;var d=b&1^b>>1&1;b=b>>1|d<<14;a.NRx3WidthMode&&(b=b&-65|d<<6);a.linearFeedbackShiftRegister=b}0>c&&(c=0);a.frequencyTimer=c;if(a.isEnabled&&a.isDacEnabled)c=a.volume&15;else return 15;b=l(0,a.linearFeedbackShiftRegister)?-1:1;return b*c+15};a.trigger=
function(){a.isEnabled=!0;0===a.lengthCounter&&(a.lengthCounter=a.MAX_LENGTH);a.frequencyTimer=a.getNoiseChannelFrequencyPeriod();a.envelopeCounter=0===a.NRx2EnvelopePeriod?8:a.NRx2EnvelopePeriod;a.isEnvelopeAutomaticUpdating=!0;a.volume=a.NRx2StartingVolume;a.linearFeedbackShiftRegister=32767;a.isDacEnabled||(a.isEnabled=!1)};a.willChannelUpdate=function(b){a.cycleCounter+=b;return!(0<a.frequencyTimer-a.cycleCounter)};a.getNoiseChannelFrequencyPeriod=function(){return a.divisor<<a.NRx3ClockShift<<
b.GBCDoubleSpeed};a.updateLength=function(){var b=a.lengthCounter;0<b&&a.NRx4LengthEnabled&&--b;0===b&&(a.isEnabled=!1);a.lengthCounter=b};a.updateEnvelope=function(){var b=a.envelopeCounter-1;if(0>=b)if(0===a.NRx2EnvelopePeriod)b=8;else if(b=a.NRx2EnvelopePeriod,0!==b&&a.isEnvelopeAutomaticUpdating){var d=a.volume;d=a.NRx2EnvelopeAddMode?d+1:d-1;d&=15;15>d?a.volume=d:a.isEnvelopeAutomaticUpdating=!1}a.envelopeCounter=b};a.cycleCounter=0;a.MAX_LENGTH=64;a.memoryLocationNRx0=65311;a.memoryLocationNRx1=
65312;a.NRx1LengthLoad=0;a.memoryLocationNRx2=65313;a.NRx2StartingVolume=0;a.NRx2EnvelopeAddMode=!1;a.NRx2EnvelopePeriod=0;a.memoryLocationNRx3=65314;a.NRx3ClockShift=0;a.NRx3WidthMode=!1;a.NRx3DivisorCode=0;a.memoryLocationNRx4=65315;a.NRx4LengthEnabled=!1;a.channelNumber=4;a.isEnabled=!1;a.isDacEnabled=!1;a.frequencyTimer=0;a.envelopeCounter=0;a.isEnvelopeAutomaticUpdating=!1;a.lengthCounter=0;a.volume=0;a.divisor=0;a.linearFeedbackShiftRegister=0;a.saveStateSlot=10;return a}(),g=function(){function a(){}
a.channel1Sample=15;a.channel2Sample=15;a.channel3Sample=15;a.channel4Sample=15;a.channel1DacEnabled=!1;a.channel2DacEnabled=!1;a.channel3DacEnabled=!1;a.channel4DacEnabled=!1;a.leftChannelSampleUnsignedByte=127;a.rightChannelSampleUnsignedByte=127;a.mixerVolumeChanged=!1;a.mixerEnabledChanged=!1;a.needToRemixSamples=!1;return a}(),m=function(){function a(){}a.batchProcessCycles=function(){return 87<<b.GBCDoubleSpeed};a.updateNR50=function(b){a.NR50LeftMixerVolume=b>>4&7;a.NR50RightMixerVolume=b&
7};a.updateNR51=function(b){a.NR51IsChannel4EnabledOnLeftOutput=l(7,b);a.NR51IsChannel3EnabledOnLeftOutput=l(6,b);a.NR51IsChannel2EnabledOnLeftOutput=l(5,b);a.NR51IsChannel1EnabledOnLeftOutput=l(4,b);a.NR51IsChannel4EnabledOnRightOutput=l(3,b);a.NR51IsChannel3EnabledOnRightOutput=l(2,b);a.NR51IsChannel2EnabledOnRightOutput=l(1,b);a.NR51IsChannel1EnabledOnRightOutput=l(0,b)};a.updateNR52=function(b){a.NR52IsSoundEnabled=l(7,b)};a.maxFrameSequenceCycles=function(){return 8192<<b.GBCDoubleSpeed};a.maxDownSampleCycles=
function(){return b.CLOCK_SPEED()/a.sampleRate};a.saveState=function(){e[1024+50*a.saveStateSlot]=a.NR50LeftMixerVolume;e[1028+50*a.saveStateSlot]=a.NR50RightMixerVolume;e[1032+50*a.saveStateSlot]=a.NR51IsChannel1EnabledOnLeftOutput;e[1033+50*a.saveStateSlot]=a.NR51IsChannel2EnabledOnLeftOutput;e[1034+50*a.saveStateSlot]=a.NR51IsChannel3EnabledOnLeftOutput;e[1035+50*a.saveStateSlot]=a.NR51IsChannel4EnabledOnLeftOutput;e[1036+50*a.saveStateSlot]=a.NR51IsChannel1EnabledOnRightOutput;e[1037+50*a.saveStateSlot]=
a.NR51IsChannel2EnabledOnRightOutput;e[1038+50*a.saveStateSlot]=a.NR51IsChannel3EnabledOnRightOutput;e[1039+50*a.saveStateSlot]=a.NR51IsChannel4EnabledOnRightOutput;e[1040+50*a.saveStateSlot]=a.NR52IsSoundEnabled;e[1041+50*a.saveStateSlot]=a.frameSequenceCycleCounter;e[1046+50*a.saveStateSlot]=a.frameSequencer;e[1047+50*a.saveStateSlot]=a.downSampleCycleCounter;e[1048+50*a.saveStateSlot]=g.channel1Sample;e[1049+50*a.saveStateSlot]=g.channel2Sample;e[1050+50*a.saveStateSlot]=g.channel3Sample;e[1051+
50*a.saveStateSlot]=g.channel4Sample;e[1052+50*a.saveStateSlot]=g.channel1DacEnabled;e[1053+50*a.saveStateSlot]=g.channel2DacEnabled;e[1054+50*a.saveStateSlot]=g.channel3DacEnabled;e[1055+50*a.saveStateSlot]=g.channel4DacEnabled;e[1056+50*a.saveStateSlot]=g.leftChannelSampleUnsignedByte;e[1057+50*a.saveStateSlot]=g.rightChannelSampleUnsignedByte;e[1058+50*a.saveStateSlot]=g.mixerVolumeChanged;e[1059+50*a.saveStateSlot]=g.mixerEnabledChanged};a.loadState=function(){a.NR50LeftMixerVolume=e[1024+50*
a.saveStateSlot];a.NR50RightMixerVolume=e[1028+50*a.saveStateSlot];a.NR51IsChannel1EnabledOnLeftOutput=h(1032+50*a.saveStateSlot);a.NR51IsChannel2EnabledOnLeftOutput=h(1033+50*a.saveStateSlot);a.NR51IsChannel3EnabledOnLeftOutput=h(1034+50*a.saveStateSlot);a.NR51IsChannel4EnabledOnLeftOutput=h(1035+50*a.saveStateSlot);a.NR51IsChannel1EnabledOnRightOutput=h(1036+50*a.saveStateSlot);a.NR51IsChannel2EnabledOnRightOutput=h(1037+50*a.saveStateSlot);a.NR51IsChannel3EnabledOnRightOutput=h(1038+50*a.saveStateSlot);
a.NR51IsChannel4EnabledOnRightOutput=h(1039+50*a.saveStateSlot);a.NR52IsSoundEnabled=h(1040+50*a.saveStateSlot);a.frameSequenceCycleCounter=e[1041+50*a.saveStateSlot];a.frameSequencer=e[1046+50*a.saveStateSlot];a.downSampleCycleCounter=e[1047+50*a.saveStateSlot];g.channel1Sample=e[1048+50*a.saveStateSlot];g.channel2Sample=e[1049+50*a.saveStateSlot];g.channel3Sample=e[1050+50*a.saveStateSlot];g.channel4Sample=e[1051+50*a.saveStateSlot];g.channel1DacEnabled=h(1052+50*a.saveStateSlot);g.channel2DacEnabled=
h(1053+50*a.saveStateSlot);g.channel3DacEnabled=h(1054+50*a.saveStateSlot);g.channel4DacEnabled=h(1055+50*a.saveStateSlot);g.leftChannelSampleUnsignedByte=e[1056+50*a.saveStateSlot];g.rightChannelSampleUnsignedByte=e[1057+50*a.saveStateSlot];g.mixerVolumeChanged=h(1058+50*a.saveStateSlot);g.mixerEnabledChanged=h(1059+50*a.saveStateSlot);Rb()};a.currentCycles=0;a.memoryLocationNR50=65316;a.NR50LeftMixerVolume=0;a.NR50RightMixerVolume=0;a.memoryLocationNR51=65317;a.NR51IsChannel1EnabledOnLeftOutput=
!0;a.NR51IsChannel2EnabledOnLeftOutput=!0;a.NR51IsChannel3EnabledOnLeftOutput=!0;a.NR51IsChannel4EnabledOnLeftOutput=!0;a.NR51IsChannel1EnabledOnRightOutput=!0;a.NR51IsChannel2EnabledOnRightOutput=!0;a.NR51IsChannel3EnabledOnRightOutput=!0;a.NR51IsChannel4EnabledOnRightOutput=!0;a.memoryLocationNR52=65318;a.NR52IsSoundEnabled=!0;a.memoryLocationChannel3LoadRegisterStart=65328;a.frameSequenceCycleCounter=0;a.frameSequencer=0;a.downSampleCycleCounter=0;a.sampleRate=44100;a.audioQueueIndex=0;a.wasmBoyMemoryMaxBufferSize=
131072;a.saveStateSlot=6;return a}(),n=function(){function a(){}a.updateInterruptEnabled=function(b){a.isVBlankInterruptEnabled=l(a.bitPositionVBlankInterrupt,b);a.isLcdInterruptEnabled=l(a.bitPositionLcdInterrupt,b);a.isTimerInterruptEnabled=l(a.bitPositionTimerInterrupt,b);a.isSerialInterruptEnabled=l(a.bitPositionSerialInterrupt,b);a.isJoypadInterruptEnabled=l(a.bitPositionJoypadInterrupt,b);a.interruptsEnabledValue=b};a.updateInterruptRequested=function(b){a.isVBlankInterruptRequested=l(a.bitPositionVBlankInterrupt,
b);a.isLcdInterruptRequested=l(a.bitPositionLcdInterrupt,b);a.isTimerInterruptRequested=l(a.bitPositionTimerInterrupt,b);a.isSerialInterruptRequested=l(a.bitPositionSerialInterrupt,b);a.isJoypadInterruptRequested=l(a.bitPositionJoypadInterrupt,b);a.interruptsRequestedValue=b};a.areInterruptsPending=function(){return 0<(a.interruptsRequestedValue&a.interruptsEnabledValue&31)};a.saveState=function(){e[1024+50*a.saveStateSlot]=a.masterInterruptSwitch;e[1025+50*a.saveStateSlot]=a.masterInterruptSwitchDelay;
e[1040+50*a.saveStateSlot]=a.interruptsEnabledValue;e[1041+50*a.saveStateSlot]=a.isVBlankInterruptEnabled;e[1042+50*a.saveStateSlot]=a.isLcdInterruptEnabled;e[1043+50*a.saveStateSlot]=a.isTimerInterruptEnabled;e[1044+50*a.saveStateSlot]=a.isSerialInterruptEnabled;e[1045+50*a.saveStateSlot]=a.isJoypadInterruptEnabled;e[1056+50*a.saveStateSlot]=a.interruptsRequestedValue;e[1057+50*a.saveStateSlot]=a.isVBlankInterruptRequested;e[1058+50*a.saveStateSlot]=a.isLcdInterruptRequested;e[1059+50*a.saveStateSlot]=
a.isTimerInterruptRequested;e[1060+50*a.saveStateSlot]=a.isSerialInterruptRequested;e[1061+50*a.saveStateSlot]=a.isJoypadInterruptRequested};a.loadState=function(){a.masterInterruptSwitch=h(1024+50*a.saveStateSlot);a.masterInterruptSwitchDelay=h(1025+50*a.saveStateSlot);a.interruptsEnabledValue=e[1040+50*a.saveStateSlot];a.isVBlankInterruptEnabled=h(1041+50*a.saveStateSlot);a.isLcdInterruptEnabled=h(1042+50*a.saveStateSlot);a.isTimerInterruptEnabled=h(1043+50*a.saveStateSlot);a.isSerialInterruptEnabled=
h(1044+50*a.saveStateSlot);a.isJoypadInterruptEnabled=h(1045+50*a.saveStateSlot);a.interruptsRequestedValue=e[1056+50*a.saveStateSlot];a.isVBlankInterruptRequested=h(1057+50*a.saveStateSlot);a.isLcdInterruptRequested=h(1058+50*a.saveStateSlot);a.isTimerInterruptRequested=h(1059+50*a.saveStateSlot);a.isSerialInterruptRequested=h(1060+50*a.saveStateSlot);a.isJoypadInterruptRequested=h(1061+50*a.saveStateSlot)};a.masterInterruptSwitch=!1;a.masterInterruptSwitchDelay=!1;a.bitPositionVBlankInterrupt=0;
a.bitPositionLcdInterrupt=1;a.bitPositionTimerInterrupt=2;a.bitPositionSerialInterrupt=3;a.bitPositionJoypadInterrupt=4;a.memoryLocationInterruptEnabled=65535;a.interruptsEnabledValue=0;a.isVBlankInterruptEnabled=!1;a.isLcdInterruptEnabled=!1;a.isTimerInterruptEnabled=!1;a.isSerialInterruptEnabled=!1;a.isJoypadInterruptEnabled=!1;a.memoryLocationInterruptRequest=65295;a.interruptsRequestedValue=0;a.isVBlankInterruptRequested=!1;a.isLcdInterruptRequested=!1;a.isTimerInterruptRequested=!1;a.isSerialInterruptRequested=
!1;a.isJoypadInterruptRequested=!1;a.saveStateSlot=2;return a}(),t=function(){function a(){}a.batchProcessCycles=function(){return 256};a.updateDividerRegister=function(){var b=a.dividerRegister;a.dividerRegister=0;f(a.memoryLocationDividerRegister,0);a.timerEnabled&&Tb(b,0)&&zb()};a.updateTimerCounter=function(b){if(a.timerEnabled){if(a.timerCounterWasReset)return;a.timerCounterOverflowDelay&&(a.timerCounterOverflowDelay=!1)}a.timerCounter=b};a.updateTimerModulo=function(b){a.timerModulo=b;a.timerEnabled&&
a.timerCounterWasReset&&(a.timerCounter=b,a.timerCounterWasReset=!1)};a.updateTimerControl=function(b){var c=a.timerEnabled;a.timerEnabled=l(2,b);b&=3;if(!c){c=Ab(a.timerInputClock);var d=Ab(b),e=a.dividerRegister;(a.timerEnabled?l(c,e):l(c,e)&&l(d,e))&&zb()}a.timerInputClock=b};a.saveState=function(){e[1024+50*a.saveStateSlot]=a.currentCycles;e[1028+50*a.saveStateSlot]=a.dividerRegister;e[1032+50*a.saveStateSlot]=a.timerCounter;e[1036+50*a.saveStateSlot]=a.timerCounterOverflowDelay;e[1037+50*a.saveStateSlot]=
a.timerCounterWasReset;e[1038+50*a.saveStateSlot]=a.timerCounterMask;e[1042+50*a.saveStateSlot]=a.timerModulo;e[1046+50*a.saveStateSlot]=a.timerEnabled;e[1047+50*a.saveStateSlot]=a.timerInputClock};a.loadState=function(){a.currentCycles=e[1024+50*a.saveStateSlot];a.dividerRegister=e[1028+50*a.saveStateSlot];a.timerCounter=e[1032+50*a.saveStateSlot];a.timerCounterOverflowDelay=h(1036+50*a.saveStateSlot);a.timerCounterWasReset=h(1037+50*a.saveStateSlot);a.timerCounterMask=e[1038+50*a.saveStateSlot];
a.timerModulo=e[1042+50*a.saveStateSlot];a.timerEnabled=h(1046+50*a.saveStateSlot);a.timerInputClock=e[1047+50*a.saveStateSlot]};a.currentCycles=0;a.memoryLocationDividerRegister=65284;a.dividerRegister=0;a.memoryLocationTimerCounter=65285;a.timerCounter=0;a.timerCounterOverflowDelay=!1;a.timerCounterWasReset=!1;a.timerCounterMask=0;a.memoryLocationTimerModulo=65286;a.timerModulo=0;a.memoryLocationTimerControl=65287;a.timerEnabled=!1;a.timerInputClock=0;a.saveStateSlot=5;return a}(),V=function(){function a(){}
a.updateTransferControl=function(b){a.isShiftClockInternal=l(0,b);a.isClockSpeedFast=l(1,b);a.transferStartFlag=l(7,b);return!0};a.currentCycles=0;a.memoryLocationSerialTransferData=65281;a.memoryLocationSerialTransferControl=65282;a.numberOfBitsTransferred=0;a.isShiftClockInternal=!1;a.isClockSpeedFast=!1;a.transferStartFlag=!1;return a}(),C=function(){function a(){}a.updateJoypad=function(b){a.joypadRegisterFlipped=b^255;a.isDpadType=l(4,a.joypadRegisterFlipped);a.isButtonType=l(5,a.joypadRegisterFlipped)};
a.saveState=function(){e[1024+50*a.saveStateSlot]=a.joypadRegisterFlipped;e[1025+50*a.saveStateSlot]=a.isDpadType;e[1026+50*a.saveStateSlot]=a.isButtonType};a.loadState=function(){a.joypadRegisterFlipped=e[1024+50*a.saveStateSlot];a.isDpadType=h(1025+50*a.saveStateSlot);a.isButtonType=h(1026+50*a.saveStateSlot)};a.up=!1;a.down=!1;a.left=!1;a.right=!1;a.a=!1;a.b=!1;a.select=!1;a.start=!1;a.memoryLocationJoypadRegister=65280;a.joypadRegisterFlipped=0;a.isDpadType=!1;a.isButtonType=!1;a.saveStateSlot=
3;return a}(),W=function(){function a(){}a.programCounter=-1;a.readGbMemory=-1;a.writeGbMemory=-1;a.reachedBreakpoint=!1;return a}(),w=function(){function a(){}a.updateLcdStatus=function(b){var c=u(a.memoryLocationLcdStatus);b=b&248|c&7|128;f(a.memoryLocationLcdStatus,b)};a.updateLcdControl=function(b){var c=a.enabled;a.enabled=l(7,b);a.windowTileMapDisplaySelect=l(6,b);a.windowDisplayEnabled=l(5,b);a.bgWindowTileDataSelect=l(4,b);a.bgTileMapDisplaySelect=l(3,b);a.tallSpriteSize=l(2,b);a.spriteDisplayEnable=
l(1,b);a.bgDisplayEnabled=l(0,b);c&&!a.enabled&&Vb(!0);!c&&a.enabled&&Vb(!1)};a.memoryLocationLcdStatus=65345;a.currentLcdMode=0;a.memoryLocationCoincidenceCompare=65349;a.coincidenceCompare=0;a.memoryLocationLcdControl=65344;a.enabled=!0;a.windowTileMapDisplaySelect=!1;a.windowDisplayEnabled=!1;a.bgWindowTileDataSelect=!1;a.bgTileMapDisplaySelect=!1;a.tallSpriteSize=!1;a.spriteDisplayEnable=!1;a.bgDisplayEnabled=!1;return a}(),r=function(){function a(){}a.batchProcessCycles=function(){return a.MAX_CYCLES_PER_SCANLINE()};
a.MAX_CYCLES_PER_SCANLINE=function(){return 153===a.scanlineRegister?4<<b.GBCDoubleSpeed:456<<b.GBCDoubleSpeed};a.MIN_CYCLES_SPRITES_LCD_MODE=function(){return 376<<b.GBCDoubleSpeed};a.MIN_CYCLES_TRANSFER_DATA_LCD_MODE=function(){return 249<<b.GBCDoubleSpeed};a.saveState=function(){e[1024+50*a.saveStateSlot]=a.scanlineCycleCounter;e[1028+50*a.saveStateSlot]=a.scanlineRegister;e[1029+50*a.saveStateSlot]=a.scrollX;e[1030+50*a.saveStateSlot]=a.scrollY;e[1031+50*a.saveStateSlot]=a.windowX;e[1032+50*a.saveStateSlot]=
a.windowY;e[1033+50*a.saveStateSlot]=w.currentLcdMode;e[1034+50*a.saveStateSlot]=w.coincidenceCompare;e[1035+50*a.saveStateSlot]=w.enabled;e[1036+50*a.saveStateSlot]=w.windowTileMapDisplaySelect;e[1037+50*a.saveStateSlot]=w.windowDisplayEnabled;e[1038+50*a.saveStateSlot]=w.bgWindowTileDataSelect;e[1039+50*a.saveStateSlot]=w.bgTileMapDisplaySelect;e[1040+50*a.saveStateSlot]=w.tallSpriteSize;e[1041+50*a.saveStateSlot]=w.spriteDisplayEnable;e[1042+50*a.saveStateSlot]=w.bgDisplayEnabled};a.loadState=
function(){a.scanlineCycleCounter=e[1024+50*a.saveStateSlot];a.scanlineRegister=e[1028+50*a.scanlineRegister];a.scrollX=e[1029+50*a.saveStateSlot];a.scrollY=e[1030+50*a.saveStateSlot];a.windowX=e[1031+50*a.saveStateSlot];a.windowY=e[1032+50*a.saveStateSlot];w.currentLcdMode=e[1033+50*a.saveStateSlot];w.coincidenceCompare=e[1034+50*a.saveStateSlot];w.enabled=h(1035+50*a.saveStateSlot);w.windowTileMapDisplaySelect=h(1036+50*a.saveStateSlot);w.windowDisplayEnabled=h(1037+50*a.saveStateSlot);w.bgWindowTileDataSelect=
h(1038+50*a.saveStateSlot);w.bgTileMapDisplaySelect=h(1039+50*a.saveStateSlot);w.tallSpriteSize=h(1040+50*a.saveStateSlot);w.spriteDisplayEnable=h(1041+50*a.saveStateSlot);w.bgDisplayEnabled=h(1042+50*a.saveStateSlot)};a.currentCycles=0;a.scanlineCycleCounter=0;a.memoryLocationScanlineRegister=65348;a.scanlineRegister=0;a.memoryLocationDmaTransfer=65350;a.memoryLocationScrollX=65347;a.scrollX=0;a.memoryLocationScrollY=65346;a.scrollY=0;a.memoryLocationWindowX=65355;a.windowX=0;a.memoryLocationWindowY=
65354;a.windowY=0;a.memoryLocationTileMapSelectZeroStart=38912;a.memoryLocationTileMapSelectOneStart=39936;a.memoryLocationTileDataSelectZeroStart=34816;a.memoryLocationTileDataSelectOneStart=32768;a.memoryLocationSpriteAttributesTable=65024;a.memoryLocationBackgroundPalette=65351;a.memoryLocationSpritePaletteOne=65352;a.memoryLocationSpritePaletteTwo=65353;a.saveStateSlot=1;return a}(),k=function(){function a(){}a.saveState=function(){e[1024+50*a.saveStateSlot]=a.currentRomBank;e[1026+50*a.saveStateSlot]=
a.currentRamBank;e[1028+50*a.saveStateSlot]=a.isRamBankingEnabled;e[1029+50*a.saveStateSlot]=a.isMBC1RomModeEnabled;e[1030+50*a.saveStateSlot]=a.isRomOnly;e[1031+50*a.saveStateSlot]=a.isMBC1;e[1032+50*a.saveStateSlot]=a.isMBC2;e[1033+50*a.saveStateSlot]=a.isMBC3;e[1034+50*a.saveStateSlot]=a.isMBC5;e[1035+50*a.saveStateSlot]=a.DMACycles;e[1039+50*a.saveStateSlot]=a.isHblankHdmaActive;e[1040+50*a.saveStateSlot]=a.hblankHdmaTransferLengthRemaining;e[1044+50*a.saveStateSlot]=a.hblankHdmaSource;e[1048+
50*a.saveStateSlot]=a.hblankHdmaDestination};a.loadState=function(){a.currentRomBank=e[1024+50*a.saveStateSlot];a.currentRamBank=e[1026+50*a.saveStateSlot];a.isRamBankingEnabled=h(1028+50*a.saveStateSlot);a.isMBC1RomModeEnabled=h(1029+50*a.saveStateSlot);a.isRomOnly=h(1030+50*a.saveStateSlot);a.isMBC1=h(1031+50*a.saveStateSlot);a.isMBC2=h(1032+50*a.saveStateSlot);a.isMBC3=h(1033+50*a.saveStateSlot);a.isMBC5=h(1034+50*a.saveStateSlot);a.DMACycles=e[1035+50*a.saveStateSlot];a.isHblankHdmaActive=h(1039+
50*a.saveStateSlot);a.hblankHdmaTransferLengthRemaining=e[1040+50*a.saveStateSlot];a.hblankHdmaSource=e[1044+50*a.saveStateSlot];a.hblankHdmaDestination=e[1048+50*a.saveStateSlot]};a.cartridgeRomLocation=0;a.switchableCartridgeRomLocation=16384;a.videoRamLocation=32768;a.cartridgeRamLocation=40960;a.internalRamBankZeroLocation=49152;a.internalRamBankOneLocation=53248;a.echoRamLocation=57344;a.spriteInformationTableLocation=65024;a.spriteInformationTableLocationEnd=65183;a.unusableMemoryLocation=65184;
a.unusableMemoryEndLocation=65279;a.currentRomBank=0;a.currentRamBank=0;a.isRamBankingEnabled=!1;a.isMBC1RomModeEnabled=!0;a.isRomOnly=!0;a.isMBC1=!1;a.isMBC2=!1;a.isMBC3=!1;a.isMBC5=!1;a.memoryLocationHdmaSourceHigh=65361;a.memoryLocationHdmaSourceLow=65362;a.memoryLocationHdmaDestinationHigh=65363;a.memoryLocationHdmaDestinationLow=65364;a.memoryLocationHdmaTrigger=65365;a.DMACycles=0;a.isHblankHdmaActive=!1;a.hblankHdmaTransferLengthRemaining=0;a.hblankHdmaSource=0;a.hblankHdmaDestination=0;a.memoryLocationGBCVRAMBank=
65359;a.memoryLocationGBCWRAMBank=65392;a.saveStateSlot=4;return a}(),b=function(){function a(){}a.CLOCK_SPEED=function(){return 4194304<<a.GBCDoubleSpeed};a.MAX_CYCLES_PER_FRAME=function(){return 70224<<a.GBCDoubleSpeed};a.enableHalt=function(){n.masterInterruptSwitch?a.isHaltNormal=!0:0===(n.interruptsEnabledValue&n.interruptsRequestedValue&31)?a.isHaltNoJump=!0:a.isHaltBug=!0};a.exitHaltAndStop=function(){a.isHaltNoJump=!1;a.isHaltNormal=!1;a.isHaltBug=!1;a.isStopped=!1};a.isHalted=function(){return a.isHaltNormal||
a.isHaltNoJump};a.saveState=function(){e[1024+50*a.saveStateSlot]=a.registerA;e[1025+50*a.saveStateSlot]=a.registerB;e[1026+50*a.saveStateSlot]=a.registerC;e[1027+50*a.saveStateSlot]=a.registerD;e[1028+50*a.saveStateSlot]=a.registerE;e[1029+50*a.saveStateSlot]=a.registerH;e[1030+50*a.saveStateSlot]=a.registerL;e[1031+50*a.saveStateSlot]=a.registerF;e[1032+50*a.saveStateSlot]=a.stackPointer;e[1034+50*a.saveStateSlot]=a.programCounter;e[1036+50*a.saveStateSlot]=a.currentCycles;e[1041+50*a.saveStateSlot]=
a.isHaltNormal;e[1042+50*a.saveStateSlot]=a.isHaltNoJump;e[1043+50*a.saveStateSlot]=a.isHaltBug;e[1044+50*a.saveStateSlot]=a.isStopped;e[1045+50*a.saveStateSlot]=a.BootROMEnabled;e[1046+50*a.saveStateSlot]=a.GBCEnabled;e[1047+50*a.saveStateSlot]=a.GBCDoubleSpeed};a.loadState=function(){a.registerA=e[1024+50*a.saveStateSlot];a.registerB=e[1025+50*a.saveStateSlot];a.registerC=e[1026+50*a.saveStateSlot];a.registerD=e[1027+50*a.saveStateSlot];a.registerE=e[1028+50*a.saveStateSlot];a.registerH=e[1029+
50*a.saveStateSlot];a.registerL=e[1030+50*a.saveStateSlot];a.registerF=e[1031+50*a.saveStateSlot];a.stackPointer=e[1032+50*a.saveStateSlot];a.programCounter=e[1034+50*a.saveStateSlot];a.currentCycles=e[1036+50*a.saveStateSlot];a.isHaltNormal=h(1041+50*a.saveStateSlot);a.isHaltNoJump=h(1042+50*a.saveStateSlot);a.isHaltBug=h(1043+50*a.saveStateSlot);a.isStopped=h(1044+50*a.saveStateSlot);a.BootROMEnabled=h(1045+50*a.saveStateSlot);a.GBCEnabled=h(1046+50*a.saveStateSlot);a.GBCDoubleSpeed=h(1047+50*a.saveStateSlot)};
a.memoryLocationBootROMSwitch=65360;a.BootROMEnabled=!1;a.GBCEnabled=!1;a.memoryLocationSpeedSwitch=65357;a.GBCDoubleSpeed=!1;a.registerA=0;a.registerB=0;a.registerC=0;a.registerD=0;a.registerE=0;a.registerH=0;a.registerL=0;a.registerF=0;a.stackPointer=0;a.programCounter=0;a.currentCycles=0;a.isHaltNormal=!1;a.isHaltNoJump=!1;a.isHaltBug=!1;a.isStopped=!1;a.saveStateSlot=0;return a}(),Z=function(){function a(){}a.cyclesPerCycleSet=2E9;a.cycleSets=0;a.cycles=0;return a}(),S=function(){function a(){}
a.stepsPerStepSet=2E9;a.stepSets=0;a.steps=0;a.RESPONSE_CONDITION_ERROR=-1;a.RESPONSE_CONDITION_FRAME=0;a.RESPONSE_CONDITION_AUDIO=1;a.RESPONSE_CONDITION_BREAKPOINT=2;return a}();eb.size()<Lb&&eb.grow(Lb-eb.size());var db=!1,xc=Object.freeze({memory:eb,config:function(a,c,e,l,h,p,q,w,O,x){M.enableBootRom=0<a;M.useGbcWhenAvailable=0<c;M.audioBatchProcessing=0<e;M.graphicsBatchProcessing=0<l;M.timersBatchProcessing=0<h;M.graphicsDisableScanlineRendering=0<p;M.audioAccumulateSamples=0<q;M.tileRendering=
0<w;M.tileCaching=0<O;M.enableAudioDebugging=0<x;a=u(323);b.GBCEnabled=192===a||M.useGbcWhenAvailable&&128===a?!0:!1;db=!1;Z.cyclesPerCycleSet=2E9;Z.cycleSets=0;Z.cycles=0;S.stepsPerStepSet=2E9;S.stepSets=0;S.steps=0;b.BootROMEnabled=M.enableBootRom?!0:!1;b.GBCDoubleSpeed=!1;b.registerA=0;b.registerB=0;b.registerC=0;b.registerD=0;b.registerE=0;b.registerH=0;b.registerL=0;b.registerF=0;b.stackPointer=0;b.programCounter=0;b.currentCycles=0;b.isHaltNormal=!1;b.isHaltNoJump=!1;b.isHaltBug=!1;b.isStopped=
!1;b.BootROMEnabled||(b.GBCEnabled?(b.registerA=17,b.registerF=128,b.registerB=0,b.registerC=0,b.registerD=255,b.registerE=86,b.registerH=0,b.registerL=13):(b.registerA=1,b.registerF=176,b.registerB=0,b.registerC=19,b.registerD=0,b.registerE=216,b.registerH=1,b.registerL=77),b.programCounter=256,b.stackPointer=65534);k.isRamBankingEnabled=!1;k.isMBC1RomModeEnabled=!0;a=u(327);k.isRomOnly=0===a;k.isMBC1=1<=a&&3>=a;k.isMBC2=5<=a&&6>=a;k.isMBC3=15<=a&&19>=a;k.isMBC5=25<=a&&30>=a;k.currentRomBank=1;k.currentRamBank=
0;f(k.memoryLocationGBCVRAMBank,0);f(k.memoryLocationGBCWRAMBank,1);f(65361,255);f(65362,255);f(65363,255);f(65364,255);f(65365,255);r.currentCycles=0;r.scanlineCycleCounter=0;r.scanlineRegister=0;r.scrollX=0;r.scrollY=0;r.windowX=0;r.windowY=0;r.scanlineRegister=144;b.GBCEnabled?(f(65345,129),f(65348,144),f(65351,252)):(f(65345,133),f(65350,255),f(65351,252),f(65352,255),f(65353,255));r.scanlineRegister=144;f(65344,145);f(65359,0);f(65392,1);b.BootROMEnabled&&(b.GBCEnabled?(r.scanlineRegister=0,
f(65344,0),f(65345,128),f(65348,0)):(r.scanlineRegister=0,f(65344,0),f(65345,132)));Mb(0);if(!b.GBCEnabled&&(!b.BootROMEnabled||b.GBCEnabled)){a=0;for(c=308;323>=c;c++)a+=u(c);switch(a&255){case 136:d.bgWhite=pa.bgWhite;d.bgLightGrey=pa.bgLightGrey;d.bgDarkGrey=pa.bgDarkGrey;d.bgBlack=pa.bgBlack;d.obj0White=pa.obj0White;d.obj0LightGrey=pa.obj0LightGrey;d.obj0DarkGrey=pa.obj0DarkGrey;d.obj0Black=pa.obj0Black;d.obj1White=pa.obj1White;d.obj1LightGrey=pa.obj1LightGrey;d.obj1DarkGrey=pa.obj1DarkGrey;d.obj1Black=
pa.obj1Black;break;case 97:d.bgWhite=qa.bgWhite;d.bgLightGrey=qa.bgLightGrey;d.bgDarkGrey=qa.bgDarkGrey;d.bgBlack=qa.bgBlack;d.obj0White=qa.obj0White;d.obj0LightGrey=qa.obj0LightGrey;d.obj0DarkGrey=qa.obj0DarkGrey;d.obj0Black=qa.obj0Black;d.obj1White=qa.obj1White;d.obj1LightGrey=qa.obj1LightGrey;d.obj1DarkGrey=qa.obj1DarkGrey;d.obj1Black=qa.obj1Black;break;case 20:d.bgWhite=ra.bgWhite;d.bgLightGrey=ra.bgLightGrey;d.bgDarkGrey=ra.bgDarkGrey;d.bgBlack=ra.bgBlack;d.obj0White=ra.obj0White;d.obj0LightGrey=
ra.obj0LightGrey;d.obj0DarkGrey=ra.obj0DarkGrey;d.obj0Black=ra.obj0Black;d.obj1White=ra.obj1White;d.obj1LightGrey=ra.obj1LightGrey;d.obj1DarkGrey=ra.obj1DarkGrey;d.obj1Black=ra.obj1Black;break;case 70:d.bgWhite=sa.bgWhite;d.bgLightGrey=sa.bgLightGrey;d.bgDarkGrey=sa.bgDarkGrey;d.bgBlack=sa.bgBlack;d.obj0White=sa.obj0White;d.obj0LightGrey=sa.obj0LightGrey;d.obj0DarkGrey=sa.obj0DarkGrey;d.obj0Black=sa.obj0Black;d.obj1White=sa.obj1White;d.obj1LightGrey=sa.obj1LightGrey;d.obj1DarkGrey=sa.obj1DarkGrey;
d.obj1Black=sa.obj1Black;break;case 89:case 198:d.bgWhite=ta.bgWhite;d.bgLightGrey=ta.bgLightGrey;d.bgDarkGrey=ta.bgDarkGrey;d.bgBlack=ta.bgBlack;d.obj0White=ta.obj0White;d.obj0LightGrey=ta.obj0LightGrey;d.obj0DarkGrey=ta.obj0DarkGrey;d.obj0Black=ta.obj0Black;d.obj1White=ta.obj1White;d.obj1LightGrey=ta.obj1LightGrey;d.obj1DarkGrey=ta.obj1DarkGrey;d.obj1Black=ta.obj1Black;break;case 134:case 168:d.bgWhite=ua.bgWhite;d.bgLightGrey=ua.bgLightGrey;d.bgDarkGrey=ua.bgDarkGrey;d.bgBlack=ua.bgBlack;d.obj0White=
ua.obj0White;d.obj0LightGrey=ua.obj0LightGrey;d.obj0DarkGrey=ua.obj0DarkGrey;d.obj0Black=ua.obj0Black;d.obj1White=ua.obj1White;d.obj1LightGrey=ua.obj1LightGrey;d.obj1DarkGrey=ua.obj1DarkGrey;d.obj1Black=ua.obj1Black;break;case 191:case 206:case 209:case 240:d.bgWhite=va.bgWhite;d.bgLightGrey=va.bgLightGrey;d.bgDarkGrey=va.bgDarkGrey;d.bgBlack=va.bgBlack;d.obj0White=va.obj0White;d.obj0LightGrey=va.obj0LightGrey;d.obj0DarkGrey=va.obj0DarkGrey;d.obj0Black=va.obj0Black;d.obj1White=va.obj1White;d.obj1LightGrey=
va.obj1LightGrey;d.obj1DarkGrey=va.obj1DarkGrey;d.obj1Black=va.obj1Black;break;case 39:case 73:case 92:case 179:d.bgWhite=wa.bgWhite;d.bgLightGrey=wa.bgLightGrey;d.bgDarkGrey=wa.bgDarkGrey;d.bgBlack=wa.bgBlack;d.obj0White=wa.obj0White;d.obj0LightGrey=wa.obj0LightGrey;d.obj0DarkGrey=wa.obj0DarkGrey;d.obj0Black=wa.obj0Black;d.obj1White=wa.obj1White;d.obj1LightGrey=wa.obj1LightGrey;d.obj1DarkGrey=wa.obj1DarkGrey;d.obj1Black=wa.obj1Black;break;case 201:d.bgWhite=xa.bgWhite;d.bgLightGrey=xa.bgLightGrey;
d.bgDarkGrey=xa.bgDarkGrey;d.bgBlack=xa.bgBlack;d.obj0White=xa.obj0White;d.obj0LightGrey=xa.obj0LightGrey;d.obj0DarkGrey=xa.obj0DarkGrey;d.obj0Black=xa.obj0Black;d.obj1White=xa.obj1White;d.obj1LightGrey=xa.obj1LightGrey;d.obj1DarkGrey=xa.obj1DarkGrey;d.obj1Black=xa.obj1Black;break;case 112:d.bgWhite=ya.bgWhite;d.bgLightGrey=ya.bgLightGrey;d.bgDarkGrey=ya.bgDarkGrey;d.bgBlack=ya.bgBlack;d.obj0White=ya.obj0White;d.obj0LightGrey=ya.obj0LightGrey;d.obj0DarkGrey=ya.obj0DarkGrey;d.obj0Black=ya.obj0Black;
d.obj1White=ya.obj1White;d.obj1LightGrey=ya.obj1LightGrey;d.obj1DarkGrey=ya.obj1DarkGrey;d.obj1Black=ya.obj1Black;break;case 70:d.bgWhite=za.bgWhite;d.bgLightGrey=za.bgLightGrey;d.bgDarkGrey=za.bgDarkGrey;d.bgBlack=za.bgBlack;d.obj0White=za.obj0White;d.obj0LightGrey=za.obj0LightGrey;d.obj0DarkGrey=za.obj0DarkGrey;d.obj0Black=za.obj0Black;d.obj1White=za.obj1White;d.obj1LightGrey=za.obj1LightGrey;d.obj1DarkGrey=za.obj1DarkGrey;d.obj1Black=za.obj1Black;break;case 211:d.bgWhite=Aa.bgWhite,d.bgLightGrey=
Aa.bgLightGrey,d.bgDarkGrey=Aa.bgDarkGrey,d.bgBlack=Aa.bgBlack,d.obj0White=Aa.obj0White,d.obj0LightGrey=Aa.obj0LightGrey,d.obj0DarkGrey=Aa.obj0DarkGrey,d.obj0Black=Aa.obj0Black,d.obj1White=Aa.obj1White,d.obj1LightGrey=Aa.obj1LightGrey,d.obj1DarkGrey=Aa.obj1DarkGrey,d.obj1Black=Aa.obj1Black}}b.GBCEnabled?(f(65384,192),f(65385,255),f(65386,193),f(65387,13)):(f(65384,255),f(65385,255),f(65386,255),f(65387,255));b.BootROMEnabled&&b.GBCEnabled&&(f(65385,32),f(65387,138));m.currentCycles=0;m.NR50LeftMixerVolume=
0;m.NR50RightMixerVolume=0;m.NR51IsChannel1EnabledOnLeftOutput=!0;m.NR51IsChannel2EnabledOnLeftOutput=!0;m.NR51IsChannel3EnabledOnLeftOutput=!0;m.NR51IsChannel4EnabledOnLeftOutput=!0;m.NR51IsChannel1EnabledOnRightOutput=!0;m.NR51IsChannel2EnabledOnRightOutput=!0;m.NR51IsChannel3EnabledOnRightOutput=!0;m.NR51IsChannel4EnabledOnRightOutput=!0;m.NR52IsSoundEnabled=!0;m.frameSequenceCycleCounter=0;m.downSampleCycleCounter=0;m.frameSequencer=0;m.audioQueueIndex=0;y.initialize();A.initialize();v.initialize();
D.initialize();f(m.memoryLocationNR50,119);m.updateNR50(119);f(m.memoryLocationNR51,243);m.updateNR51(243);f(m.memoryLocationNR52,241);m.updateNR52(241);b.BootROMEnabled&&(f(m.memoryLocationNR50,0),m.updateNR50(0),f(m.memoryLocationNR51,0),m.updateNR51(0),f(m.memoryLocationNR52,112),m.updateNR52(112));g.channel1Sample=15;g.channel2Sample=15;g.channel3Sample=15;g.channel4Sample=15;g.channel1DacEnabled=!1;g.channel2DacEnabled=!1;g.channel3DacEnabled=!1;g.channel4DacEnabled=!1;g.leftChannelSampleUnsignedByte=
127;g.rightChannelSampleUnsignedByte=127;g.mixerVolumeChanged=!0;g.mixerEnabledChanged=!0;g.needToRemixSamples=!1;n.updateInterruptEnabled(0);f(n.memoryLocationInterruptEnabled,n.interruptsEnabledValue);n.updateInterruptRequested(225);f(n.memoryLocationInterruptRequest,n.interruptsRequestedValue);t.currentCycles=0;t.dividerRegister=0;t.timerCounter=0;t.timerModulo=0;t.timerEnabled=!1;t.timerInputClock=0;t.timerCounterOverflowDelay=!1;t.timerCounterWasReset=!1;b.GBCEnabled?(f(65284,30),t.dividerRegister=
7840):(f(65284,171),t.dividerRegister=43980);f(65287,248);t.timerInputClock=248;b.BootROMEnabled&&!b.GBCEnabled&&(f(65284,0),t.dividerRegister=4);V.currentCycles=0;V.numberOfBitsTransferred=0;b.GBCEnabled?(f(65282,124),V.updateTransferControl(124)):(f(65282,126),V.updateTransferControl(126));b.GBCEnabled?(f(65392,248),f(65359,254),f(65357,126),f(65280,207),f(65295,225),f(65388,254),f(65397,143)):(f(65392,255),f(65359,255),f(65357,255),f(65280,207),f(65295,225))},hasCoreStarted:function(){return db},
saveState:function(){b.saveState();r.saveState();n.saveState();C.saveState();k.saveState();t.saveState();m.saveState();y.saveState();A.saveState();v.saveState();D.saveState();db=!1},loadState:function(){b.loadState();r.loadState();n.loadState();C.loadState();k.loadState();t.loadState();m.loadState();y.loadState();A.loadState();v.loadState();D.loadState();db=!1;Z.cyclesPerCycleSet=2E9;Z.cycleSets=0;Z.cycles=0;S.stepsPerStepSet=2E9;S.stepSets=0;S.steps=0},isGBC:function(){return b.GBCEnabled},getStepsPerStepSet:function(){return S.stepsPerStepSet},
getStepSets:function(){return S.stepSets},getSteps:function(){return S.steps},executeMultipleFrames:function(a){for(var b=0,d=0;d<a&&0<=b;)b=$b(),d+=1;return 0>b?b:0},executeFrame:$b,executeFrameAndCheckAudio:function(a){void 0===a&&(a=0);return Ib(!0,a)},executeUntilCondition:Ib,executeStep:ac,getCyclesPerCycleSet:function(){return Z.cyclesPerCycleSet},getCycleSets:function(){return Z.cycleSets},getCycles:function(){return Z.cycles},setJoypadState:function(a,b,d,e,f,l,g,h){0<a?Na(0):Ca(0,!1);0<b?
Na(1):Ca(1,!1);0<d?Na(2):Ca(2,!1);0<e?Na(3):Ca(3,!1);0<f?Na(4):Ca(4,!1);0<l?Na(5):Ca(5,!1);0<g?Na(6):Ca(6,!1);0<h?Na(7):Ca(7,!1)},getNumberOfSamplesInAudioBuffer:Qb,clearAudioBuffer:Rb,setManualColorizationPalette:Mb,WASMBOY_MEMORY_LOCATION:0,WASMBOY_MEMORY_SIZE:bc,WASMBOY_WASM_PAGES:Lb,ASSEMBLYSCRIPT_MEMORY_LOCATION:0,ASSEMBLYSCRIPT_MEMORY_SIZE:1024,WASMBOY_STATE_LOCATION:1024,WASMBOY_STATE_SIZE:1024,GAMEBOY_INTERNAL_MEMORY_LOCATION:2048,GAMEBOY_INTERNAL_MEMORY_SIZE:uc,VIDEO_RAM_LOCATION:2048,VIDEO_RAM_SIZE:16384,
WORK_RAM_LOCATION:18432,WORK_RAM_SIZE:32768,OTHER_GAMEBOY_INTERNAL_MEMORY_LOCATION:51200,OTHER_GAMEBOY_INTERNAL_MEMORY_SIZE:16384,GRAPHICS_OUTPUT_LOCATION:vc,GRAPHICS_OUTPUT_SIZE:wc,GBC_PALETTE_LOCATION:Ta,GBC_PALETTE_SIZE:128,BG_PRIORITY_MAP_LOCATION:Ua,BG_PRIORITY_MAP_SIZE:23552,FRAME_LOCATION:Ya,FRAME_SIZE:93184,BACKGROUND_MAP_LOCATION:ob,BACKGROUND_MAP_SIZE:196608,TILE_DATA_LOCATION:Jb,TILE_DATA_SIZE:147456,OAM_TILES_LOCATION:pb,OAM_TILES_SIZE:15360,AUDIO_BUFFER_LOCATION:kb,AUDIO_BUFFER_SIZE:131072,
CHANNEL_1_BUFFER_LOCATION:ub,CHANNEL_1_BUFFER_SIZE:131072,CHANNEL_2_BUFFER_LOCATION:vb,CHANNEL_2_BUFFER_SIZE:131072,CHANNEL_3_BUFFER_LOCATION:wb,CHANNEL_3_BUFFER_SIZE:131072,CHANNEL_4_BUFFER_LOCATION:xb,CHANNEL_4_BUFFER_SIZE:131072,CARTRIDGE_RAM_LOCATION:Fb,CARTRIDGE_RAM_SIZE:131072,BOOT_ROM_LOCATION:mb,BOOT_ROM_SIZE:2560,CARTRIDGE_ROM_LOCATION:nb,CARTRIDGE_ROM_SIZE:8258560,DEBUG_GAMEBOY_MEMORY_LOCATION:Kb,DEBUG_GAMEBOY_MEMORY_SIZE:65535,getWasmBoyOffsetFromGameBoyOffset:Eb,setProgramCounterBreakpoint:function(a){W.programCounter=
a},resetProgramCounterBreakpoint:function(){W.programCounter=-1},setReadGbMemoryBreakpoint:function(a){W.readGbMemory=a},resetReadGbMemoryBreakpoint:function(){W.readGbMemory=-1},setWriteGbMemoryBreakpoint:function(a){W.writeGbMemory=a},resetWriteGbMemoryBreakpoint:function(){W.writeGbMemory=-1},getRegisterA:function(){return b.registerA},getRegisterB:function(){return b.registerB},getRegisterC:function(){return b.registerC},getRegisterD:function(){return b.registerD},getRegisterE:function(){return b.registerE},
getRegisterH:function(){return b.registerH},getRegisterL:function(){return b.registerL},getRegisterF:function(){return b.registerF},getProgramCounter:function(){return b.programCounter},getStackPointer:function(){return b.stackPointer},getOpcodeAtProgramCounter:function(){return u(b.programCounter)},getLY:function(){return r.scanlineRegister},getScrollX:function(){return r.scrollX},getScrollY:function(){return r.scrollY},getWindowX:function(){return r.windowX},getWindowY:function(){return r.windowY},
drawBackgroundMapToWasmMemory:function(a){var c=r.memoryLocationTileDataSelectZeroStart;w.bgWindowTileDataSelect&&(c=r.memoryLocationTileDataSelectOneStart);var d=r.memoryLocationTileMapSelectZeroStart;w.bgTileMapDisplaySelect&&(d=r.memoryLocationTileMapSelectOneStart);for(var f=0;256>f;f++)for(var g=0;256>g;g++){var h=f,m=g,k=d+32*(h>>3)+(m>>3),n=T(k,0);n=$a(c,n);var p=h%8;h=m%8;h=7-h;m=0;b.GBCEnabled&&0<a&&(m=T(k,1));l(6,m)&&(p=7-p);var q=0;l(3,m)&&(q=1);k=T(n+2*p,q);n=T(n+2*p+1,q);p=0;l(h,n)&&
(p+=1,p<<=1);l(h,k)&&(p+=1);n=3*(256*f+g);b.GBCEnabled&&0<a?(k=hb(m&7,p,!1),m=oa(0,k),h=oa(1,k),k=oa(2,k),n=ob+n,e[n]=m,e[n+1]=h,e[n+2]=k):(m=gb(p,r.memoryLocationBackgroundPalette),n=ob+n,e[n+0]=(m&16711680)>>16,e[n+1]=(m&65280)>>8,e[n+2]=m&255)}},drawTileDataToWasmMemory:function(){for(var a=0;23>a;a++)for(var c=0;31>c;c++){var d=0;15<c&&(d=1);var e=a;15<a&&(e-=15);e<<=4;e=15<c?e+(c-15):e+c;var f=r.memoryLocationTileDataSelectOneStart;15<a&&(f=r.memoryLocationTileDataSelectZeroStart);for(var g=
r.memoryLocationBackgroundPalette,n=-1,m=-1,h=0;8>h;h++)for(var k=0;5>k;k++){var p=4*(8*k+h),q=u(r.memoryLocationSpriteAttributesTable+p+2);e===q&&(p=u(r.memoryLocationSpriteAttributesTable+p+3),q=0,b.GBCEnabled&&l(3,p)&&(q=1),q===d&&(m=p,h=8,k=5,g=r.memoryLocationSpritePaletteOne,l(4,m)&&(g=r.memoryLocationSpritePaletteTwo)))}if(b.GBCEnabled&&0>m){h=r.memoryLocationTileMapSelectZeroStart;w.bgTileMapDisplaySelect&&(h=r.memoryLocationTileMapSelectOneStart);k=-1;for(p=0;32>p;p++)for(q=0;32>q;q++){var t=
h+32*q+p,v=T(t,0);e===v&&(k=t,q=p=32)}0<=k&&(n=T(k,1))}for(h=0;8>h;h++)rb(e,f,d,0,7,h,8*c,8*a+h,248,Jb,!1,g,n,m)}},drawOamToWasmMemory:function(){for(var a=0;8>a;a++)for(var c=0;5>c;c++){var d=4*(8*c+a);u(r.memoryLocationSpriteAttributesTable+d);u(r.memoryLocationSpriteAttributesTable+d+1);var e=u(r.memoryLocationSpriteAttributesTable+d+2),f=1;w.tallSpriteSize&&(1===e%2&&--e,f+=1);d=u(r.memoryLocationSpriteAttributesTable+d+3);var g=0;b.GBCEnabled&&l(3,d)&&(g=1);var h=r.memoryLocationSpritePaletteOne;
l(4,d)&&(h=r.memoryLocationSpritePaletteTwo);for(var k=0;k<f;k++)for(var m=0;8>m;m++)rb(e+k,r.memoryLocationTileDataSelectOneStart,g,0,7,m,8*a,16*c+m+8*k,64,pb,!1,h,-1,d)}},getDIV:function(){return t.dividerRegister},getTIMA:function(){return t.timerCounter},getTMA:function(){return t.timerModulo},getTAC:function(){var a=t.timerInputClock;t.timerEnabled&&(a|=4);return a},updateDebugGBMemory:function(){for(var a=0;65535>a;a++){var b=Bb(a);e[Kb+a]=b}W.reachedBreakpoint=!1}});return async()=>({instance:{exports:xc},
byteMemory:eb.wasmByteMemory,type:"TypeScript"})}()
//# sourceMappingURL=getWasmBoyTsCore.closure.iife.js.map
